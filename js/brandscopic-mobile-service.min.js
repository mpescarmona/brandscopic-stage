angular.module("brandscopicApp.debounce",[]).factory("debounce",["$timeout","$q",function($timeout,$q){"use strict";var deb=function(func,delay,immediate,ctx){var timer=null,deferred=$q.defer(),wait=delay||300;return function(){var context=ctx||this,args=arguments,callNow=immediate&&!timer,later=function(){immediate||(deferred.resolve(func.apply(context,args)),deferred=$q.defer())};return timer&&$timeout.cancel(timer),timer=$timeout(later,wait),callNow&&(deferred.resolve(func.apply(context,args)),deferred=$q.defer()),deferred.promise}};return deb}]),angular.module("brandscopicApp.eventService",[]).factory("eventService",["$q","CompanyService","UserService","Event",function($q,CompanyService,UserService,Event){"use strict";var searchResult=[],_getEventSearch=function(value){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,q:value},actions={success:function(items){searchResult=[],angular.forEach(items,function(item){angular.forEach(item.value,function(subItem){searchResult.push({category:item.label,label:subItem.label,id:subItem.value,type:subItem.type})})}),defer.resolve(searchResult)},error:function(event_error){scope.event_error=event_error,defer.reject()}};return Event.search(credentials,actions),defer.promise},_getEventsByFilters=function(campaign,place,user,brand,brand_portfolio,venue){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,"campaign[]":campaign,"place[]":place,"user[]":user,"brand[]":brand,"brand_portfolio[]":brand_portfolio,"venue[]":venue},actions={success:function(items){defer.resolve(items)},error:function(event_error){scope.event_error=event_error,defer.reject()}};return Event.filterEvents(credentials,actions),defer.promise};return{getEventSearch:_getEventSearch,getEventsByFilters:_getEventsByFilters}}]),angular.module("brandscopicApp.photosService",[]).factory("photosService",["$q","CompanyService","UserService","$stateParams","Photos",function($q,CompanyService,UserService,$stateParams,Photos){"use strict";var _getPhotoAmazonAuth=function(){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(response){defer.resolve(response)}};return Photos.form(credentials,actions),defer.promise},_getPhotosList=function(){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(response){defer.resolve(response)}};return Photos.all(credentials,actions),defer.promise},_getAddPhoto=function(){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(response){defer.resolve(response)}};return Photos.add(credentials,actions),defer.promise};return{getPhotoAmazonAuth:_getPhotoAmazonAuth,getPhotosList:_getPhotosList,getAddPhoto:_getAddPhoto}}]).service("UploadedPhotosTracker",function(){this.uploadedPhotos={},this.addUploadedPhotos=function(eventId,amount){this.uploadedPhotos[eventId]||(this.uploadedPhotos[eventId]=0),this.uploadedPhotos[eventId]+=amount},this.getExpectedPhotosAmount=function(eventId){return this.uploadedPhotos[eventId]},this.setUplodadedPhotos=function(eventId,amount){this.uploadedPhotos[eventId]=amount}}),angular.module("brandscopicApp.surveysService",[]).factory("surveysService",["$q","CompanyService","UserService","$stateParams","Surveys","Event",function($q,CompanyService,UserService,$stateParams,Surveys){"use strict";var _question_one_options=Object.freeze([{PURCHASED:"PURCHASED",AWARE:"AWARE",UNAWARE:"UNAWARE"}]),_genders=Object.freeze([{key:scopic.consts.surveys_question_gender.MALE,value:"Male"},{key:scopic.consts.surveys_question_gender.FEMALE,value:"Female"}]),_races=Object.freeze([{key:scopic.consts.surveys_question_race.ASIAN,value:"Asian"},{key:scopic.consts.surveys_question_race.BLACK,value:"African American"},{key:scopic.consts.surveys_question_race.LATINO,value:"Hispanic Latino"},{key:scopic.consts.surveys_question_race.AMERICAN,value:"Native Americans"},{key:scopic.consts.surveys_question_race.WHITE,value:"White"}]),_ages=Object.freeze([{key:scopic.consts.surveys_question_age.LESS12,value:"<12"},{key:scopic.consts.surveys_question_age.BETWEEN_12_17,value:"12-17"},{key:scopic.consts.surveys_question_age.BETWEEN_18_20,value:"18-20"},{key:scopic.consts.surveys_question_age.BETWEEN_21_24,value:"21-24"},{key:scopic.consts.surveys_question_age.BETWEEN_25_34,value:"25-34"},{key:scopic.consts.surveys_question_age.BETWEEN_35_44,value:"35-44"},{key:scopic.consts.surveys_question_age.BETWEEN_45_54,value:"45-54"},{key:scopic.consts.surveys_question_age.BETWEEN_55_64,value:"55-64"},{key:scopic.consts.surveys_question_age.MORE_65,value:"65+"}]),_likelihood=Object.freeze([{key:scopic.consts.surveys_question_likelihood.VERY_UNLIKELY,value:"1 - VERY UNLIKELY"},{key:scopic.consts.surveys_question_likelihood.UNLIKELY,value:"2 - UNLIKELY"},{key:scopic.consts.surveys_question_likelihood.REGULAR,value:"3 - REGULAR"},{key:scopic.consts.surveys_question_likelihood.LIKELY,value:"4 - LIKELY"},{key:scopic.consts.surveys_question_likelihood.VERY_LIKELY,value:"5 - VERY LIKELY"}]),_getSurveysList=function(){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(items){defer.resolve(items)},error:function(event_error){defer.reject(event_error)}};return Surveys.all(credentials,actions),defer.promise},_createSurvey=function(survey){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(items){defer.resolve(items)},error:function(event_error){defer.reject(event_error)}};return Surveys.create(credentials,actions,survey),defer.promise},_editSurvey=function(survey,survey_id){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId,id:survey_id},actions={success:function(items){defer.resolve(items)},error:function(event_error){defer.reject(event_error)}};return Surveys.update(credentials,actions,survey),defer.promise},_getBrandslist=function(){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(items){defer.resolve(items)},error:function(event_error){console.log(event_error),defer.reject(event_error)}};return Surveys.brands(credentials,actions),defer.promise},_getSurveyDetail=function(survey_id){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId,id:survey_id},actions={success:function(items){defer.resolve(items)},error:function(event_error){console.log(event_error),defer.reject(event_error)}};return Surveys.detail(credentials,actions),defer.promise};return{ages:_ages,createSurvey:_createSurvey,editSurvey:_editSurvey,genders:_genders,getBrandslist:_getBrandslist,getSurveyDetail:_getSurveyDetail,getSurveysList:_getSurveysList,likehood:_likelihood,races:_races,question_one_options:_question_one_options}}]),angular.module("brandscopicApp.venueService",[]).factory("venueService",["$q","CompanyService","UserService","Venue",function($q,CompanyService,UserService,Venue){"use strict";var searchResult=[],_getVenuesSearch=function(value){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,term:value},actions={success:function(items){defer.resolve(items)},error:function(venue_error){scope.venue_error=venue_error,defer.reject()}};return Venue.search(credentials,actions),defer.promise},_getVenuesAutocomplete=function(value){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,q:value},actions={success:function(items){searchResult=[],angular.forEach(items,function(item){angular.forEach(item.value,function(subItem){searchResult.push({category:item.label,label:subItem.label,id:subItem.value,type:subItem.type})})}),defer.resolve(searchResult)},error:function(venue_error){scope.venue_error=venue_error,defer.reject()}};return Venue.venuesAutocomplete(credentials,actions),defer.promise},_getVenuesByFilters=function(area,brand,brand_portfolio,campaign,company_user,team){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,"area[]":area,"brand[]":brand,"brand_portfolio[]":brand_portfolio,"campaign[]":campaign,"company_user[]":company_user,"team[]":team},actions={success:function(items){defer.resolve(items)},error:function(event_error){scope.event_error=event_error,defer.reject()}};return Venue.filterVenues(credentials,actions),defer.promise};return{getVenuesSearch:_getVenuesSearch,getVenuesAutocomplete:_getVenuesAutocomplete,getVenuesByFilters:_getVenuesByFilters}}]),angular.module("brandscopicApp.services").service("SessionService",["$sessionStorage","$localStorage",function($sessionStorage,$localStorage){this.storageService=$localStorage,this.setStorageType=function(type){if("local"===type.toLowerCase())this.storageService=$localStorage,delete $sessionStorage.usingSession;else{if("session"!==type.toLowerCase())throw"Invalid storage type";$sessionStorage.usingSession=!0,this.storageService=$sessionStorage}},this.get=function(dataName){return this.storageService[dataName]},this.put=function(dataName,data){this.storageService[dataName]=data},this.remove=function(dataName){delete this.storageService[dataName],this.storageService===$localStorage&&delete this.storageService.usingSession},$sessionStorage.usingSession&&(this.storageService=$sessionStorage)}]),angular.module("brandscopicApp.services.permissions").service("eventsPermissionsService",function(){this.pagePermissions=["events"],this.elementsVisiblePermissions={".edit-event":["events_edit"],".deactivate-event":["events_deactivate"]},this.hyperlinksEnabledPermissions={".events-link":["events_show"]}}),angular.module("brandscopicApp.services.permissions").service("venuesPermissionsService",function(){this.pagePermissions=["venues"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}).service("venuesPermissionsAddService",function(){this.pagePermissions=["venues_create"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}),angular.module("brandscopicApp.services.permissions").service("eventAboutPermissionsService",function(){this.pagePermissions=[],this.elementsVisiblePermissions={"#edit-button":["events_edit"],"#deactivate-button":["events_deactivate"]},this.hyperlinksEnabledPermissions={}}),angular.module("brandscopicApp.services.permissions").service("eventsDetailsPermissionsService",["UserService",function(UserService){this.pagePermissions=[],this.elementsVisiblePermissions={"#people-button":{events:["events_team_members","events_contacts"],customHandler:function(){for(var elementsShouldBeVisible=!1,i=0;i<this.events.length;i++)elementsShouldBeVisible=elementsShouldBeVisible||UserService.permissionIsValid(this.events[i]);return elementsShouldBeVisible}},"#expenses-button":["events_expenses"],"#photos-button":["events_photos"],"#surveys-button":["events_surveys"]},this.hyperlinksEnabledPermissions={}}]),angular.module("brandscopicApp.services.permissions").service("eventsPeoplePermissionsService",function(){this.pagePermissions=["events"],this.elementsVisiblePermissions={"#team-button":["events_team_members"],"#contacts-button":["events_contacts"],".contact-deactivate-button":["events_delete_contacts"],".contact-edit-button":["events_edit_contacts"]},this.hyperlinksEnabledPermissions={}}),angular.module("brandscopicApp.services.permissions").service("eventsExpensesPermissionsService",["UserService",function(){this.pagePermissions=["events_expenses"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}]).service("eventsExpensesAddPermissionsService",["UserService",function(){this.pagePermissions=["events_create_expenses"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}]),angular.module("brandscopicApp.services.permissions").service("eventsPhotosPermissionsService",function(){this.pagePermissions=["events_photos"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}).service("eventsPhotosAddPermissionsService",function(){this.pagePermissions=["events_create_photos"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}),angular.module("brandscopicApp.services.permissions").service("eventSurveysPermissionsService",function(){this.pagePermissions=["events_surveys"],this.elementsVisiblePermissions={".survey-edit-button":["events_edit_surveys"]},this.hyperlinksEnabledPermissions={}}).service("eventSurveysAddPermissionsService",function(){this.pagePermissions=["events_create_surveys"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}).service("eventSurveysEditPermissionsService",function(){this.pagePermissions=["events_edit_surveys"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}),angular.module("brandscopicApp.services.permissions").service("homePermissionsService",function(){this.pagePermissions=[],this.elementsVisiblePermissions={"#eventsNavBar":["events"],"#venuesNavBar":["venues"]},this.hyperlinksEnabledPermissions={}});