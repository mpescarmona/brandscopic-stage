"use strict";function SessionData(authToken,email,currentCompanyId,currentCompanyName,permissions){this.authToken=authToken,this.email=email,this.currentCompanyId=currentCompanyId,this.currentCompanyName=currentCompanyName,this.currentPermissions=permissions}function eventsSurveysParentController($scope,surveysService){$scope.gendersList=surveysService.genders,$scope.racesList=surveysService.races,$scope.agesList=surveysService.ages,$scope.likehoodList=surveysService.likehood,$scope.genderModel={genderSelected:""},$scope.raceModel={raceSelected:""},$scope.ageModel={ageSelected:""},$scope.questions={},$scope.questions.brandsQuestion1=[],$scope.questions.brandsQuestion2=[],$scope.questions.brandsQuestion3=[],$scope.questions.brandsQuestion4=[],surveysService.getBrandslist().then(function(response){$scope.brandslist=response,angular.forEach(response,function(brand){$scope.questions.brandsQuestion1.push({id:0,brand_id:brand.id,question_id:1,name:brand.name,model:brand.id+"_model"}),$scope.questions.brandsQuestion2.push({id:0,brand_id:brand.id,question_id:2,name:brand.name,model:brand.id+"_model",input_id:"question2"+brand.id}),$scope.questions.brandsQuestion3.push({id:0,brand_id:brand.id,question_id:3,name:brand.name,model:brand.id+"_model",input_id:"question3"+brand.id}),$scope.questions.brandsQuestion4.push({id:0,brand_id:brand.id,question_id:4,name:brand.name,model:brand.id+"_model",input_id:"question4"+brand.id})})},function(response){console.log(response)})}function DashboardController($scope,$state,snapRemote,UserService,CompanyService,UserInterface,Campaign){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.showDashboard=!1,$scope.loading=!0;var ui={title:"Dashboard",hasMenuIcon:!0,hasDeleteIcon:!1,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,hasCustomHomeClass:!1,searching:!1},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token},actions={success:function(stats){$scope.loading=!1,$scope.dashboardItems=stats,$scope.dashboardItems.length&&($scope.showDashboard=!0),angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface},error:function(){angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.loading=!1}};Campaign.stats(credentials,actions)}function DashboardDetailsController($scope,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Campaign){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.campaignName="",$scope.getCampaignName=function(campaignId){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token},actions={success:function(stats){if(stats.length)for(var stat,i=0;stat=stats[i++];)stat.id==campaignId&&($scope.campaignName=stat.name)}};Campaign.stats(credentials,actions)},$scope.getCampaignName($stateParams.dashboardId),$scope.showDashboardDetails=!1,$scope.loading=!0;var ui={title:$scope.campaignName,hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,hasCustomHomeClass:!1,searching:!1},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,campaign_id:$stateParams.dashboardId},actions={success:function(statDetails){$scope.loading=!1,$scope.dashboardDetailItems=statDetails,$scope.dashboardDetailItems.length&&($scope.showDashboardDetails=!0),angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface}};Campaign.statDetails(credentials,actions)}angular.module("brandscopicApp",["ui.router","snap","angular-flip","ngResource","ngAnimate","ngTouch","brandscopicApp.filters","brandscopicApp.services","brandscopicApp.services.permissions","brandscopicApp.constants","brandscopicApp.directives","brandscopicApp.controllers","brandscopicApp.animations","brandscopicApp.debounce","brandscopicApp.sharedDirectives","brandscopicApp.eventDirectives","brandscopicApp.eventService","brandscopicApp.photosService","brandscopicApp.surveysService","brandscopicApp.venueService","ui.bootstrap","ngMap","model.photos","persistence.photos","model.surveys","persistence.surveys","infinite-scroll","ngStorage"]).config(function($stateProvider,$urlRouterProvider){$urlRouterProvider.otherwise("/login"),$stateProvider.state("login",{url:"/login",templateUrl:"partials/login.html",controller:"LoginController"}).state("home",{url:"/home",templateUrl:"views/home.html",controller:"homeCtrl"}).state("home.companies",{url:"/companies",views:{"details@home":{templateUrl:"views/companies/companies.html",controller:"CompaniesController"}},data:{shouldRememberInHistory:!0}}).state("home.companies.select",{url:"/select",views:{"details@home":{templateUrl:"views/companies/companies_select.html",controller:"CompaniesController"}}}).state("home.dashboard",{url:"/dashboard",views:{"details@home":{templateUrl:"views/dashboard/dashboard.html",controller:"DashboardController"}},data:{shouldRememberInHistory:!0}}).state("home.dashboard.details",{url:"/:dashboardId",views:{"details@home":{templateUrl:"views/dashboard/dashboard_details.html",controller:"DashboardDetailsController"}},data:{shouldRememberInHistory:!0}}).state("home.events",{url:"/events?filter",views:{"details@home":{templateUrl:"views/events/events.html",controller:"eventsCtrl"}},data:{shouldRememberInHistory:!0},reloadOnSearch:!1}).state("home.events.add",{url:"/add",views:{"details@home":{templateUrl:"views/events/events_add.html",controller:"eventsAddCtrl"}},data:{shouldRememberInHistory:!1,parentShouldBeRemembered:!0}}).state("home.events.details",{url:"/:eventId",views:{"details@home":{templateUrl:"views/events/events_details.html",controller:"EventsDetailsController"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.edit",{url:"/edit",views:{"details@home":{templateUrl:"views/events/events_edit.html",controller:"EventsEditController"}},data:{specificParent:"home.events.details.about",shouldRememberInHistory:!1,parentShouldBeRemembered:!0}}).state("home.events.details.about",{url:"/about",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_about.html",controller:"EventsAboutController"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.map",{url:"/map",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_about_map.html",controller:"EventsAboutMapController"}},data:{shouldRememberInHistory:!1,specificParent:"home.events.details.about"}}).state("home.events.details.people",{url:"/people",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_people.html",controller:"EventsPeopleController"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.people.contacts",{url:"/contacts","abstract":!0,data:{shouldRememberInHistory:!1}}).state("home.events.details.people.contacts.view",{url:"/:contactId/view",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_people_contacts.html",controller:"EventsPeopleContactsController"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.people.contacts.add",{url:"/add",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_people_contacts_add.html",controller:"EventsPeopleContactsAddController"}},data:{specificParent:"home.events.details.people",shouldRememberInHistory:!1,parentShouldBeRemembered:!0}}).state("home.events.details.people.contacts.edit",{url:"/:contactId/edit",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_people_contacts_edit.html",controller:"EventsPeopleContactsEditController"}},data:{specificParent:"home.events.details.people",shouldRememberInHistory:!1,parentShouldBeRemembered:!0}}).state("home.events.details.people.contacts.new",{url:"/new",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_people_contacts_new.html",controller:"EventsPeopleContactsNewController"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.people.team",{url:"/team","abstract":!0,data:{shouldRememberInHistory:!1}}).state("home.events.details.people.team.add",{url:"/add",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_people_team_add.html",controller:"EventsPeopleTeamAddController"}},data:{specificParent:"home.events.details.people",shouldRememberInHistory:!1,parentShouldBeRemembered:!0}}).state("home.events.details.data",{url:"/data?edit",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_data.html",controller:"EventsDataController"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.data.view",{url:"/view",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_data_view.html",controller:"EventsDataViewController"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.comments",{url:"/comments",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_comments.html",controller:"EventsCommentsController"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.comments.add",{url:"/add",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_comments_add.html",controller:"EventsCommentsAddController"}},data:{shouldRememberInHistory:!1,parentShouldBeRemembered:!0}}).state("home.events.details.tasks",{url:"/tasks",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_tasks.html",controller:"EventsTasksController"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.tasks.details",{url:"/:taskId/details",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_tasks_details.html",controller:"EventsTasksDetailsController"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.tasks.details.edit",{url:"/edit",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_tasks_details_edit.html",controller:"EventsTasksEditController"}},data:{shouldRememberInHistory:!1,parentShouldBeRemembered:!0}}).state("home.events.details.photos",{url:"/photos",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_photos.html",controller:"eventsPhotosCtrl"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.photos.slider",{url:"/slider/{index:.*}",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_photos_slider.html",controller:"EventsPhotoSliderController"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.expenses",{url:"/expenses",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_expenses.html",controller:"EventsExpensesController"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.expenses.add",{url:"/add",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_expenses_add.html",controller:"EventsExpensesAddController"}},data:{shouldRememberInHistory:!1,parentShouldBeRemembered:!0}}).state("home.events.details.expenses.photo",{url:"/:expenseId/photo",views:{"eventsDetail@home.events.details":{templateUrl:"views/events/events_details_expenses_photo.html",controller:"EventsExpensesPhotoController"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.surveys",{url:"/surveys",views:{"eventsDetail@home.events.details":{templateUrl:"views/surveys/events_details_surveys.html",controller:"eventsSurveysController"}},data:{shouldRememberInHistory:!1}}).state("home.events.details.surveys.add",{url:"/add",views:{"eventsDetail@home.events.details":{templateUrl:"views/surveys/events_details_surveys_add.html",controller:"eventsSurveysAddController"}},data:{shouldRememberInHistory:!1,parentShouldBeRemembered:!0}}).state("home.events.details.surveys.edit",{url:"/:surveyId/edit",views:{"eventsDetail@home.events.details":{templateUrl:"views/surveys/events_details_surveys_add.html",controller:"eventsSurveysEditController"}},data:{shouldRememberInHistory:!1,parentShouldBeRemembered:!0}}).state("home.tasks",{url:"/tasks",views:{"details@home":{templateUrl:"partials/tasks.html",controller:"TasksController"}}}).state("home.venues",{url:"/venues",views:{"details@home":{templateUrl:"views/venues/venues.html",controller:"VenuesController"}},data:{shouldRememberInHistory:!0}}).state("home.venues.add",{url:"/add",views:{"details@home":{templateUrl:"views/venues/venues_add.html",controller:"VenuesAddController"}},data:{shouldRememberInHistory:!1,parentShouldBeRemembered:!0}}).state("home.venues.details",{url:"/:venueId",views:{"details@home":{templateUrl:"views/venues/venues_details.html",controller:"VenuesDetailsController"}},data:{shouldRememberInHistory:!1}}).state("home.venues.details.about",{url:"/about",views:{"venuesDetail@home.venues.details":{templateUrl:"views/venues/venues_details_about.html",controller:"VenuesAboutController"}},data:{shouldRememberInHistory:!1}}).state("home.venues.details.map",{url:"/map",views:{"venuesDetail@home.venues.details":{templateUrl:"views/venues/venues_details_about_map.html",controller:"VenuesAboutMapController"}},data:{shouldRememberInHistory:!1,specificParent:"home.venues.details.about"}}).state("home.venues.details.analysis",{url:"/analysis",views:{"venuesDetail@home.venues.details":{templateUrl:"views/venues/venues_details_analysis.html",controller:"VenuesAnalysisController"}},data:{shouldRememberInHistory:!1}}).state("home.venues.details.photos",{url:"/photos",views:{"venuesDetail@home.venues.details":{templateUrl:"views/venues/venues_details_photos.html",controller:"VenuesPhotosController"}},data:{shouldRememberInHistory:!1}}).state("home.venues.details.photos.slider",{url:"/slider/{index:.*}",views:{"venuesDetail@home.venues.details":{templateUrl:"views/venues/venues_details_photos_slider.html",controller:"VenuesPhotoSliderController"}},data:{shouldRememberInHistory:!1}}).state("home.venues.details.comments",{url:"/comments",views:{"venuesDetail@home.venues.details":{templateUrl:"views/venues/venues_details_comments.html",controller:"VenuesCommentsController"}},data:{shouldRememberInHistory:!1}}).state("home.notifications",{url:"/notifications",views:{"details@home":{templateUrl:"partials/notifications.html",controller:"NotificationsController"}},data:{shouldRememberInHistory:!0}}).state("home.profile",{url:"/profile",views:{"details@home":{templateUrl:"partials/edit_profile.html",controller:"ProfileController"}},data:{shouldRememberInHistory:!0}}).state("home.forbidden",{url:"/forbidden_area",views:{"details@home":{templateUrl:"views/forbidden.html",controller:"ForbiddenController"}}})}).config(["$httpProvider",function($httpProvider){$httpProvider.defaults.useXDomain=!0,delete $httpProvider.defaults.headers.common["X-Requested-With"]}]).run(["$rootScope",function($rootScope){$rootScope.alert=function(text){alert(text)},scopic.injectConst($rootScope)}]),angular.module("brandscopicApp.services.permissions",["brandscopicApp.services"]),angular.module("brandscopicApp.constants",[]).service("ApiParams",function(){var url="http://stage.brandscopic.com/api/v1",port="";this.baseUrl=url+(""!=port?":"+port:"")}),angular.module("brandscopicApp.services",["ngResource","ngCookies","model.user","model.session","brandscopicApp.constants"]).service("UserService",["SessionService","CompanyService","User",function(SessionService,CompanyService,User){this.currentUser={isLogged:!1,email:"",auth_token:"",current_company_id:0,permissions:{}},this.isLogged=function(){var sessionData=SessionService.get("sessionData");return null!=sessionData},this.setUserPermissions=function(authToken,companyId){var credentials={company_id:companyId,auth_token:authToken},actions={success:function(permissions){return permissions}};User.permissions(credentials,actions)},this.permissionIsValid=function(permission){var canDo=!1;if(this.currentUser.permissions&&permission)for(var item,i=0;item=this.currentUser.permissions[i++];)if(item==permission){canDo=!0;break}return canDo}}]).service("CompanyService",function(){this.currentCompany={id:0,name:"[Choose Company]"},this.getCompanyId=function(){return this.currentCompany.id}}).service("UserInterface",function(){this.Title="",this.hasMagnifierIcon=!1,this.hasAddIcon=!1,this.hasSaveIcon=!1,this.hasEditSurveyIcon=!1,this.hasCancelIcon=!1,this.hasMenuIcon=!0,this.hasDeleteIcon=!1,this.hasBackIcon=!1,this.hasCloseIcon=!1,this.searching=!1,this.AddIconState="",this.CloseState="",this.eventSubNav="",this.venueSubNav="",this.actionSave="",this.showEventSubNav=!0,this.showVenueSubNav=!0,this.hasCustomHomeClass=!1,this.EditIconUrl="",this.noData=!1,this.hasAddPhoto=!1}).service("LoginManager",["SessionService","UserService","CompanyService","Session","User",function(SessionService,UserService,CompanyService,Session){this.login=function(authToken,email,currentCompanyId,currentCompanyName,permissions){UserService.currentUser.auth_token=authToken,UserService.currentUser.email=email,UserService.currentUser.permissions=permissions,CompanyService.currentCompany.id=currentCompanyId,CompanyService.currentCompany.name=currentCompanyName;var sessionData=new SessionData(authToken,email,currentCompanyId,currentCompanyName,permissions);SessionService.put("sessionData",sessionData)},this.saveSession=function(loginData){SessionService.put("sessionData",loginData)},this.getCurrentSession=function(){return SessionService.get("sessionData")},this.initializeSystem=function(){if(!this.isLogged())return!1;var loginData=SessionService.get("sessionData");UserService.currentUser.auth_token=loginData.authToken,UserService.currentUser.email=loginData.email,UserService.currentUser.permissions=loginData.currentPermissions,CompanyService.currentCompany.id=loginData.currentCompanyId,CompanyService.currentCompany.name=loginData.currentCompanyName},this.logout=function(authToken,loggedOutCallback,errorLoggingOutCallback){var credentials={id:authToken},actions={success:function(){UserService.currentUser.auth_token="",UserService.currentUser.isLogged=!1,UserService.currentUser.email="",SessionService.remove("sessionData"),null!=loggedOutCallback&&loggedOutCallback()},error:function(){return UserService.currentUser.auth_token="",UserService.currentUser.isLogged=!1,UserService.currentUser.email="",SessionService.remove("sessionData"),null!=errorLoggingOut&&errorLoggingOutCallback(response),!1}};Session.logout(credentials,actions),UserService.currentUser.auth_token="",UserService.currentUser.isLogged=!1,UserService.currentUser.email="",SessionService.remove("sessionData"),null!=loggedOutCallback&&loggedOutCallback()},this.isLogged=function(){return null!=SessionService.get("sessionData")}}]).service("PermissionsHandler",["$state","UserService",function($state,UserService){this.handlePermissions=function(permissions){angular.forEach(permissions,function(permission){UserService.permissionIsValid(permission)||$state.go("home.forbidden")})}}]).value("version","0.1").value("loginPage","/login"),angular.module("brandscopicApp.controllers",["model.event","model.campaign","model.expense","model.comment","model.eventContact","model.eventTeam","model.contact","model.country","model.venue","highcharts-ng","model.notification","model.company","model.session"]).controller("MainController",["$scope","UserService","SessionService",function($scope,UserService){$scope.UserService=UserService,$scope.trigger=function(event,payload){$scope.$broadcast(event,payload)}}]).controller("LoginController",["$scope","$state","UserService","CompanyService","Company","User","SessionService","LoginManager","Session",function($scope,$state,UserService,CompanyService,Company,User,SessionService,LoginManager,Session){return LoginManager.isLogged()?void $state.go("home.dashboard"):($scope.shouldKeepLoggedIn=!1,$scope.user={email:"",password:""},$scope.wrongUser=null,$scope.validateApiUser=function(){var credentials={email:$scope.user.email,password:$scope.user.password},actions={success:function(login){$scope.wrongUser=!1;var authToken=login.data.auth_token,currentCompanyId=login.data.current_company_id,credentials={auth_token:authToken},action={success:function(companies){var credentials={company_id:currentCompanyId,auth_token:authToken},actions={success:function(permissions){UserService.currentUser.permissions=permissions;for(var company,i=0;company=companies[i++];)if(company.id==currentCompanyId){CompanyService.currentCompany.id=company.id,CompanyService.currentCompany.name=company.name,LoginManager.login(login.data.auth_token,$scope.user.email,company.id,company.name,permissions),$state.go("home.dashboard");break}}};User.permissions(credentials,actions)}};Company.all(credentials,action)},error:function(){$scope.wrongUser=!0,UserService.currentUser.auth_token="",UserService.currentUser.isLogged=!1,UserService.currentUser.email=""}};Session.login(credentials,actions)},$scope.forgotPassword=function(email){var credentials={email:email},actions={success:function(){UserService.currentUser.isLogged=!1,UserService.currentUser.email="",$state.go("login")},error:function(){$scope.wrongUser=!0,UserService.currentUser.auth_token="",UserService.currentUser.isLogged=!1,UserService.currentUser.email=""}};User.forgotPassword(credentials,actions)},$scope.handleKeepMeLoggedInClicked=function(value){var storageType=value?"local":"session";SessionService.setStorageType(storageType)},$scope.keyUpClear=function(){this.nextSibiling.className=this.value.length?"type-reset hidden":"type-reset"},$scope.keyDownClear=function(){this.value="",this.netxSibiling.className="type-reset"},$scope.clickClear=function(){this.className="type-reset hidden",this.previousSibiling.value=""},$scope.handleKeepMeLoggedInClicked($scope.shouldKeepLoggedIn),void $scope.$watch("user.email",function(){$scope.wrongUser=!1}))}]),angular.module("brandscopicApp.filters",[]).filter("interpolate",["version",function(version){return function(text){return String(text).replace(/\%VERSION\%/gm,version)}}]).filter("totalCount",function(){return function(input){if(input>1e3){var result=(input/1e3).toFixed(1).toString()+"K";return result}return input}}).filter("validatePermissions",function(){return function(array){if(null==array)return[];for(var filteredMembers=[],i=0;i<array.length;i++)array[i].visible!==!1&&filteredMembers.push(array[i]);return filteredMembers}}).filter("timeago",function(){return function(time,local,raw){if(!time)return"never";if(local||(local=Date.now()),angular.isDate(time)?time=time.getTime():"string"==typeof time&&(time=new Date(time).getTime()),angular.isDate(local)?local=local.getTime():"string"==typeof local&&(local=new Date(local).getTime()),"number"==typeof time&&"number"==typeof local){var offset=Math.abs((local-time)/1e3),span=[],MINUTE=60,HOUR=3600,DAY=86400,WEEK=604800,YEAR=31556926,DECADE=315569260;return span=MINUTE>=offset?["",raw?"now":"less than a minute"]:60*MINUTE>offset?[Math.round(Math.abs(offset/MINUTE)),"min"]:24*HOUR>offset?[Math.round(Math.abs(offset/HOUR)),"hour"]:7*DAY>offset?[Math.round(Math.abs(offset/DAY)),"day"]:52*WEEK>offset?[Math.round(Math.abs(offset/WEEK)),"week"]:10*YEAR>offset?[Math.round(Math.abs(offset/YEAR)),"year"]:100*DECADE>offset?[Math.round(Math.abs(offset/DECADE)),"decade"]:["","a long time"],span[1]+=0===span[0]||span[0]>1?"s":"",span=span.join(" "),raw===!0?span:local>=time?span+" ago":"in "+span}}}).filter("eventDate",function(){return function(time){if(!time)return"";angular.isDate(time)?time=time.getTime():"string"==typeof time&&(time=new Date(time));var result="",local=new Date,tomorrow=new Date(local.getTime()+864e5),months=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],days=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"];return result=time.getDate()===local.getDate()&&time.getMonth()===local.getMonth()&&time.getFullYear()===local.getFullYear()?"TODAY":time.getDate()===tomorrow.getDate()&&time.getMonth()===tomorrow.getMonth()&&time.getFullYear()===tomorrow.getFullYear()?"TOMORROW":days[time.getDay()]+", "+months[time.getMonth()]+" "+time.getDate()+" "+time.getFullYear()}}).filter("groupBy",function(){return function(list,group_by){var filtered=[],prev_item=null,group_changed=!1,firstOfGroup=group_by+"_CHANGED",lastOfGroup=group_by+"_LAST_OF_GROUP";return angular.forEach(list,function(item){group_changed=!1,null!==prev_item?prev_item[group_by]!==item[group_by]&&(group_changed=!0):group_changed=!0,group_changed?(item[firstOfGroup]=!0,null!==prev_item&&(prev_item[lastOfGroup]=!0)):item[firstOfGroup]=!1,filtered.push(item),prev_item=item}),filtered.length>0&&(filtered[filtered.length-1].lastOfGroup=!0),filtered}}).filter("limitWords",function(){return function(input,length){if(input){if(null===length)return input;var words=input.split(" "),sliceLength=words.length<length?words.length:length,slicedWords=words.slice(0,sliceLength);return slicedWords.join(" ")}}}).filter("allowedNotifications",["UserService",function(UserService){function notificationShouldBeShown(notification){if(null==neededPermissionsMap[notification.type])return!0;for(var neededPermissions=neededPermissionsMap[notification.type],showNotification=!0,i=0;i<neededPermissions.length&&(showNotification=UserService.permissionIsValid(neededPermissions[i]),showNotification);i++);return showNotification}var neededPermissionsMap={event_recaps_due:["events"],event_recaps_late:["events"],event_recaps_pending:["events"],event_recaps_rejected:["events"],new_event:["events","events_show"]};return function(notifications){if(null!=notifications){for(var filteredNotifications=[],i=0;i<notifications.length;i++)notificationShouldBeShown(notifications[i])&&filteredNotifications.push(notifications[i]);return filteredNotifications}}}]),angular.module("brandscopicApp.directives",["brandscopicApp.services"]).directive("appVersion",["version",function(version){return function(scope,elm){elm.text(version)}}]).directive("passwordValidate",function(){return{require:"ngModel",link:function(scope,elm,attrs,ctrl){ctrl.$parsers.unshift(function(viewValue){return scope.pwdValidLength=viewValue&&viewValue.length>=8?"valid":void 0,scope.pwdHasLetter=viewValue&&/[A-z]/.test(viewValue)?"valid":void 0,scope.pwdHasNumber=viewValue&&/\d/.test(viewValue)?"valid":void 0,scope.pwdValidLength&&scope.pwdHasLetter&&scope.pwdHasNumber?(ctrl.$setValidity("pwd",!0),viewValue):void ctrl.$setValidity("pwd",!1)})}}}).directive("goTo",function($window){return{restrict:"A",link:function(scope){scope.goTo=function(path){$window.location.href=path}}}}).directive("stopEvent",function(){return{restrict:"A",link:function(_scope,$el,attr){$el.on(attr.stopEvent,function(e){e.stopPropagation()})}}}).directive("headerSaveAction",function(){return{restrict:"A",link:function(scope,$el,attr){scope.$eval(attr.save)?$el.on("click",function(){$("[data-trigger-on-header=save]").first().click()}):$el.on("click",function(){$("[data-trigger-on-header=edit]").first().click()})}}}).directive("headerBackAction",["$window","$state",function($window,$state){return{restrict:"A",link:function(scope,$el){$el.on("click",function(){if($state.$current.data&&$state.$current.data.specificParent)return void $state.go($state.$current.data.specificParent);for(var destinationState=$state.$current.parent;destinationState.parent&&$state.$current.data&&!$state.$current.data.parentShouldBeRemembered&&(!destinationState.data||!destinationState.data.shouldRememberInHistory);)destinationState=destinationState.parent;$state.go(destinationState)})}}}]).directive("whenScrolled",function(){return function(scope,elm,attr){var raw=elm[0];elm.bind("scroll",function(){raw.scrollTop+raw.offsetHeight>=raw.scrollHeight&&scope.$apply(attr.whenScrolled)})}}).directive("redirectTo",function($window){return function(scope,el){el.on("click",function(){$window.location.href=this.getAttribute("redirect-to")})}}).directive("redirectToState",function($state){return function(scope,el){el.on("click",function(){$state.go(this.getAttribute("redirect-to-state"))})}}).directive("inputReset",function(){return function(scope,el){el.on("keyup",function(){var isEmpty=!this.querySelector("input").value.length;null!=this.querySelector("a")&&(this.querySelector("a").className=isEmpty?"type-reset hidden":"type-reset")}),el.on("keydown",function(e){27==e.keyCode&&(this.querySelector("a").className="type-reset hidden",this.querySelector("input").value="")}),el.find("a").on("click",function(e){e.preventDefault(),this.className="type-reset hidden",this.parentElement.querySelector("input").value=""}),el.find("input").on("change",function(){var isEmpty=!this.value.length;null!=this.parentElement.querySelector("a")&&(this.parentElement.querySelector("a").className=isEmpty?"type-reset hidden":"type-reset")})}}).directive("needsPermissions",["UserService","$injector","$state","$timeout",function(UserService,$injector,$state,$timeout){return{restrict:"AE",link:function(scope,element,attrs){function handlePermissions(permissions,permissionsHandler){if(permissions instanceof Array)for(var i=0;i<permissions.length;i++){var permission=permissions[i];permissionsHandler(permission)}else if(null!==permissions&&"object"==typeof permissions)for(var key in permissions)permissionsHandler(key,permissions[key])}function doWork(){var permissionsServiceName=attrs.provider;if(null==permissionsServiceName)throw"The permissions directive lacks a provider";var permissionsService=$injector.get(permissionsServiceName);if(null==permissionsService)throw"The permissions provider could not be found";handlePermissions(permissionsService.pagePermissions,function(permission){return UserService.permissionIsValid(permission)?void 0:void $state.go("home.forbidden")}),handlePermissions(permissionsService.elementsVisiblePermissions,function(key,permissions){var elementsShouldBeVisible=!0;if(permissions instanceof Array){for(var i=0;i<permissions.length;i++)if(!UserService.permissionIsValid(permissions[i])){elementsShouldBeVisible=!1;break}}else elementsShouldBeVisible=permissions.customHandler();elementsShouldBeVisible||element.find(key).hide()}),handlePermissions(permissionsService.hyperlinksEnabledPermissions,function(key,permissions){var elementsShouldBeLinkable=!0;if(permissions instanceof Array){for(var i=0;i<permissions.length;i++)if(!UserService.permissionIsValid(permissions[i])){elementsShouldBeLinkable=!1;break}}else elementsShouldBeLinkable=permissions.customHandler();elementsShouldBeLinkable||element.find(key).off()}),scope.customPermissionsHandler&&scope.customPermissionsHandler()}if(scope.getObservableProperties)for(var propertiesToWatch=scope.getObservableProperties(),i=0;i<propertiesToWatch.length;i++)scope.$watch(propertiesToWatch[i],function(){doWork()},!0);$timeout(function(){doWork()},0)}}}]).directive("showPhoto",function(){return function(scope,$el){$el.on("change",function(e){var reader=new FileReader;reader.onload=function(e){document.querySelector(".fileUpload img.show-preview").src=e.target.result},reader.readAsDataURL(e.target.files[0])})}}).directive("loadingData",function(){return{restrict:"E",template:""}}).directive("onlyAcceptNumbers",function(){return{restrict:"A",link:function($scope,element){element.on("keydown",function(e){var key=e.keyCode||e.charCode;return key>=48&&57>=key})}}}),angular.module("brandscopicApp.animations",[]).animation(".slide-animation",function(){return{addClass:function(element,className,done){var scope=element.scope();if("ng-hide"==className){var finishPoint=element.parent().width();"right"!==scope.direction&&(finishPoint=-finishPoint),TweenMax.to(element,.5,{left:finishPoint,onComplete:done})}else done()},removeClass:function(element,className,done){var scope=element.scope();if("ng-hide"==className){element.removeClass("ng-hide");var startPoint=element.parent().width();"right"===scope.direction&&(startPoint=-startPoint),TweenMax.set(element,{left:startPoint}),TweenMax.to(element,.5,{left:0,onComplete:done})
}else done()}}}),angular.module("persistence.event",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("eventClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){var contentType={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"},contentTypeJson={Accept:"application/json","Content-Type":"application/json"};return $resource(ApiParams.baseUrl+"/events/:event_id.:format",{auth_token:"@token",format:"json",company_id:"@company_id",start_date:"@start_date",end_date:"@end_date"},{all:{method:"GET"},find:{method:"GET"},create:{method:"POST",headers:contentType,transformRequest:jsonToFormDataFor("event")},update:{method:"PUT",headers:contentType,transformRequest:jsonToFormDataFor("event")},updateResults:{method:"PUT",headers:contentTypeJson},search:{method:"GET",isArray:!0,url:ApiParams.baseUrl+"/events/autocomplete.:format",format:"json",auth_token:"@token",company_id:"@company_id",q:"@q"},filterEvents:{method:"GET",url:ApiParams.baseUrl+"/events.:format",format:"json",auth_token:"@token",company_id:"@company_id",campaign:"@campaign",place:"@place",user:"@user",brand:"@brand",brand_portfolio:"@brand_portfolio",venue:"@venue",event_status:"@event_status"},results:{method:"GET",isArray:!0,url:ApiParams.baseUrl+"/events/:event_id/results.:format"}})}]),angular.module("persistence.campaign",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("campaignClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){return $resource(ApiParams.baseUrl+"/campaigns/all.:format",{auth_token:"@token",format:"json",company_id:"@company_id"},{all:{method:"GET",isArray:!0},stats:{method:"GET",isArray:!0,url:ApiParams.baseUrl+"/campaigns/overall_stats.:format"},statDetails:{method:"GET",isArray:!0,url:ApiParams.baseUrl+"/campaigns/:campaign_id/stats.:format"}})}]),angular.module("persistence.expense",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("expenseClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){var contentType={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"};return $resource(ApiParams.baseUrl+"/events/:event_id/event_expenses.:format",{auth_token:"@token",format:"json",company_id:"@company_id",event_id:"@event_id"},{all:{method:"GET",isArray:!0},create:{method:"POST",headers:contentType,transformRequest:jsonToFormDataFor("event_expense",!0)}})}]),angular.module("persistence.comment",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("commentClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){var contentType={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"};return $resource(ApiParams.baseUrl+"/events/:event_id/comments.:format",{auth_token:"@token",format:"json",company_id:"@company_id",event_id:"@event_id"},{all:{method:"GET",isArray:!0},create:{method:"POST",headers:contentType,transformRequest:jsonToFormDataFor("comment")}})}]),angular.module("persistence.eventContact",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("eventContactClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){var contentType={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"};return $resource(ApiParams.baseUrl+"/events/:event_id/contacts.:format",{auth_token:"@token",format:"json",company_id:"@company_id"},{all:{method:"GET",isArray:!0},contacts:{method:"GET",isArray:!0,url:ApiParams.baseUrl+"/events/:event_id/assignable_contacts.:format"},create:{method:"POST",headers:contentType,transformRequest:jsonToFormDataFor("contact")},"delete":{method:"DELETE",headers:contentType,transformRequest:jsonToFormDataFor("contact")}})}]),angular.module("persistence.eventTeam",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("eventTeamClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){var contentType={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"};return $resource(ApiParams.baseUrl+"/events/:event_id/members.:format",{auth_token:"@token",format:"json",company_id:"@company_id"},{all:{method:"GET",isArray:!0},members:{method:"GET",isArray:!0,url:ApiParams.baseUrl+"/events/:event_id/assignable_members.:format"},create:{method:"POST",headers:contentType,transformRequest:jsonToFormDataFor("team")},"delete":{method:"DELETE",headers:contentType,transformRequest:jsonToFormDataFor("team")}})}]),angular.module("persistence.contact",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("contactClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){var contentType={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"};return $resource(ApiParams.baseUrl+"/contacts/:contact_id.:format",{auth_token:"@token",format:"json",company_id:"@company_id",contact_id:"@contact_id"},{all:{method:"GET",isArray:!0},find:{method:"GET"},create:{method:"POST",headers:contentType,transformRequest:jsonToFormDataFor("contact")},update:{method:"PUT",headers:contentType,transformRequest:jsonToFormDataFor("contact")}})}]),angular.module("persistence.country",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("countryClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){return $resource(ApiParams.baseUrl+"/countries/:country_id.:format",{auth_token:"@token",format:"json",country_id:"@country_id"},{all:{method:"GET",isArray:!0},states:{method:"GET",isArray:!0,url:ApiParams.baseUrl+"/countries/:country_id/states.:format"}})}]),angular.module("persistence.venue",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("venueClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){var contentType={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"};return $resource(ApiParams.baseUrl+"/venues/:venue_id.:format",{auth_token:"@token",format:"json",company_id:"@company_id",term:"@term"},{all:{method:"GET"},find:{method:"GET"},create:{method:"POST",headers:contentType,transformRequest:jsonToFormDataFor("venue")},search:{method:"GET",isArray:!0,url:ApiParams.baseUrl+"/venues/search.:format"},types:{method:"GET",isArray:!0,url:ApiParams.baseUrl+"/venues/types.:format"},analysis:{method:"GET",url:ApiParams.baseUrl+"/venues/:venue_id/analysis.:format"},comments:{method:"GET",isArray:!0,url:ApiParams.baseUrl+"/venues/:venue_id/comments.:format"},photos:{method:"GET",isArray:!0,url:ApiParams.baseUrl+"/venues/:venue_id/photos.:format"},filterVenues:{method:"GET",url:ApiParams.baseUrl+"/venues.:format",format:"json",auth_token:"@token",company_id:"@company_id",campaign:"@campaign",brand:"@brand",brand_portfolio:"@brand_portfolio",company_user:"@company_user",team:"@team",area:"@area",page:"@page"},venuesAutocomplete:{method:"GET",isArray:!0,url:ApiParams.baseUrl+"/venues/autocomplete.:format",format:"json",auth_token:"@token",company_id:"@company_id",q:"@q"}})}]),angular.module("persistence.photos",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("photosClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){var contentType={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"};return $resource(ApiParams.baseUrl+"/events/:event_id/photos/:photo_id.:format",{company_id:"@company_id",format:"json",auth_token:"@token"},{all:{method:"GET"},add:{method:"POST",headers:contentType,transformRequest:jsonToFormDataFor("comment")},form:{method:"GET",url:ApiParams.baseUrl+"/events/:event_id/photos/form.:format",company_id:"@company_id",format:"json",auth_token:"@token"},create:{method:"POST",headers:contentType,transformRequest:jsonToFormDataFor("attached_asset")}})}]),angular.module("persistence.surveys",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("surveysClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){var contentTypeJson={Accept:"application/json","Content-Type":"application/json"};return $resource(ApiParams.baseUrl+"/events/:event_id/surveys.:format",{auth_token:"@token",format:"json",company_id:"@company_id",event_id:"@event_id"},{all:{method:"GET",isArray:!0},create:{method:"POST",headers:contentTypeJson},update:{method:"PUT",headers:contentTypeJson,url:ApiParams.baseUrl+"/events/:event_id/surveys/:id.:format",auth_token:"@token",format:"json",company_id:"@company_id",event_id:"@event_id",id:"@survey_id"},detail:{method:"GET",url:ApiParams.baseUrl+"/events/:event_id/surveys/:id.:format",auth_token:"@token",format:"json",company_id:"@company_id",event_id:"@event_id",id:"@survey_id"},brands:{method:"GET",isArray:!0,url:ApiParams.baseUrl+"/events/:event_id/surveys/brands.:format",auth_token:"@token",format:"json",company_id:"@company_id",event_id:"@event_id"}})}]),angular.module("persistence.notification",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("notificationClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){return $resource(ApiParams.baseUrl+"/users/notifications.:format",{auth_token:"@token",format:"json",company_id:"@company_id"},{all:{method:"GET",isArray:!0}})}]),angular.module("persistence.user",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("userClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){return $resource(ApiParams.baseUrl+"/users/:action.:format",{auth_token:"@token",format:"json",country_id:"@country_id"},{permissions:{method:"GET",params:{action:"permissions"},isArray:!0},forgotPassword:{method:"POST",headers:{Accept:"application/json"},url:ApiParams.baseUrl+"/users/password/new_password.:format"}})}]),angular.module("persistence.company",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("companyClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){return $resource(ApiParams.baseUrl+"/companies/.:format",{auth_token:"@token",format:"json"},{all:{method:"GET",isArray:!0}})}]),angular.module("persistence.session",["ngResource","util.jsonToFormData","brandscopicApp.services"]).factory("sessionClient",["$resource","jsonToFormDataFor","ApiParams",function($resource,jsonToFormDataFor,ApiParams){return $resource(ApiParams.baseUrl+"/sessions.:format",{auth_token:"@token",format:"json"},{login:{method:"POST",headers:{Accept:"application/json"},params:{email:"@email",password:"@password"}},logout:{method:"DELETE",headers:{Accept:"application/json"},params:{id:"@token"}}})}]),angular.module("model.event",["persistence.event"]).service("Event",["eventClient",function(eventClient){var company_id,collection,filters,event,find=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions))throw"Wrong set of credentials";event&&event.id==credentials.event_id?actions.success(angular.copy(event)):eventClient.find(credentials,findResponse(actions))},findResponse=function(actions){return function(resp){event=resp,actions.success(angular.copy(event))}},create=function(credentials,actions,attributes){"auth_token"in credentials&&"company_id"in credentials&&"success"in actions&&Object.keys(attributes).length&&eventClient.create(credentials,attributes,createResponse(actions.success),createResponse(actions.error))},createResponse=function(action){return function(resp){"Active"==resp.status&&"id"in resp&&(event=resp,collection.push(event));var answer=resp.id?resp:resp.data;action&&action(angular.copy(answer))}},update=function(credentials,actions,attributes){"auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions&&Object.keys(attributes).length&&eventClient.update(credentials,attributes,updateResponse(actions.success),updateResponse(actions.error))},updateResponse=function(action){return function(resp){"Active"==resp.status&&(!event||event&&event.id==resp.id)&&(event=resp,collection=void 0);var answer=resp.id?resp:resp.data;action&&action(angular.copy(answer))}},updateResults=function(credentials,actions,attributes){"auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions&&Object.keys(attributes).length&&eventClient.updateResults(credentials,attributes,updateResultsResponse(actions.success),updateResultsResponse(actions.error))},updateResultsResponse=function(action){return function(resp){"Active"==resp.status&&(!event||event&&event.id==resp.id)&&(event=resp,collection=void 0);var answer=resp.id?resp:resp.data;action&&action(angular.copy(answer))}},all=function(credentials,actions,options){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";options&&"force"in options&&options.force?eventClient.all(credentials,allResponse(actions)):collection&&company_id==credentials.company_id?actions.success(collection,filters):(company_id=credentials.company_id,eventClient.all(credentials,allResponse(actions)))},allResponse=function(actions){return function(resp){if("results"in resp)if("page"in resp&&resp.page>1)collection=resp.results,actions.success(angular.copy(collection),angular.copy(filters),resp.page);else{if(!("facets"in resp&&"results"in resp))throw"facets or results missing on response";filters=parseFilters(resp.facets),collection=resp.results,actions.success(angular.copy(collection),angular.copy(filters),1)}}},results=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";company_id=credentials.company_id,eventClient.results(credentials,resultsResponse(actions))},resultsResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";actions.success(angular.copy(resp))}},parseFilters=function(facets){for(var facet,keyName="event status",i=0;facet=facets[i++];)if("label"in facet&&keyName==facet.label.toLowerCase()&&"items"in facet)return facet.items},search=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";company_id=credentials.company_id,eventClient.search(credentials,searchResponse(actions))},searchResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";actions.success(angular.copy(resp))}},can=function(can){if("actions"in event){for(var action,i=0;action=event.actions[i++];)if(can==action)return!0;return!1}},getAllowedActions=function(){var canDo={};if("actions"in event)for(var action,i=0;action=event.actions[i++];)canDo["can_"+action.replace(/ /g,"_")]=!0;return canDo},filterEvents=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";company_id=credentials.company_id,eventClient.filterEvents(credentials,filterEventsResponse(actions))},filterEventsResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";actions.success(angular.copy(resp))}};return{all:all,find:find,create:create,update:update,updateResults:updateResults,search:search,results:results,can:can,getAllowedActions:getAllowedActions,filterEvents:filterEvents}}]),angular.module("model.campaign",["persistence.campaign"]).service("Campaign",["campaignClient",function(campaignClient){var company_id,campaign_id,collection,stats,statDetails,all=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";collection&&company_id==credentials.company_id?actions.success(collection):(company_id=credentials.company_id,campaignClient.all(credentials,allResponse(actions)))},allResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";collection=resp,actions.success(angular.copy(collection))}},stats=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";stats&&company_id==credentials.company_id?actions.success(stats):(company_id=credentials.company_id,campaignClient.stats(credentials,statsResponse(actions)))},statsResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";stats=resp,actions.success(angular.copy(stats))}},statDetails=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"campaign_id"in credentials&&"success"in actions))throw"Wrong set of credentials";statDetails&&company_id==credentials.company_id&&campaign_id==credentials.campaign_id?actions.success(statDetails):(company_id=credentials.company_id,campaign_id=credentials.campaign_id,campaignClient.statDetails(credentials,statDetailsResponse(actions)))},statDetailsResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";statDetails=resp,actions.success(angular.copy(statDetails))}};return{all:all,stats:stats,statDetails:statDetails}}]),angular.module("model.expense",["persistence.expense"]).service("Expense",["expenseClient",function(expenseClient){var company_id,event_id,collection,expense,all=function(credentials,actions){"auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions&&(collection&&company_id==credentials.company_id&&event_id==credentials.event_id?actions.success(collection):(company_id=credentials.company_id,event_id=credentials.event_id,expenseClient.all(credentials,allResponse(actions))))},allResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";collection=resp,actions.success(angular.copy(collection))}},create=function(credentials,actions,attributes){"auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions&&Object.keys(attributes).length&&expenseClient.create(credentials,attributes,createResponse(actions.success),createResponse(actions.error))},createResponse=function(action){return function(resp){"id"in resp&&(expense=resp,collection=void 0);var answer=resp.id?resp:resp.data;action&&action(angular.copy(answer))}};return{all:all,create:create}}]),angular.module("model.comment",["persistence.comment"]).service("Comment",["commentClient",function(commentClient){var company_id,event_id,collection,comment,all=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions))throw"Wrong set of credentials";collection&&company_id==credentials.company_id&&event_id==credentials.event_id?actions.success(collection):(company_id=credentials.company_id,event_id=credentials.event_id,commentClient.all(credentials,allResponse(actions)))},allResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";collection=resp,actions.success(angular.copy(collection))}},create=function(credentials,actions,attributes){"auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions&&Object.keys(attributes).length&&commentClient.create(credentials,attributes,createResponse(actions.success),createResponse(actions.error))},createResponse=function(action){return function(resp){"id"in resp&&(comment=resp,collection=void 0);var answer=resp.id?resp:resp.data;action&&action(angular.copy(answer))}};return{all:all,create:create}}]),angular.module("model.eventContact",["persistence.eventContact"]).service("EventContact",["eventContactClient",function(eventContactClient){var company_id,collection,contact,contacts=function(credentials,actions,options){if(!("auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions))throw"Wrong set of credentials";options&&"force"in options&&options.force?eventContactClient.contacts(credentials,contactsResponse(actions)):contact&&contact.id==credentials.event_id?actions.success(angular.copy(contact)):eventContactClient.contacts(credentials,contactsResponse(actions))},contactsResponse=function(actions){return function(resp){contact=resp,actions.success(angular.copy(contact))}},create=function(credentials,actions,attributes){"auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions&&Object.keys(attributes).length&&eventContactClient.create(credentials,attributes,createResponse(actions.success),createResponse(actions.error))},createResponse=function(action){return function(resp){"id"in resp?(contact=resp,collection.push(contact)):collection=void 0;var answer=resp.id?resp:resp.data;action&&action(angular.copy(answer))}},remove=function(credentials,actions,attributes){"auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions&&Object.keys(attributes).length&&eventContactClient.delete(credentials,attributes,deleteResponse(actions.success),deleteResponse(actions.error))},deleteResponse=function(action){return function(resp){contact=resp,collection=void 0;var answer=resp.id?resp:resp.data;action&&action(angular.copy(answer))}},all=function(credentials,actions,options){if(!("auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions))throw"Wrong set of credentials";options&&"force"in options&&options.force?(company_id=credentials.company_id,eventContactClient.all(credentials,allResponse(actions))):collection&&company_id==credentials.company_id?actions.success(collection):(company_id=credentials.company_id,eventContactClient.all(credentials,allResponse(actions)))},allResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";collection=resp,actions.success(angular.copy(collection))}};return{all:all,contacts:contacts,create:create,"delete":remove}}]),angular.module("model.eventTeam",["persistence.eventTeam"]).service("EventTeam",["eventTeamClient",function(eventTeamClient){var company_id,collection,team,members=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions))throw"Wrong set of credentials";team&&team.id==credentials.event_id?actions.success(angular.copy(team)):eventTeamClient.members(credentials,membersResponse(actions))},membersResponse=function(actions){return function(resp){team=resp,actions.success(angular.copy(team))}},create=function(credentials,actions,attributes){"auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions&&Object.keys(attributes).length&&eventTeamClient.create(credentials,attributes,createResponse(actions.success),createResponse(actions.error))},createResponse=function(action){return function(resp){"id"in resp?(team=resp,collection.push(team)):collection=void 0;var answer=resp.id?resp:resp.data;action&&action(angular.copy(answer))}},remove=function(credentials,actions,attributes){"auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions&&Object.keys(attributes).length&&eventTeamClient.delete(credentials,attributes,deleteResponse(actions.success),deleteResponse(actions.error))},deleteResponse=function(action){return function(resp){team=resp,collection=void 0;var answer=resp.id?resp:resp.data;action&&action(angular.copy(answer))}},all=function(credentials,actions,options){if(!("auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions))throw"Wrong set of credentials";options&&"force"in options&&options.force?eventTeamClient.all(credentials,allResponse(actions)):collection&&company_id==credentials.company_id?actions.success(collection):(company_id=credentials.company_id,eventTeamClient.all(credentials,allResponse(actions)))},allResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";collection=resp,actions.success(angular.copy(collection))}};return{all:all,members:members,create:create,"delete":remove}}]),angular.module("model.contact",["persistence.contact"]).service("Contact",["contactClient",function(contactClient){var company_id,contact_id,collection,contact,all=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"contact_id"in credentials&&"success"in actions))throw"Wrong set of credentials";collection&&company_id==credentials.company_id&&contact_id==credentials.contact_id?actions.success(collection):(company_id=credentials.company_id,contact_id=credentials.contact_id,contactClient.all(credentials,allResponse(actions)))},allResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";collection=resp,actions.success(angular.copy(collection))}},find=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"contact_id"in credentials&&"success"in actions))throw"Wrong set of credentials";contact&&contact.id==credentials.contact_id?actions.success(angular.copy(contact)):contactClient.find(credentials,findResponse(actions))},findResponse=function(actions){return function(resp){contact=resp,actions.success(angular.copy(contact))}},create=function(credentials,actions,attributes){"auth_token"in credentials&&"company_id"in credentials&&"success"in actions&&Object.keys(attributes).length&&contactClient.create(credentials,attributes,createResponse(actions.success),createResponse(actions.error))},createResponse=function(action){return function(resp){"id"in resp&&(contact=resp,collection=void 0);var answer=resp.id?resp:resp.data;action&&action(angular.copy(answer))}},update=function(credentials,actions,attributes){"auth_token"in credentials&&"company_id"in credentials&&"contact_id"in credentials&&"success"in actions&&Object.keys(attributes).length&&contactClient.update(credentials,attributes,updateResponse(actions.success),updateResponse(actions.error))},updateResponse=function(action){return function(resp){"Active"==resp.status&&(!contact||contact&&contact.id==resp.id)&&(contact=resp,collection=void 0);var answer=resp.id?resp:resp.data;action&&action(angular.copy(answer))}};return{all:all,find:find,create:create,update:update}}]),angular.module("model.country",["persistence.country"]).service("Country",["countryClient",function(countryClient){var country_id,collection,states,all=function(credentials,actions){if(!("auth_token"in credentials&&"success"in actions))throw"Wrong set of credentials";collection?actions.success(collection):countryClient.all(credentials,allResponse(actions))},allResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";collection=resp,actions.success(angular.copy(collection))}},states=function(credentials,actions){if(!("auth_token"in credentials&&"country_id"in credentials&&"success"in actions))throw"Wrong set of credentials";states&&country_id==credentials.country_id?actions.success(angular.copy(states)):(country_id=credentials.country_id,countryClient.states(credentials,statesResponse(actions)))},statesResponse=function(actions){return function(resp){states=resp,actions.success(angular.copy(states))}};return{all:all,states:states}}]),angular.module("model.venue",["persistence.venue"]).service("Venue",["venueClient",function(venueClient){var company_id,collection,filters,venue,all=function(credentials,actions,options){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";options&&"force"in options&&options.force?venueClient.all(credentials,allResponse(actions)):collection&&company_id==credentials.company_id?actions.success(collection):(company_id=credentials.company_id,venueClient.all(credentials,allResponse(actions)))},allResponse=function(actions){return function(resp){if("results"in resp)if("page"in resp.results&&resp.results.page>1)collection=resp.results,actions.success(angular.copy(collection),angular.copy(filters));else{if(!("facets"in resp&&"results"in resp))throw"facets or results missing on response";filters=resp.facets,collection=resp.results,actions.success(angular.copy(collection),angular.copy(filters))}}},find=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"venue_id"in credentials&&"success"in actions))throw"Wrong set of credentials";venue&&venue.id==credentials.venue_id?actions.success(angular.copy(venue)):venueClient.find(credentials,findResponse(actions))},findResponse=function(actions){return function(resp){venue=resp,actions.success(angular.copy(venue))}},create=function(credentials,actions,attributes){console.log(attributes),"auth_token"in credentials&&"company_id"in credentials&&"success"in actions&&Object.keys(attributes).length&&venueClient.create(credentials,attributes,createResponse(actions.success),createResponse(actions.error))},createResponse=function(action){return function(resp){"id"in resp&&(venue=resp,collection.push(venue));var answer=resp.id?resp:resp.data;action&&action(angular.copy(answer))}},search=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";company_id=credentials.company_id,venueClient.search(credentials,searchResponse(actions))},searchResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";actions.success(angular.copy(resp))}},types=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";company_id=credentials.company_id,venueClient.types(credentials,typesResponse(actions))},typesResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";actions.success(angular.copy(resp))}},analysis=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"venue_id"in credentials&&"success"in actions))throw"Wrong set of credentials";venueClient.analysis(credentials,analysisResponse(actions))},analysisResponse=function(actions){return function(resp){venue=resp,actions.success(angular.copy(venue))}},comments=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"venue_id"in credentials&&"success"in actions))throw"Wrong set of credentials";venueClient.comments(credentials,commentsResponse(actions))},commentsResponse=function(actions){return function(resp){venue=resp,actions.success(angular.copy(venue))}},photos=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"venue_id"in credentials&&"success"in actions))throw"Wrong set of credentials";venueClient.photos(credentials,photosResponse(actions))},photosResponse=function(actions){return function(resp){venue=resp,actions.success(angular.copy(venue))}},filterVenues=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";company_id=credentials.company_id,venueClient.filterVenues(credentials,filterVenuesResponse(actions))},filterVenuesResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";actions.success(angular.copy(resp))}},venuesAutocomplete=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";company_id=credentials.company_id,venueClient.venuesAutocomplete(credentials,venuesAutocompleteResponse(actions))},venuesAutocompleteResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";actions.success(angular.copy(resp))
}};return{all:all,find:find,create:create,search:search,types:types,analysis:analysis,comments:comments,photos:photos,filterVenues:filterVenues,venuesAutocomplete:venuesAutocomplete}}]),angular.module("model.photos",["persistence.photos"]).service("Photos",["photosClient",function(photosClient){var company_id,create=function(credentials,actions,attributes){"auth_token"in credentials&&"company_id"in credentials&&"success"in actions&&Object.keys(attributes).length&&photosClient.create(credentials,attributes,createResponse(actions.success),createResponse(actions.error))},createResponse=function(action){return function(e){action&&action(e)}},form=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";company_id=credentials.company_id,photosClient.form(credentials,formResponse(actions))},formResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";actions.success(angular.copy(resp))}},all=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";company_id=credentials.company_id,photosClient.all(credentials,allResponse(actions))},allResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";actions.success(angular.copy(resp))}},add=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";company_id=credentials.company_id,photosClient.add(credentials,addResponse(actions))},addResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";actions.success(angular.copy(resp))}};return{all:all,add:add,form:form,create:create}}]),angular.module("model.surveys",["persistence.surveys"]).service("Surveys",["surveysClient",function(surveysClient){var company_id,event_id,collection,surveys,all=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions))throw"Wrong set of credentials";collection&&company_id==credentials.company_id&&event_id==credentials.event_id?actions.success(collection):(company_id=credentials.company_id,event_id=credentials.event_id,surveysClient.all(credentials,allResponse(actions)))},allResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";collection=resp,actions.success(angular.copy(collection))}},create=function(credentials,actions,attributes){"auth_token"in credentials&&"company_id"in credentials&&"event_id"in credentials&&"success"in actions&&Object.keys(attributes).length&&surveysClient.create(credentials,attributes,createResponse(actions.success),createResponse(actions.error))},createResponse=function(action){return function(resp){"id"in resp&&(surveys=resp,collection=void 0);var answer=resp.id?resp:resp.data;action&&action(angular.copy(answer))}},brands=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";company_id=credentials.company_id,surveysClient.brands(credentials,brandsResponse(actions))},brandsResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";actions.success(angular.copy(resp))}},update=function(credentials,actions,attributes){"auth_token"in credentials&&"company_id"in credentials&&"id"in credentials&&"success"in actions&&Object.keys(attributes).length&&surveysClient.update(credentials,attributes,updateResponse(actions.success),updateResponse(actions.error))},updateResponse=function(action){return function(resp){(!surveys||surveys&&surveys.id==resp.id)&&(surveys=resp,collection=void 0);var answer=resp.id?resp:resp.data;action&&action(angular.copy(answer))}},detail=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";company_id=credentials.company_id,surveysClient.detail(credentials,detailResponse(actions))},detailResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";actions.success(angular.copy(resp))}};return{all:all,brands:brands,create:create,detail:detail,update:update}}]),angular.module("model.notification",["persistence.notification"]).service("Notification",["notificationClient",function(notificationClient){var collection,all=function(credentials,actions,force){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";!force&&collection?actions.success(collection):notificationClient.all(credentials,allResponse(actions))},allResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";collection=resp,actions.success(angular.copy(collection))}},getNotificationClass=function(notification){return-1!=notification.type.indexOf("late")?"late":-1!=notification.type.indexOf("comments")?"approve":"event_recaps_pending"===notification.type?"submitted":""};return{all:all,getNotificationClass:getNotificationClass}}]),angular.module("model.user",["persistence.user"]).service("User",["userClient",function(userClient){var company_id,permissions,permissions=function(credentials,actions){if(!("auth_token"in credentials&&"company_id"in credentials&&"success"in actions))throw"Wrong set of credentials";permissions&&company_id==credentials.company_id?actions.success(permissions):userClient.permissions(credentials,permissionsResponse(actions))},permissionsResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";for(var action,item,permissions=[],i=0;action=resp[i++];){item="";for(var aux,j=0;aux=action[j++];)item+=aux;permissions.push(item)}actions.success(angular.copy(permissions))}},forgotPassword=function(credentials,actions){if(!("email"in credentials&&"success"in actions))throw"Wrong set of credentials";userClient.forgotPassword(credentials,forgotPasswordResponse(actions),forgotPasswordErrorResponse(actions))},forgotPasswordResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";actions.success(angular.copy(resp))}},forgotPasswordErrorResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";actions.error(angular.copy(resp))}};return{permissions:permissions,forgotPassword:forgotPassword}}]),angular.module("model.company",["persistence.company"]).service("Company",["companyClient",function(companyClient){var collection,all=function(credentials,actions){if(!("auth_token"in credentials&&"success"in actions))throw"Wrong set of credentials";collection?actions.success(collection):companyClient.all(credentials,allResponse(actions))},allResponse=function(actions){return function(resp){if(!resp.length)throw"results missing on response";collection=resp,actions.success(angular.copy(collection))}};return{all:all}}]),angular.module("model.session",["persistence.session"]).service("Session",["sessionClient",function(sessionClient){var login=function(credentials,actions){if(!("email"in credentials&&"password"in credentials&&"success"in actions))throw"Wrong set of credentials";sessionClient.login(credentials,loginResponse(actions),loginErrorResponse(actions))},loginResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";actions.success(angular.copy(resp))}},loginErrorResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";actions.error(angular.copy(resp))}},logout=function(credentials,actions){if(!("id"in credentials&&"success"in actions))throw"Wrong set of credentials";sessionClient.logout(credentials,logoutResponse(actions))},logoutResponse=function(actions){return function(resp){if(!resp)throw"results missing on response";actions.success(angular.copy(resp))}};return{login:login,logout:logout}}]),angular.module("util.jsonToFormData",[]).factory("jsonToFormDataFor",function(){return function(key_name,preserveInnerObjects){return function(data){var paramsProcessor=function(properties,key){var params=[];for(var prop in properties)if(properties.hasOwnProperty(prop)&&!/^\$/.test(prop)){var name=key?key+"["+prop+"]":"["+prop+"]",isObj=properties[prop]instanceof Object,value=isObj?paramsProcessor(properties[prop]):encodeURIComponent(properties[prop]);params.push([encodeURIComponent(name),value].join(isObj?"":"="))}return console.log("params jtoF: ",params),params.join("&")};for(attr in data)!preserveInnerObjects&&data[attr]instanceof Object&&delete data[attr];return"[object File]"!==String(data)?paramsProcessor(data,key_name):event}}}),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdownToggle","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/popup.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function($q,$timeout,$rootScope){function findEndEventName(endEventNames){for(var name in endEventNames)if(void 0!==transElement.style[name])return endEventNames[name]}var $transition=function(element,trigger,options){options=options||{};var deferred=$q.defer(),endEventName=$transition[options.animation?"animationEndEventName":"transitionEndEventName"],transitionEndHandler=function(){$rootScope.$apply(function(){element.unbind(endEventName,transitionEndHandler),deferred.resolve(element)})};return endEventName&&element.bind(endEventName,transitionEndHandler),$timeout(function(){angular.isString(trigger)?element.addClass(trigger):angular.isFunction(trigger)?trigger(element):angular.isObject(trigger)&&element.css(trigger),endEventName||deferred.resolve(element)}),deferred.promise.cancel=function(){endEventName&&element.unbind(endEventName,transitionEndHandler),deferred.reject("Transition cancelled")},deferred.promise},transElement=document.createElement("trans"),transitionEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},animationEndEventNames={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return $transition.transitionEndEventName=findEndEventName(transitionEndEventNames),$transition.animationEndEventName=findEndEventName(animationEndEventNames),$transition}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function($transition){return{link:function(scope,element,attrs){function doTransition(change){function newTransitionDone(){currentTransition===newTransition&&(currentTransition=void 0)}var newTransition=$transition(element,change);return currentTransition&&currentTransition.cancel(),currentTransition=newTransition,newTransition.then(newTransitionDone,newTransitionDone),newTransition}function expand(){initialAnimSkip?(initialAnimSkip=!1,expandDone()):(element.removeClass("collapse").addClass("collapsing"),doTransition({height:element[0].scrollHeight+"px"}).then(expandDone))}function expandDone(){element.removeClass("collapsing"),element.addClass("collapse in"),element.css({height:"auto"})}function collapse(){if(initialAnimSkip)initialAnimSkip=!1,collapseDone(),element.css({height:0});else{element.css({height:element[0].scrollHeight+"px"});{element[0].offsetWidth}element.removeClass("collapse in").addClass("collapsing"),doTransition({height:0}).then(collapseDone)}}function collapseDone(){element.removeClass("collapsing"),element.addClass("collapse")}var currentTransition,initialAnimSkip=!0;scope.$watch(attrs.collapse,function(shouldCollapse){shouldCollapse?collapse():expand()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function($scope,$attrs,accordionConfig){this.groups=[],this.closeOthers=function(openGroup){var closeOthers=angular.isDefined($attrs.closeOthers)?$scope.$eval($attrs.closeOthers):accordionConfig.closeOthers;closeOthers&&angular.forEach(this.groups,function(group){group!==openGroup&&(group.isOpen=!1)})},this.addGroup=function(groupScope){var that=this;this.groups.push(groupScope),groupScope.$on("$destroy",function(){that.removeGroup(groupScope)})},this.removeGroup=function(group){var index=this.groups.indexOf(group);-1!==index&&this.groups.splice(this.groups.indexOf(group),1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",["$parse",function($parse){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@"},controller:function(){this.setHeading=function(element){this.heading=element}},link:function(scope,element,attrs,accordionCtrl){var getIsOpen,setIsOpen;accordionCtrl.addGroup(scope),scope.isOpen=!1,attrs.isOpen&&(getIsOpen=$parse(attrs.isOpen),setIsOpen=getIsOpen.assign,scope.$parent.$watch(getIsOpen,function(value){scope.isOpen=!!value})),scope.$watch("isOpen",function(value){value&&accordionCtrl.closeOthers(scope),setIsOpen&&setIsOpen(scope.$parent,value)})}}}]).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",compile:function(element,attr,transclude){return function(scope,element,attr,accordionGroupCtrl){accordionGroupCtrl.setHeading(transclude(scope,function(){}))}}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(scope,element,attr,controller){scope.$watch(function(){return controller[attr.accordionTransclude]},function(heading){heading&&(element.html(""),element.append(heading))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function($scope,$attrs){$scope.closeable="close"in $attrs}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"=",close:"&"}}}),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(scope,element,attr){element.addClass("ng-binding").data("$binding",attr.bindHtmlUnsafe),scope.$watch(attr.bindHtmlUnsafe,function(value){element.html(value||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(buttonConfig){this.activeClass=buttonConfig.activeClass||"active",this.toggleEvent=buttonConfig.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,scope.$eval(attrs.btnRadio)))},element.bind(buttonsCtrl.toggleEvent,function(){element.hasClass(buttonsCtrl.activeClass)||scope.$apply(function(){ngModelCtrl.$setViewValue(scope.$eval(attrs.btnRadio)),ngModelCtrl.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(scope,element,attrs,ctrls){function getTrueValue(){return getCheckboxValue(attrs.btnCheckboxTrue,!0)}function getFalseValue(){return getCheckboxValue(attrs.btnCheckboxFalse,!1)}function getCheckboxValue(attributeValue,defaultValue){var val=scope.$eval(attributeValue);return angular.isDefined(val)?val:defaultValue}var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,getTrueValue()))},element.bind(buttonsCtrl.toggleEvent,function(){scope.$apply(function(){ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass)?getFalseValue():getTrueValue()),ngModelCtrl.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$transition","$q",function($scope,$timeout,$transition){function restartTimer(){resetTimer();var interval=+$scope.interval;!isNaN(interval)&&interval>=0&&(currentTimeout=$timeout(timerFn,interval))}function resetTimer(){currentTimeout&&($timeout.cancel(currentTimeout),currentTimeout=null)}function timerFn(){isPlaying?($scope.next(),restartTimer()):$scope.pause()}var currentTimeout,isPlaying,self=this,slides=self.slides=[],currentIndex=-1;self.currentSlide=null;var destroyed=!1;self.select=function(nextSlide,direction){function goNext(){if(!destroyed){if(self.currentSlide&&angular.isString(direction)&&!$scope.noTransition&&nextSlide.$element){nextSlide.$element.addClass(direction);{nextSlide.$element[0].offsetWidth}angular.forEach(slides,function(slide){angular.extend(slide,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(nextSlide,{direction:direction,active:!0,entering:!0}),angular.extend(self.currentSlide||{},{direction:direction,leaving:!0}),$scope.$currentTransition=$transition(nextSlide.$element,{}),function(next,current){$scope.$currentTransition.then(function(){transitionDone(next,current)},function(){transitionDone(next,current)})}(nextSlide,self.currentSlide)}else transitionDone(nextSlide,self.currentSlide);self.currentSlide=nextSlide,currentIndex=nextIndex,restartTimer()}}function transitionDone(next,current){angular.extend(next,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(current||{},{direction:"",active:!1,leaving:!1,entering:!1}),$scope.$currentTransition=null}var nextIndex=slides.indexOf(nextSlide);void 0===direction&&(direction=nextIndex>currentIndex?"next":"prev"),nextSlide&&nextSlide!==self.currentSlide&&($scope.$currentTransition?($scope.$currentTransition.cancel(),$timeout(goNext)):goNext())},$scope.$on("$destroy",function(){destroyed=!0}),self.indexOfSlide=function(slide){return slides.indexOf(slide)},$scope.next=function(){var newIndex=(currentIndex+1)%slides.length;return $scope.$currentTransition?void 0:self.select(slides[newIndex],"next")},$scope.prev=function(){var newIndex=0>currentIndex-1?slides.length-1:currentIndex-1;return $scope.$currentTransition?void 0:self.select(slides[newIndex],"prev")},$scope.select=function(slide){self.select(slide)},$scope.isActive=function(slide){return self.currentSlide===slide},$scope.slides=function(){return slides},$scope.$watch("interval",restartTimer),$scope.$on("$destroy",resetTimer),$scope.play=function(){isPlaying||(isPlaying=!0,restartTimer())},$scope.pause=function(){$scope.noPause||(isPlaying=!1,resetTimer())},self.addSlide=function(slide,element){slide.$element=element,slides.push(slide),1===slides.length||slide.active?(self.select(slides[slides.length-1]),1==slides.length&&$scope.play()):slide.active=!1},self.removeSlide=function(slide){var index=slides.indexOf(slide);slides.splice(index,1),slides.length>0&&slide.active?self.select(index>=slides.length?slides[index-1]:slides[index]):currentIndex>index&&currentIndex--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",["$parse",function($parse){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{},link:function(scope,element,attrs,carouselCtrl){if(attrs.active){var getActive=$parse(attrs.active),setActive=getActive.assign,lastValue=scope.active=getActive(scope.$parent);scope.$watch(function(){var parentActive=getActive(scope.$parent);return parentActive!==scope.active&&(parentActive!==lastValue?lastValue=scope.active=parentActive:setActive(scope.$parent,parentActive=lastValue=scope.active)),parentActive})}carouselCtrl.addSlide(scope,element),scope.$on("$destroy",function(){carouselCtrl.removeSlide(scope)}),scope.$watch("active",function(active){active&&carouselCtrl.select(scope)})}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function($document,$window){function getStyle(el,cssprop){return el.currentStyle?el.currentStyle[cssprop]:$window.getComputedStyle?$window.getComputedStyle(el)[cssprop]:el.style[cssprop]}function isStaticPositioned(element){return"static"===(getStyle(element,"position")||"static")}var parentOffsetEl=function(element){for(var docDomEl=$document[0],offsetParent=element.offsetParent||docDomEl;offsetParent&&offsetParent!==docDomEl&&isStaticPositioned(offsetParent);)offsetParent=offsetParent.offsetParent;return offsetParent||docDomEl};return{position:function(element){var elBCR=this.offset(element),offsetParentBCR={top:0,left:0},offsetParentEl=parentOffsetEl(element[0]);offsetParentEl!=$document[0]&&(offsetParentBCR=this.offset(angular.element(offsetParentEl)),offsetParentBCR.top+=offsetParentEl.clientTop-offsetParentEl.scrollTop,offsetParentBCR.left+=offsetParentEl.clientLeft-offsetParentEl.scrollLeft);var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:elBCR.top-offsetParentBCR.top,left:elBCR.left-offsetParentBCR.left}},offset:function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].body.scrollTop||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].body.scrollLeft||$document[0].documentElement.scrollLeft)}}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.position"]).constant("datepickerConfig",{dayFormat:"dd",monthFormat:"MMMM",yearFormat:"yyyy",dayHeaderFormat:"EEE",dayTitleFormat:"MMMM yyyy",monthTitleFormat:"yyyy",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","dateFilter","datepickerConfig",function($scope,$attrs,dateFilter,dtConfig){function getValue(value,defaultValue){return angular.isDefined(value)?$scope.$parent.$eval(value):defaultValue}function getDaysInMonth(year,month){return new Date(year,month,0).getDate()}function getDates(startDate,n){for(var dates=new Array(n),current=startDate,i=0;n>i;)dates[i++]=new Date(current),current.setDate(current.getDate()+1);return dates}function makeDate(date,format,isSelected,isSecondary){return{date:date,label:dateFilter(date,format),selected:!!isSelected,secondary:!!isSecondary}}var format={day:getValue($attrs.dayFormat,dtConfig.dayFormat),month:getValue($attrs.monthFormat,dtConfig.monthFormat),year:getValue($attrs.yearFormat,dtConfig.yearFormat),dayHeader:getValue($attrs.dayHeaderFormat,dtConfig.dayHeaderFormat),dayTitle:getValue($attrs.dayTitleFormat,dtConfig.dayTitleFormat),monthTitle:getValue($attrs.monthTitleFormat,dtConfig.monthTitleFormat)},startingDay=getValue($attrs.startingDay,dtConfig.startingDay),yearRange=getValue($attrs.yearRange,dtConfig.yearRange);this.minDate=dtConfig.minDate?new Date(dtConfig.minDate):null,this.maxDate=dtConfig.maxDate?new Date(dtConfig.maxDate):null,this.modes=[{name:"day",getVisibleDates:function(date,selected){var year=date.getFullYear(),month=date.getMonth(),firstDayOfMonth=new Date(year,month,1),difference=startingDay-firstDayOfMonth.getDay(),numDisplayedFromPreviousMonth=difference>0?7-difference:-difference,firstDate=new Date(firstDayOfMonth),numDates=0;numDisplayedFromPreviousMonth>0&&(firstDate.setDate(-numDisplayedFromPreviousMonth+1),numDates+=numDisplayedFromPreviousMonth),numDates+=getDaysInMonth(year,month+1),numDates+=(7-numDates%7)%7;for(var days=getDates(firstDate,numDates),labels=new Array(7),i=0;numDates>i;i++){var dt=new Date(days[i]);days[i]=makeDate(dt,format.day,selected&&selected.getDate()===dt.getDate()&&selected.getMonth()===dt.getMonth()&&selected.getFullYear()===dt.getFullYear(),dt.getMonth()!==month)}for(var j=0;7>j;j++)labels[j]=dateFilter(days[j].date,format.dayHeader);return{objects:days,title:dateFilter(date,format.dayTitle),labels:labels}},compare:function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth(),date1.getDate())-new Date(date2.getFullYear(),date2.getMonth(),date2.getDate())},split:7,step:{months:1}},{name:"month",getVisibleDates:function(date,selected){for(var months=new Array(12),year=date.getFullYear(),i=0;12>i;i++){var dt=new Date(year,i,1);months[i]=makeDate(dt,format.month,selected&&selected.getMonth()===i&&selected.getFullYear()===year)}return{objects:months,title:dateFilter(date,format.monthTitle)}},compare:function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth())-new Date(date2.getFullYear(),date2.getMonth())},split:3,step:{years:1}},{name:"year",getVisibleDates:function(date,selected){for(var years=new Array(yearRange),year=date.getFullYear(),startYear=parseInt((year-1)/yearRange,10)*yearRange+1,i=0;yearRange>i;i++){var dt=new Date(startYear+i,0,1);years[i]=makeDate(dt,format.year,selected&&selected.getFullYear()===dt.getFullYear())}return{objects:years,title:[years[0].label,years[yearRange-1].label].join(" - ")}},compare:function(date1,date2){return date1.getFullYear()-date2.getFullYear()},split:5,step:{years:yearRange}}],this.isDisabled=function(date,mode){var currentMode=this.modes[mode||0];return this.minDate&&currentMode.compare(date,this.minDate)<0||this.maxDate&&currentMode.compare(date,this.maxDate)>0||$scope.dateDisabled&&$scope.dateDisabled({date:date,mode:currentMode.name})}}]).directive("datepicker",["dateFilter","$parse","datepickerConfig","$log",function(dateFilter,$parse,datepickerConfig,$log){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(scope,element,attrs,ctrls){function updateShowWeekNumbers(){scope.showWeekNumbers=0===mode&&showWeeks}function split(arr,size){for(var arrays=[];arr.length>0;)arrays.push(arr.splice(0,size));return arrays}function refill(updateSelected){var date=null,valid=!0;ngModel.$modelValue&&(date=new Date(ngModel.$modelValue),isNaN(date)?(valid=!1,$log.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):updateSelected&&(selected=date)),ngModel.$setValidity("date",valid);var currentMode=datepickerCtrl.modes[mode],data=currentMode.getVisibleDates(selected,date);angular.forEach(data.objects,function(obj){obj.disabled=datepickerCtrl.isDisabled(obj.date,mode)}),ngModel.$setValidity("date-disabled",!date||!datepickerCtrl.isDisabled(date)),scope.rows=split(data.objects,currentMode.split),scope.labels=data.labels||[],scope.title=data.title}function setMode(value){mode=value,updateShowWeekNumbers(),refill()}function getISO8601WeekNumber(date){var checkDate=new Date(date);checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();return checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1}var datepickerCtrl=ctrls[0],ngModel=ctrls[1];if(ngModel){var mode=0,selected=new Date,showWeeks=datepickerConfig.showWeeks;attrs.showWeeks?scope.$parent.$watch($parse(attrs.showWeeks),function(value){showWeeks=!!value,updateShowWeekNumbers()}):updateShowWeekNumbers(),attrs.min&&scope.$parent.$watch($parse(attrs.min),function(value){datepickerCtrl.minDate=value?new Date(value):null,refill()}),attrs.max&&scope.$parent.$watch($parse(attrs.max),function(value){datepickerCtrl.maxDate=value?new Date(value):null,refill()}),ngModel.$render=function(){refill(!0)},scope.select=function(date){if(0===mode){var dt=ngModel.$modelValue?new Date(ngModel.$modelValue):new Date(0,0,0,0,0,0,0);dt.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()),ngModel.$setViewValue(dt),refill(!0)}else selected=date,setMode(mode-1)},scope.move=function(direction){var step=datepickerCtrl.modes[mode].step;selected.setMonth(selected.getMonth()+direction*(step.months||0)),selected.setFullYear(selected.getFullYear()+direction*(step.years||0)),refill()},scope.toggleMode=function(){setMode((mode+1)%datepickerCtrl.modes.length)},scope.getWeekNumber=function(row){return 0===mode&&scope.showWeekNumbers&&7===row.length?getISO8601WeekNumber(row[0].date):null}}}}}]).constant("datepickerPopupConfig",{dateFormat:"yyyy-MM-dd",currentText:"Today",toggleWeeksText:"Weeks",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","datepickerPopupConfig","datepickerConfig",function($compile,$parse,$document,$position,dateFilter,datepickerPopupConfig,datepickerConfig){return{restrict:"EA",require:"ngModel",link:function(originalScope,element,attrs,ngModel){function setOpen(value){setIsOpen?setIsOpen(originalScope,!!value):scope.isOpen=!!value}function parseDate(viewValue){if(viewValue){if(angular.isDate(viewValue))return ngModel.$setValidity("date",!0),viewValue;if(angular.isString(viewValue)){var date=new Date(viewValue);return isNaN(date)?void ngModel.$setValidity("date",!1):(ngModel.$setValidity("date",!0),date)}return void ngModel.$setValidity("date",!1)}return ngModel.$setValidity("date",!0),null}function addWatchableAttribute(attribute,scopeProperty,datepickerAttribute){attribute&&(originalScope.$watch($parse(attribute),function(value){scope[scopeProperty]=value}),datepickerEl.attr(datepickerAttribute||scopeProperty,scopeProperty))}function updatePosition(){scope.position=appendToBody?$position.offset(element):$position.position(element),scope.position.top=scope.position.top+element.prop("offsetHeight")}var dateFormat,scope=originalScope.$new(),closeOnDateSelection=angular.isDefined(attrs.closeOnDateSelection)?originalScope.$eval(attrs.closeOnDateSelection):datepickerPopupConfig.closeOnDateSelection,appendToBody=angular.isDefined(attrs.datepickerAppendToBody)?originalScope.$eval(attrs.datepickerAppendToBody):datepickerPopupConfig.appendToBody;attrs.$observe("datepickerPopup",function(value){dateFormat=value||datepickerPopupConfig.dateFormat,ngModel.$render()}),scope.showButtonBar=angular.isDefined(attrs.showButtonBar)?originalScope.$eval(attrs.showButtonBar):datepickerPopupConfig.showButtonBar,originalScope.$on("$destroy",function(){$popup.remove(),scope.$destroy()}),attrs.$observe("currentText",function(text){scope.currentText=angular.isDefined(text)?text:datepickerPopupConfig.currentText
}),attrs.$observe("toggleWeeksText",function(text){scope.toggleWeeksText=angular.isDefined(text)?text:datepickerPopupConfig.toggleWeeksText}),attrs.$observe("clearText",function(text){scope.clearText=angular.isDefined(text)?text:datepickerPopupConfig.clearText}),attrs.$observe("closeText",function(text){scope.closeText=angular.isDefined(text)?text:datepickerPopupConfig.closeText});var getIsOpen,setIsOpen;attrs.isOpen&&(getIsOpen=$parse(attrs.isOpen),setIsOpen=getIsOpen.assign,originalScope.$watch(getIsOpen,function(value){scope.isOpen=!!value})),scope.isOpen=getIsOpen?getIsOpen(originalScope):!1;var documentClickBind=function(event){scope.isOpen&&event.target!==element[0]&&scope.$apply(function(){setOpen(!1)})},elementFocusBind=function(){scope.$apply(function(){setOpen(!0)})},popupEl=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");popupEl.attr({"ng-model":"date","ng-change":"dateSelection()"});var datepickerEl=angular.element(popupEl.children()[0]),datepickerOptions={};attrs.datepickerOptions&&(datepickerOptions=originalScope.$eval(attrs.datepickerOptions),datepickerEl.attr(angular.extend({},datepickerOptions))),ngModel.$parsers.unshift(parseDate),scope.dateSelection=function(dt){angular.isDefined(dt)&&(scope.date=dt),ngModel.$setViewValue(scope.date),ngModel.$render(),closeOnDateSelection&&setOpen(!1)},element.bind("input change keyup",function(){scope.$apply(function(){scope.date=ngModel.$modelValue})}),ngModel.$render=function(){var date=ngModel.$viewValue?dateFilter(ngModel.$viewValue,dateFormat):"";element.val(date),scope.date=ngModel.$modelValue},addWatchableAttribute(attrs.min,"min"),addWatchableAttribute(attrs.max,"max"),attrs.showWeeks?addWatchableAttribute(attrs.showWeeks,"showWeeks","show-weeks"):(scope.showWeeks="show-weeks"in datepickerOptions?datepickerOptions["show-weeks"]:datepickerConfig.showWeeks,datepickerEl.attr("show-weeks","showWeeks")),attrs.dateDisabled&&datepickerEl.attr("date-disabled",attrs.dateDisabled);var documentBindingInitialized=!1,elementFocusInitialized=!1;scope.$watch("isOpen",function(value){value?(updatePosition(),$document.bind("click",documentClickBind),elementFocusInitialized&&element.unbind("focus",elementFocusBind),element[0].focus(),documentBindingInitialized=!0):(documentBindingInitialized&&$document.unbind("click",documentClickBind),element.bind("focus",elementFocusBind),elementFocusInitialized=!0),setIsOpen&&setIsOpen(originalScope,value)}),scope.today=function(){scope.dateSelection(new Date)},scope.clear=function(){scope.dateSelection(null)};var $popup=$compile(popupEl)(scope);appendToBody?$document.find("body").append($popup):element.after($popup)}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(scope,element){element.bind("click",function(event){event.preventDefault(),event.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdownToggle",[]).directive("dropdownToggle",["$document","$location",function($document){var openElement=null,closeMenu=angular.noop;return{restrict:"CA",link:function(scope,element){scope.$watch("$location.path",function(){closeMenu()}),element.parent().bind("click",function(){closeMenu()}),element.bind("click",function(event){var elementWasOpen=element===openElement;event.preventDefault(),event.stopPropagation(),openElement&&closeMenu(),elementWasOpen||element.hasClass("disabled")||element.prop("disabled")||(element.parent().addClass("open"),openElement=element,closeMenu=function(event){event&&(event.preventDefault(),event.stopPropagation()),$document.unbind("click",closeMenu),element.parent().removeClass("open"),closeMenu=angular.noop,openElement=null},$document.bind("click",closeMenu))})}}}]),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var stack=[];return{add:function(key,value){stack.push({key:key,value:value})},get:function(key){for(var i=0;i<stack.length;i++)if(key==stack[i].key)return stack[i]},keys:function(){for(var keys=[],i=0;i<stack.length;i++)keys.push(stack[i].key);return keys},top:function(){return stack[stack.length-1]},remove:function(key){for(var idx=-1,i=0;i<stack.length;i++)if(key==stack[i].key){idx=i;break}return stack.splice(idx,1)[0]},removeTop:function(){return stack.splice(stack.length-1,1)[0]},length:function(){return stack.length}}}}}).directive("modalBackdrop",["$timeout",function($timeout){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(scope){scope.animate=!1,$timeout(function(){scope.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function($modalStack,$timeout){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:"template/modal/window.html",link:function(scope,element,attrs){scope.windowClass=attrs.windowClass||"",$timeout(function(){scope.animate=!0,element[0].focus()}),scope.close=function(evt){var modal=$modalStack.getTop();modal&&modal.value.backdrop&&"static"!=modal.value.backdrop&&evt.target===evt.currentTarget&&(evt.preventDefault(),evt.stopPropagation(),$modalStack.dismiss(modal.key,"backdrop click"))}}}}]).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function($transition,$timeout,$document,$compile,$rootScope,$$stackedMap){function backdropIndex(){for(var topBackdropIndex=-1,opened=openedWindows.keys(),i=0;i<opened.length;i++)openedWindows.get(opened[i]).value.backdrop&&(topBackdropIndex=i);return topBackdropIndex}function removeModalWindow(modalInstance){var body=$document.find("body").eq(0),modalWindow=openedWindows.get(modalInstance).value;openedWindows.remove(modalInstance),removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,300,checkRemoveBackdrop),body.toggleClass(OPENED_MODAL_CLASS,openedWindows.length()>0)}function checkRemoveBackdrop(){if(backdropDomEl&&-1==backdropIndex()){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,150,function(){backdropScopeRef.$destroy(),backdropScopeRef=null}),backdropDomEl=void 0,backdropScope=void 0}}function removeAfterAnimate(domEl,scope,emulateTime,done){function afterAnimating(){afterAnimating.done||(afterAnimating.done=!0,domEl.remove(),done&&done())}scope.animate=!1;var transitionEndEventName=$transition.transitionEndEventName;if(transitionEndEventName){var timeout=$timeout(afterAnimating,emulateTime);domEl.bind(transitionEndEventName,function(){$timeout.cancel(timeout),afterAnimating(),scope.$apply()})}else $timeout(afterAnimating,0)}var backdropDomEl,backdropScope,OPENED_MODAL_CLASS="modal-open",openedWindows=$$stackedMap.createNew(),$modalStack={};return $rootScope.$watch(backdropIndex,function(newBackdropIndex){backdropScope&&(backdropScope.index=newBackdropIndex)}),$document.bind("keydown",function(evt){var modal;27===evt.which&&(modal=openedWindows.top(),modal&&modal.value.keyboard&&$rootScope.$apply(function(){$modalStack.dismiss(modal.key)}))}),$modalStack.open=function(modalInstance,modal){openedWindows.add(modalInstance,{deferred:modal.deferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard});var body=$document.find("body").eq(0),currBackdropIndex=backdropIndex();currBackdropIndex>=0&&!backdropDomEl&&(backdropScope=$rootScope.$new(!0),backdropScope.index=currBackdropIndex,backdropDomEl=$compile("<div modal-backdrop></div>")(backdropScope),body.append(backdropDomEl));var angularDomEl=angular.element("<div modal-window></div>");angularDomEl.attr("window-class",modal.windowClass),angularDomEl.attr("index",openedWindows.length()-1),angularDomEl.attr("animate","animate"),angularDomEl.html(modal.content);var modalDomEl=$compile(angularDomEl)(modal.scope);openedWindows.top().value.modalDomEl=modalDomEl,body.append(modalDomEl),body.addClass(OPENED_MODAL_CLASS)},$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance).value;modalWindow&&(modalWindow.deferred.resolve(result),removeModalWindow(modalInstance))},$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance).value;modalWindow&&(modalWindow.deferred.reject(reason),removeModalWindow(modalInstance))},$modalStack.dismissAll=function(reason){for(var topModal=this.getTop();topModal;)this.dismiss(topModal.key,reason),topModal=this.getTop()},$modalStack.getTop=function(){return openedWindows.top()},$modalStack}]).provider("$modal",function(){var $modalProvider={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function($injector,$rootScope,$q,$http,$templateCache,$controller,$modalStack){function getTemplatePromise(options){return options.template?$q.when(options.template):$http.get(options.templateUrl,{cache:$templateCache}).then(function(result){return result.data})}function getResolvePromises(resolves){var promisesArr=[];return angular.forEach(resolves,function(value){(angular.isFunction(value)||angular.isArray(value))&&promisesArr.push($q.when($injector.invoke(value)))}),promisesArr}var $modal={};return $modal.open=function(modalOptions){var modalResultDeferred=$q.defer(),modalOpenedDeferred=$q.defer(),modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,close:function(result){$modalStack.close(modalInstance,result)},dismiss:function(reason){$modalStack.dismiss(modalInstance,reason)}};if(modalOptions=angular.extend({},$modalProvider.options,modalOptions),modalOptions.resolve=modalOptions.resolve||{},!modalOptions.template&&!modalOptions.templateUrl)throw new Error("One of template or templateUrl options is required.");var templateAndResolvePromise=$q.all([getTemplatePromise(modalOptions)].concat(getResolvePromises(modalOptions.resolve)));return templateAndResolvePromise.then(function(tplAndVars){var modalScope=(modalOptions.scope||$rootScope).$new();modalScope.$close=modalInstance.close,modalScope.$dismiss=modalInstance.dismiss;var ctrlInstance,ctrlLocals={},resolveIter=1;modalOptions.controller&&(ctrlLocals.$scope=modalScope,ctrlLocals.$modalInstance=modalInstance,angular.forEach(modalOptions.resolve,function(value,key){ctrlLocals[key]=tplAndVars[resolveIter++]}),ctrlInstance=$controller(modalOptions.controller,ctrlLocals)),$modalStack.open(modalInstance,{scope:modalScope,deferred:modalResultDeferred,content:tplAndVars[0],backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,windowClass:modalOptions.windowClass})},function(reason){modalResultDeferred.reject(reason)}),templateAndResolvePromise.then(function(){modalOpenedDeferred.resolve(!0)},function(){modalOpenedDeferred.reject(!1)}),modalInstance},$modal}]};return $modalProvider}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse","$interpolate",function($scope,$attrs,$parse,$interpolate){var self=this,setNumPages=$attrs.numPages?$parse($attrs.numPages).assign:angular.noop;this.init=function(defaultItemsPerPage){$attrs.itemsPerPage?$scope.$parent.$watch($parse($attrs.itemsPerPage),function(value){self.itemsPerPage=parseInt(value,10),$scope.totalPages=self.calculateTotalPages()}):this.itemsPerPage=defaultItemsPerPage},this.noPrevious=function(){return 1===this.page},this.noNext=function(){return this.page===$scope.totalPages},this.isActive=function(page){return this.page===page},this.calculateTotalPages=function(){var totalPages=this.itemsPerPage<1?1:Math.ceil($scope.totalItems/this.itemsPerPage);return Math.max(totalPages||0,1)},this.getAttributeValue=function(attribute,defaultValue,interpolate){return angular.isDefined(attribute)?interpolate?$interpolate(attribute)($scope.$parent):$scope.$parent.$eval(attribute):defaultValue},this.render=function(){this.page=parseInt($scope.page,10)||1,this.page>0&&this.page<=$scope.totalPages&&($scope.pages=this.getPages(this.page,$scope.totalPages))},$scope.selectPage=function(page){!self.isActive(page)&&page>0&&page<=$scope.totalPages&&($scope.page=page,$scope.onSelectPage({page:page}))},$scope.$watch("page",function(){self.render()}),$scope.$watch("totalItems",function(){$scope.totalPages=self.calculateTotalPages()}),$scope.$watch("totalPages",function(value){setNumPages($scope.$parent,value),self.page>value?$scope.selectPage(value):self.render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function($parse,config){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(scope,element,attrs,paginationCtrl){function makePage(number,text,isActive,isDisabled){return{number:number,text:text,active:isActive,disabled:isDisabled}}var maxSize,boundaryLinks=paginationCtrl.getAttributeValue(attrs.boundaryLinks,config.boundaryLinks),directionLinks=paginationCtrl.getAttributeValue(attrs.directionLinks,config.directionLinks),firstText=paginationCtrl.getAttributeValue(attrs.firstText,config.firstText,!0),previousText=paginationCtrl.getAttributeValue(attrs.previousText,config.previousText,!0),nextText=paginationCtrl.getAttributeValue(attrs.nextText,config.nextText,!0),lastText=paginationCtrl.getAttributeValue(attrs.lastText,config.lastText,!0),rotate=paginationCtrl.getAttributeValue(attrs.rotate,config.rotate);paginationCtrl.init(config.itemsPerPage),attrs.maxSize&&scope.$parent.$watch($parse(attrs.maxSize),function(value){maxSize=parseInt(value,10),paginationCtrl.render()}),paginationCtrl.getPages=function(currentPage,totalPages){var pages=[],startPage=1,endPage=totalPages,isMaxSized=angular.isDefined(maxSize)&&totalPages>maxSize;isMaxSized&&(rotate?(startPage=Math.max(currentPage-Math.floor(maxSize/2),1),endPage=startPage+maxSize-1,endPage>totalPages&&(endPage=totalPages,startPage=endPage-maxSize+1)):(startPage=(Math.ceil(currentPage/maxSize)-1)*maxSize+1,endPage=Math.min(startPage+maxSize-1,totalPages)));for(var number=startPage;endPage>=number;number++){var page=makePage(number,number,paginationCtrl.isActive(number),!1);pages.push(page)}if(isMaxSized&&!rotate){if(startPage>1){var previousPageSet=makePage(startPage-1,"...",!1,!1);pages.unshift(previousPageSet)}if(totalPages>endPage){var nextPageSet=makePage(endPage+1,"...",!1,!1);pages.push(nextPageSet)}}if(directionLinks){var previousPage=makePage(currentPage-1,previousText,!1,paginationCtrl.noPrevious());pages.unshift(previousPage);var nextPage=makePage(currentPage+1,nextText,!1,paginationCtrl.noNext());pages.push(nextPage)}if(boundaryLinks){var firstPage=makePage(1,firstText,!1,paginationCtrl.noPrevious());pages.unshift(firstPage);var lastPage=makePage(totalPages,lastText,!1,paginationCtrl.noNext());pages.push(lastPage)}return pages}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("pager",["pagerConfig",function(config){return{restrict:"EA",scope:{page:"=",totalItems:"=",onSelectPage:" &"},controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(scope,element,attrs,paginationCtrl){function makePage(number,text,isDisabled,isPrevious,isNext){return{number:number,text:text,disabled:isDisabled,previous:align&&isPrevious,next:align&&isNext}}var previousText=paginationCtrl.getAttributeValue(attrs.previousText,config.previousText,!0),nextText=paginationCtrl.getAttributeValue(attrs.nextText,config.nextText,!0),align=paginationCtrl.getAttributeValue(attrs.align,config.align);paginationCtrl.init(config.itemsPerPage),paginationCtrl.getPages=function(currentPage){return[makePage(currentPage-1,previousText,paginationCtrl.noPrevious(),!0,!1),makePage(currentPage+1,nextText,paginationCtrl.noNext(),!1,!0)]}}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function snake_case(name){var regexp=/[A-Z]/g,separator="-";return name.replace(regexp,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}var defaultOptions={placement:"top",animation:!0,popupDelay:0},triggerMap={mouseenter:"mouseleave",click:"click",focus:"blur"},globalOptions={};this.options=function(value){angular.extend(globalOptions,value)},this.setTriggers=function(triggers){angular.extend(triggerMap,triggers)},this.$get=["$window","$compile","$timeout","$parse","$document","$position","$interpolate",function($window,$compile,$timeout,$parse,$document,$position,$interpolate){return function(type,prefix,defaultTriggerShow){function getTriggers(trigger){var show=trigger||options.trigger||defaultTriggerShow,hide=triggerMap[show]||show;return{show:show,hide:hide}}var options=angular.extend({},defaultOptions,globalOptions),directiveName=snake_case(type),startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol(),template="<div "+directiveName+'-popup title="'+startSym+"tt_title"+endSym+'" content="'+startSym+"tt_content"+endSym+'" placement="'+startSym+"tt_placement"+endSym+'" animation="tt_animation" is-open="tt_isOpen"></div>';return{restrict:"EA",scope:!0,compile:function(){var tooltipLinker=$compile(template);return function(scope,element,attrs){function toggleTooltipBind(){scope.tt_isOpen?hideTooltipBind():showTooltipBind()}function showTooltipBind(){(!hasEnableExp||scope.$eval(attrs[prefix+"Enable"]))&&(scope.tt_popupDelay?(popupTimeout=$timeout(show,scope.tt_popupDelay,!1),popupTimeout.then(function(reposition){reposition()})):show()())}function hideTooltipBind(){scope.$apply(function(){hide()})}function show(){return scope.tt_content?(createTooltip(),transitionTimeout&&$timeout.cancel(transitionTimeout),tooltip.css({top:0,left:0,display:"block"}),appendToBody?$document.find("body").append(tooltip):element.after(tooltip),positionTooltip(),scope.tt_isOpen=!0,scope.$digest(),positionTooltip):angular.noop}function hide(){scope.tt_isOpen=!1,$timeout.cancel(popupTimeout),scope.tt_animation?transitionTimeout=$timeout(removeTooltip,500):removeTooltip()}function createTooltip(){tooltip&&removeTooltip(),tooltip=tooltipLinker(scope,function(){}),scope.$digest()}function removeTooltip(){tooltip&&(tooltip.remove(),tooltip=null)}var tooltip,transitionTimeout,popupTimeout,appendToBody=angular.isDefined(options.appendToBody)?options.appendToBody:!1,triggers=getTriggers(void 0),hasRegisteredTriggers=!1,hasEnableExp=angular.isDefined(attrs[prefix+"Enable"]),positionTooltip=function(){var position,ttWidth,ttHeight,ttPosition;switch(position=appendToBody?$position.offset(element):$position.position(element),ttWidth=tooltip.prop("offsetWidth"),ttHeight=tooltip.prop("offsetHeight"),scope.tt_placement){case"right":ttPosition={top:position.top+position.height/2-ttHeight/2,left:position.left+position.width};break;case"bottom":ttPosition={top:position.top+position.height,left:position.left+position.width/2-ttWidth/2};break;case"left":ttPosition={top:position.top+position.height/2-ttHeight/2,left:position.left-ttWidth};break;default:ttPosition={top:position.top-ttHeight,left:position.left+position.width/2-ttWidth/2}}ttPosition.top+="px",ttPosition.left+="px",tooltip.css(ttPosition)};scope.tt_isOpen=!1,attrs.$observe(type,function(val){scope.tt_content=val,!val&&scope.tt_isOpen&&hide()}),attrs.$observe(prefix+"Title",function(val){scope.tt_title=val}),attrs.$observe(prefix+"Placement",function(val){scope.tt_placement=angular.isDefined(val)?val:options.placement}),attrs.$observe(prefix+"PopupDelay",function(val){var delay=parseInt(val,10);scope.tt_popupDelay=isNaN(delay)?options.popupDelay:delay});var unregisterTriggers=function(){hasRegisteredTriggers&&(element.unbind(triggers.show,showTooltipBind),element.unbind(triggers.hide,hideTooltipBind))};attrs.$observe(prefix+"Trigger",function(val){unregisterTriggers(),triggers=getTriggers(val),triggers.show===triggers.hide?element.bind(triggers.show,toggleTooltipBind):(element.bind(triggers.show,showTooltipBind),element.bind(triggers.hide,hideTooltipBind)),hasRegisteredTriggers=!0});var animation=scope.$eval(attrs[prefix+"Animation"]);scope.tt_animation=angular.isDefined(animation)?!!animation:options.animation,attrs.$observe(prefix+"AppendToBody",function(val){appendToBody=angular.isDefined(val)?$parse(val)(scope):appendToBody}),appendToBody&&scope.$on("$locationChangeSuccess",function(){scope.tt_isOpen&&hide()}),scope.$on("$destroy",function(){$timeout.cancel(transitionTimeout),$timeout.cancel(popupTimeout),unregisterTriggers(),removeTooltip()})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function($tooltip){return $tooltip("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function($tooltip){return $tooltip("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function($tooltip){return $tooltip("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",["ui.bootstrap.transition"]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig","$transition",function($scope,$attrs,progressConfig,$transition){var self=this,bars=[],max=angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):progressConfig.max,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;this.addBar=function(bar,element){var oldValue=0,index=bar.$parent.$index;angular.isDefined(index)&&bars[index]&&(oldValue=bars[index].value),bars.push(bar),this.update(element,bar.value,oldValue),bar.$watch("value",function(value,oldValue){value!==oldValue&&self.update(element,value,oldValue)}),bar.$on("$destroy",function(){self.removeBar(bar)})},this.update=function(element,newValue,oldValue){var percent=this.getPercentage(newValue);animate?(element.css("width",this.getPercentage(oldValue)+"%"),$transition(element,{width:percent+"%"})):element.css({transition:"none",width:percent+"%"})},this.removeBar=function(bar){bars.splice(bars.indexOf(bar),1)},this.getPercentage=function(value){return Math.round(100*value/max)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},template:'<div class="progress" ng-transclude></div>'}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,element)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,angular.element(element.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","$parse","ratingConfig",function($scope,$attrs,$parse,ratingConfig){this.maxRange=angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):ratingConfig.max,this.stateOn=angular.isDefined($attrs.stateOn)?$scope.$parent.$eval($attrs.stateOn):ratingConfig.stateOn,this.stateOff=angular.isDefined($attrs.stateOff)?$scope.$parent.$eval($attrs.stateOff):ratingConfig.stateOff,this.createRateObjects=function(states){for(var defaultOptions={stateOn:this.stateOn,stateOff:this.stateOff},i=0,n=states.length;n>i;i++)states[i]=angular.extend({index:i},defaultOptions,states[i]);return states},$scope.range=this.createRateObjects(angular.isDefined($attrs.ratingStates)?angular.copy($scope.$parent.$eval($attrs.ratingStates)):new Array(this.maxRange)),$scope.rate=function(value){$scope.value===value||$scope.readonly||($scope.value=value)},$scope.enter=function(value){$scope.readonly||($scope.val=value),$scope.onHover({value:value})},$scope.reset=function(){$scope.val=angular.copy($scope.value),$scope.onLeave()},$scope.$watch("value",function(value){$scope.val=value}),$scope.readonly=!1,$attrs.readonly&&$scope.$parent.$watch($parse($attrs.readonly),function(value){$scope.readonly=!!value})}]).directive("rating",function(){return{restrict:"EA",scope:{value:"=",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function($scope){var ctrl=this,tabs=ctrl.tabs=$scope.tabs=[];ctrl.select=function(tab){angular.forEach(tabs,function(tab){tab.active=!1}),tab.active=!0},ctrl.addTab=function(tab){tabs.push(tab),(1===tabs.length||tab.active)&&ctrl.select(tab)},ctrl.removeTab=function(tab){var index=tabs.indexOf(tab);if(tab.active&&tabs.length>1){var newActiveIndex=index==tabs.length-1?index-1:index+1;ctrl.select(tabs[newActiveIndex])}tabs.splice(index,1)}}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(scope,element,attrs){scope.vertical=angular.isDefined(attrs.vertical)?scope.$parent.$eval(attrs.vertical):!1,scope.justified=angular.isDefined(attrs.justified)?scope.$parent.$eval(attrs.justified):!1,scope.type=angular.isDefined(attrs.type)?scope.$parent.$eval(attrs.type):"tabs"}}}).directive("tab",["$parse",function($parse){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(elm,attrs,transclude){return function(scope,elm,attrs,tabsetCtrl){var getActive,setActive;attrs.active?(getActive=$parse(attrs.active),setActive=getActive.assign,scope.$parent.$watch(getActive,function(value,oldVal){value!==oldVal&&(scope.active=!!value)}),scope.active=getActive(scope.$parent)):setActive=getActive=angular.noop,scope.$watch("active",function(active){setActive(scope.$parent,active),active?(tabsetCtrl.select(scope),scope.onSelect()):scope.onDeselect()}),scope.disabled=!1,attrs.disabled&&scope.$parent.$watch($parse(attrs.disabled),function(value){scope.disabled=!!value}),scope.select=function(){scope.disabled||(scope.active=!0)},tabsetCtrl.addTab(scope),scope.$on("$destroy",function(){tabsetCtrl.removeTab(scope)}),scope.$transcludeFn=transclude}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(scope,elm){scope.$watch("headingElement",function(heading){heading&&(elm.html(""),elm.append(heading))})}}}]).directive("tabContentTransclude",function(){function isTabHeading(node){return node.tagName&&(node.hasAttribute("tab-heading")||node.hasAttribute("data-tab-heading")||"tab-heading"===node.tagName.toLowerCase()||"data-tab-heading"===node.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(scope,elm,attrs){var tab=scope.$eval(attrs.tabContentTransclude);tab.$transcludeFn(tab.$parent,function(contents){angular.forEach(contents,function(node){isTabHeading(node)?tab.headingElement=node:elm.append(node)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).directive("timepicker",["$parse","$log","timepickerConfig","$locale",function($parse,$log,timepickerConfig,$locale){return{restrict:"EA",require:"?^ngModel",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(scope,element,attrs,ngModel){function getHoursFromTemplate(){var hours=parseInt(scope.hours,10),valid=scope.showMeridian?hours>0&&13>hours:hours>=0&&24>hours;return valid?(scope.showMeridian&&(12===hours&&(hours=0),scope.meridian===meridians[1]&&(hours+=12)),hours):void 0}function getMinutesFromTemplate(){var minutes=parseInt(scope.minutes,10);return minutes>=0&&60>minutes?minutes:void 0}function pad(value){return angular.isDefined(value)&&value.toString().length<2?"0"+value:value}function refresh(keyboardChange){makeValid(),ngModel.$setViewValue(new Date(selected)),updateTemplate(keyboardChange)}function makeValid(){ngModel.$setValidity("time",!0),scope.invalidHours=!1,scope.invalidMinutes=!1}function updateTemplate(keyboardChange){var hours=selected.getHours(),minutes=selected.getMinutes();scope.showMeridian&&(hours=0===hours||12===hours?12:hours%12),scope.hours="h"===keyboardChange?hours:pad(hours),scope.minutes="m"===keyboardChange?minutes:pad(minutes),scope.meridian=selected.getHours()<12?meridians[0]:meridians[1]}function addMinutes(minutes){var dt=new Date(selected.getTime()+6e4*minutes);selected.setHours(dt.getHours(),dt.getMinutes()),refresh()}if(ngModel){var selected=new Date,meridians=angular.isDefined(attrs.meridians)?scope.$parent.$eval(attrs.meridians):timepickerConfig.meridians||$locale.DATETIME_FORMATS.AMPMS,hourStep=timepickerConfig.hourStep;attrs.hourStep&&scope.$parent.$watch($parse(attrs.hourStep),function(value){hourStep=parseInt(value,10)});var minuteStep=timepickerConfig.minuteStep;attrs.minuteStep&&scope.$parent.$watch($parse(attrs.minuteStep),function(value){minuteStep=parseInt(value,10)}),scope.showMeridian=timepickerConfig.showMeridian,attrs.showMeridian&&scope.$parent.$watch($parse(attrs.showMeridian),function(value){if(scope.showMeridian=!!value,ngModel.$error.time){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();angular.isDefined(hours)&&angular.isDefined(minutes)&&(selected.setHours(hours),refresh())}else updateTemplate()});var inputs=element.find("input"),hoursInputEl=inputs.eq(0),minutesInputEl=inputs.eq(1),mousewheel=angular.isDefined(attrs.mousewheel)?scope.$eval(attrs.mousewheel):timepickerConfig.mousewheel;if(mousewheel){var isScrollingUp=function(e){e.originalEvent&&(e=e.originalEvent);var delta=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||delta>0};hoursInputEl.bind("mousewheel wheel",function(e){scope.$apply(isScrollingUp(e)?scope.incrementHours():scope.decrementHours()),e.preventDefault()}),minutesInputEl.bind("mousewheel wheel",function(e){scope.$apply(isScrollingUp(e)?scope.incrementMinutes():scope.decrementMinutes()),e.preventDefault()})}if(scope.readonlyInput=angular.isDefined(attrs.readonlyInput)?scope.$eval(attrs.readonlyInput):timepickerConfig.readonlyInput,scope.readonlyInput)scope.updateHours=angular.noop,scope.updateMinutes=angular.noop;else{var invalidate=function(invalidHours,invalidMinutes){ngModel.$setViewValue(null),ngModel.$setValidity("time",!1),angular.isDefined(invalidHours)&&(scope.invalidHours=invalidHours),angular.isDefined(invalidMinutes)&&(scope.invalidMinutes=invalidMinutes)};scope.updateHours=function(){var hours=getHoursFromTemplate();angular.isDefined(hours)?(selected.setHours(hours),refresh("h")):invalidate(!0)},hoursInputEl.bind("blur",function(){!scope.validHours&&scope.hours<10&&scope.$apply(function(){scope.hours=pad(scope.hours)})}),scope.updateMinutes=function(){var minutes=getMinutesFromTemplate();angular.isDefined(minutes)?(selected.setMinutes(minutes),refresh("m")):invalidate(void 0,!0)},minutesInputEl.bind("blur",function(){!scope.invalidMinutes&&scope.minutes<10&&scope.$apply(function(){scope.minutes=pad(scope.minutes)})})}ngModel.$render=function(){var date=ngModel.$modelValue?new Date(ngModel.$modelValue):null;isNaN(date)?(ngModel.$setValidity("time",!1),$log.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(date&&(selected=date),makeValid(),updateTemplate())
},scope.incrementHours=function(){addMinutes(60*hourStep)},scope.decrementHours=function(){addMinutes(60*-hourStep)},scope.incrementMinutes=function(){addMinutes(minuteStep)},scope.decrementMinutes=function(){addMinutes(-minuteStep)},scope.toggleMeridian=function(){addMinutes(720*(selected.getHours()<12?1:-1))}}}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function($parse){var TYPEAHEAD_REGEXP=/^\s*(.*?)(?:\s+as\s+(.*?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+(.*)$/;return{parse:function(input){var match=input.match(TYPEAHEAD_REGEXP);if(!match)throw new Error("Expected typeahead specification in form of '_modelValue_ (as _label_)? for _item_ in _collection_' but got '"+input+"'.");return{itemName:match[3],source:$parse(match[4]),viewMapper:$parse(match[2]||match[1]),modelMapper:$parse(match[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function($compile,$parse,$q,$timeout,$document,$position,typeaheadParser){var HOT_KEYS=[9,13,27,38,40];return{require:"ngModel",link:function(originalScope,element,attrs,modelCtrl){var hasFocus,minSearch=originalScope.$eval(attrs.typeaheadMinLength)||1,waitTime=originalScope.$eval(attrs.typeaheadWaitMs)||0,isEditable=originalScope.$eval(attrs.typeaheadEditable)!==!1,isLoadingSetter=$parse(attrs.typeaheadLoading).assign||angular.noop,onSelectCallback=$parse(attrs.typeaheadOnSelect),inputFormatter=attrs.typeaheadInputFormatter?$parse(attrs.typeaheadInputFormatter):void 0,appendToBody=attrs.typeaheadAppendToBody?$parse(attrs.typeaheadAppendToBody):!1,$setModelValue=$parse(attrs.ngModel).assign,parserResult=typeaheadParser.parse(attrs.typeahead),popUpEl=angular.element("<div typeahead-popup></div>");popUpEl.attr({matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(attrs.typeaheadTemplateUrl)&&popUpEl.attr("template-url",attrs.typeaheadTemplateUrl);var scope=originalScope.$new();originalScope.$on("$destroy",function(){scope.$destroy()});var resetMatches=function(){scope.matches=[],scope.activeIdx=-1},getMatchesAsync=function(inputValue){var locals={$viewValue:inputValue};isLoadingSetter(originalScope,!0),$q.when(parserResult.source(originalScope,locals)).then(function(matches){if(inputValue===modelCtrl.$viewValue&&hasFocus){if(matches.length>0){scope.activeIdx=0,scope.matches.length=0;for(var i=0;i<matches.length;i++)locals[parserResult.itemName]=matches[i],scope.matches.push({label:parserResult.viewMapper(scope,locals),model:matches[i]});scope.query=inputValue,scope.position=appendToBody?$position.offset(element):$position.position(element),scope.position.top=scope.position.top+element.prop("offsetHeight")}else resetMatches();isLoadingSetter(originalScope,!1)}},function(){resetMatches(),isLoadingSetter(originalScope,!1)})};resetMatches(),scope.query=void 0;var timeoutPromise;modelCtrl.$parsers.unshift(function(inputValue){return hasFocus=!0,inputValue&&inputValue.length>=minSearch?waitTime>0?(timeoutPromise&&$timeout.cancel(timeoutPromise),timeoutPromise=$timeout(function(){getMatchesAsync(inputValue)},waitTime)):getMatchesAsync(inputValue):(isLoadingSetter(originalScope,!1),resetMatches()),isEditable?inputValue:inputValue?void modelCtrl.$setValidity("editable",!1):(modelCtrl.$setValidity("editable",!0),inputValue)}),modelCtrl.$formatters.push(function(modelValue){var candidateViewValue,emptyViewValue,locals={};return inputFormatter?(locals.$model=modelValue,inputFormatter(originalScope,locals)):(locals[parserResult.itemName]=modelValue,candidateViewValue=parserResult.viewMapper(originalScope,locals),locals[parserResult.itemName]=void 0,emptyViewValue=parserResult.viewMapper(originalScope,locals),candidateViewValue!==emptyViewValue?candidateViewValue:modelValue)}),scope.select=function(activeIdx){var model,item,locals={};locals[parserResult.itemName]=item=scope.matches[activeIdx].model,model=parserResult.modelMapper(originalScope,locals),$setModelValue(originalScope,model),modelCtrl.$setValidity("editable",!0),onSelectCallback(originalScope,{$item:item,$model:model,$label:parserResult.viewMapper(originalScope,locals)}),resetMatches(),element[0].focus()},element.bind("keydown",function(evt){0!==scope.matches.length&&-1!==HOT_KEYS.indexOf(evt.which)&&(evt.preventDefault(),40===evt.which?(scope.activeIdx=(scope.activeIdx+1)%scope.matches.length,scope.$digest()):38===evt.which?(scope.activeIdx=(scope.activeIdx?scope.activeIdx:scope.matches.length)-1,scope.$digest()):13===evt.which||9===evt.which?scope.$apply(function(){scope.select(scope.activeIdx)}):27===evt.which&&(evt.stopPropagation(),resetMatches(),scope.$digest()))}),element.bind("blur",function(){hasFocus=!1});var dismissClickHandler=function(evt){element[0]!==evt.target&&(resetMatches(),scope.$digest())};$document.bind("click",dismissClickHandler),originalScope.$on("$destroy",function(){$document.unbind("click",dismissClickHandler)});var $popup=$compile(popUpEl)(scope);appendToBody?$document.find("body").append($popup):element.after($popup)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(scope,element,attrs){scope.templateUrl=attrs.templateUrl,scope.isOpen=function(){return scope.matches.length>0},scope.isActive=function(matchIdx){return scope.active==matchIdx},scope.selectActive=function(matchIdx){scope.active=matchIdx},scope.selectMatch=function(activeIdx){scope.select({activeIdx:activeIdx})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function($http,$templateCache,$compile,$parse){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(scope,element,attrs){var tplUrl=$parse(attrs.templateUrl)(scope.$parent)||"template/typeahead/typeahead-match.html";$http.get(tplUrl,{cache:$templateCache}).success(function(tplContent){element.replaceWith($compile(tplContent.trim())(scope))})}}}]).filter("typeaheadHighlight",function(){function escapeRegexp(queryToEscape){return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(matchItem,query){return query?matchItem.replace(new RegExp(escapeRegexp(query),"gi"),"<strong>$&</strong>"):matchItem}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a class="accordion-toggle" ng-click="isOpen = !isOpen" accordion-transclude="heading">{{heading}}</a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/alert/alert.html","<div class='alert' ng-class='\"alert-\" + (type || \"warning\")'>\n    <button ng-show='closeable' type='button' class='close' ng-click='close()'>&times;</button>\n    <div ng-transclude></div>\n</div>\n")}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel">\n    <ol class="carousel-indicators" ng-show="slides().length > 1">\n        <li ng-repeat="slide in slides()" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides().length > 1"><span class="icon-prev"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides().length > 1"><span class="icon-next"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/datepicker.html",'<table>\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{rows[0].length - 2 + showWeekNumbers}}"><button type="button" class="btn btn-default btn-sm btn-block" ng-click="toggleMode()"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr ng-show="labels.length > 0" class="h6">\n      <th ng-show="showWeekNumbers" class="text-center">#</th>\n      <th ng-repeat="label in labels" class="text-center">{{label}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows">\n      <td ng-show="showWeekNumbers" class="text-center"><em>{{ getWeekNumber(row) }}</em></td>\n      <td ng-repeat="dt in row" class="text-center">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected}" ng-click="select(dt.date)" ng-disabled="dt.disabled"><span ng-class="{\'text-muted\': dt.secondary}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: (isOpen && 'block') || 'none', top: position.top+'px', left: position.left+'px'}\">\n	<li ng-transclude></li>\n"+'	<li ng-show="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group">\n			<button type="button" class="btn btn-sm btn-info" ng-click="today()">{{currentText}}</button>\n			<button type="button" class="btn btn-sm btn-default" ng-click="showWeeks = ! showWeeks" ng-class="{active: showWeeks}">{{toggleWeeksText}}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="clear()">{{clearText}}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="isOpen = false">{{closeText}}</button>\n	</li>\n</ul>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/backdrop.html",'<div class="modal-backdrop fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1040 + index*10}"></div>')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/window.html",'<div tabindex="-1" class="modal fade {{ windowClass }}" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog"><div class="modal-content" ng-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-repeat="page in pages" ng-class="{disabled: page.disabled, previous: page.previous, next: page.next}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-repeat="page in pages" ng-class="{active: page.active, disabled: page.disabled}"><a ng-click="selectPage(page.number)">{{page.text}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progressbar.html",'<div class="progress"><div class="progress-bar" ng-class="type && \'progress-bar-\' + type" ng-transclude></div></div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/rating/rating.html",'<span ng-mouseleave="reset()">\n    <i ng-repeat="r in range" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < val && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')"></i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset-titles.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tabset-titles.html","<ul class=\"nav {{type && 'nav-' + type}}\" ng-class=\"{'nav-stacked': vertical}\">\n</ul>\n")}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tabset.html",'\n<div class="tabbable">\n  <ul class="nav {{type && \'nav-\' + type}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead-popup.html","<ul class=\"dropdown-menu\" ng-style=\"{display: isOpen()&&'block' || 'none', top: position.top+'px', left: position.left+'px'}\">\n"+'    <li ng-repeat="match in matches" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>')}]);var ngMap=angular.module("ngMap",[]);ngMap.directive("infoWindow",["Attr2Options",function(a){var b=new a;return{restrict:"E",require:"^map",link:function(a,c,d,e){var f=new b.filter(d),g=b.getOptions(f);g.pixelOffset&&(g.pixelOffset=google.maps.Size.apply(this,g.pixelOffset)),infoWindow=new google.maps.InfoWindow(g),infoWindow.contents=c.html();var h=b.getEvents(a,f);for(var i in h)google.maps.event.addListener(infoWindow,i,h[eventname]);e.infoWindows.push(infoWindow),c.css({display:"none"})}}}]),ngMap.directive("map",["Attr2Options","$parse","NavigatorGeolocation","GeoCoder","$compile",function(a,b,c,d){var e=new a;return{restrict:"AE",controller:["$scope",function(a){this.map=null,this.controls={},this.markers=[],this.shapes=[],this.infoWindows=[],this.initializeMap=function(a,b,f){var g=e.filter(f),h=e.getOptions(g),i=e.getControlOptions(g);for(key in i)h[key]=i[key];var j=this;if(h.zoom||(h.zoom=15),h.center instanceof Array){var k=h.center[0],l=h.center[1];h.center=new google.maps.LatLng(k,l)}else{var m=h.center;delete h.center}for(var n in this.controls)h[n+"Control"]="false"===this.controls[n].enabled?0:1,delete this.controls[n].enabled,h[n+"ControlOptions"]=this.controls[n];console.log("mapOptions",h);var o=document.createElement("div");o.style.width="100%",o.style.height="100%",b.prepend(o),j.map=new google.maps.Map(o,h),"string"==typeof m?d.geocode({address:m}).then(function(a){j.map.setCenter(a[0].geometry.location)}):h.center||c.getCurrentPosition().then(function(a){var b=a.coords.latitude,c=a.coords.longitude;j.map.setCenter(new google.maps.LatLng(b,c))});var p=e.getEvents(a,g);console.log("mapEvents",p);for(var q in p)google.maps.event.addListener(j.map,q,p[q]);return a.map=j.map,j.map},this.addMarker=function(b){b.setMap(this.map),b.centered&&this.map.setCenter(b.position);var c=Object.keys(a.markers).length;a.markers[b.id||c]=b},this.initializeMarkers=function(){a.markers={};for(var b=0;b<this.markers.length;b++){var c=this.markers[b];this.addMarker(c)}},this.initializeShapes=function(){a.shapes={};for(var b=0;b<this.shapes.length;b++){var c=this.shapes[b];c.setMap(this.map),a.shapes[c.id||b+1]=c}},this.initializeInfoWindows=function(){a.infoWindows={};for(var b=0;b<this.infoWindows.length;b++){var c=this.infoWindows[b];a.infoWindows[c.id||b+1]=c}}}],link:function(a,b,c,d){d.initializeMap(a,b,c),d.initializeMarkers(),d.initializeShapes(),d.initializeInfoWindows(),a.showInfoWindow=function(b){for(var c=a.infoWindows[b],d=c.contents,e=d.match(/{{[^}]+}}/g),f=0,g=e.length;g>f;f++){var h=e[f].replace(/{{/,"").replace(/}}/,"");d=d.replace(e[f],a.$eval(h))}c.setContent(d),c.open(a.map,a.mapEventTarget)}}}}]),ngMap.directive("marker",["Attr2Options","GeoCoder","NavigatorGeolocation",function(a,b,c){var d=new a;return{restrict:"E",require:"^map",link:function(a,e,f,g){var h=new d.filter(f),i=d.getOptions(h),j=d.getEvents(a,h),k=function(){var a=new google.maps.Marker(i);Object.keys(j).length>0&&console.log("markerEvents",j);for(var b in j)google.maps.event.addListener(a,b,j[b]);return a};if(i.position instanceof Array){var l=i.position[0],m=i.position[1];i.position=new google.maps.LatLng(l,m),console.log("adding marker with options, ",i);var n=k();i.ngRepeat?g.addMarker(n):g.markers.push(n)}else if("string"==typeof i.position){var o=i.position;o.match(/^current/i)?c.getCurrentPosition().then(function(a){var b=a.coords.latitude,c=a.coords.longitude;i.position=new google.maps.LatLng(b,c);var d=k();g.addMarker(d)}):b.geocode({address:i.position}).then(function(a){var b=a[0].geometry.location;i.position=b;var c=k();g.addMarker(c)})}else console.error("invalid marker position",i.position)}}}]),ngMap.directive("shape",["Attr2Options",function(a){var b=new a,c=function(a){return a[0]&&a[0]instanceof Array?a.map(function(a){return new google.maps.LatLng(a[0],a[1])}):new google.maps.LatLng(a[0],a[1])},d=function(a){var b=c(a);return new google.maps.LatLngBounds(b[0],b[1])},e=function(a,b){switch(a){case"circle":return b.center=c(b.center),new google.maps.Circle(b);case"polygon":return b.paths=c(b.paths),new google.maps.Polygon(b);case"polyline":return b.path=c(b.path),new google.maps.Polyline(b);case"rectangle":return b.bounds=d(b.bounds),new google.maps.Rectangle(b);case"groundOverlay":case"image":var e=b.url,f=d(b.bounds),g={opacity:b.opacity,clickable:b.clickable};return new google.maps.GroundOverlay(e,f,g)}return null};return{restrict:"E",require:"^map",link:function(a,c,d,f){var g=b.filter(d),h=g.name;delete g.name;var i=b.getOptions(g);console.log("shape",h,"options",i);var j=e(h,i);j?f.shapes.push(j):console.error("shape",h,"is not defined");var k=b.getEvents(a,g);console.log("shape",h,"events",k);for(var l in k)google.maps.event.addListener(j,l,k[l])}}}]),ngMap.provider("Attr2Options",function(){this.$get=function(){return function(){this.filter=function(a){var b={};for(var c in a)c.match(/^\$/)||(b[c]=a[c]);return b},this.getOptions=function(attrs){var options={};for(var key in attrs)if(!key.match(/^on[A-Z]/)&&!key.match(/ControlOptions$/)){var val=attrs[key];try{var num=Number(val);if(isNaN(num))throw"Not a number";options[key]=num}catch(err){try{options[key]=JSON.parse(val)}catch(err){if(val.match(/^[A-Z][a-zA-Z0-9]+\(.*\)$/))try{var exp="new google.maps."+val;options[key]=eval(exp)}catch(e){options[key]=val}else if(val.match(/^[A-Z][a-zA-Z0-9]+\.[A-Z]+$/))try{options[key]=eval("google.maps."+val)}catch(e){options[key]=val}else options[key]=val}}}return options},this.getEvents=function(a,b){var c={};for(var d in b)if(d.match(/^on[A-Z]/)){var e=d.replace(/^on/,"");e=e.charAt(0).toLowerCase()+e.slice(1),e=e.replace(/([A-Z])/g,function(a){return"_"+a.toLowerCase()}),c[e]=function(c){a.mapEvent=c,a.mapEventTarget=this,a.$eval(b[d])}}return c},this.getControlOptions=function(a){var b={};for(var c in a)if(c.match(/(.*)ControlOptions$/)){var d=a[c],e=d.replace(/'/g,'"');e=e.replace(/([^"]+)|("[^"]+")/g,function(a,b,c){return b?b.replace(/([a-zA-Z0-9]+?):/g,'"$1":'):c});try{var f=JSON.parse(e);for(var g in f){var h=f[g];if("string"==typeof h)var h=h.toUpperCase();else if("mapTypeIds"==g)var h=h.map(function(a){return google.maps.MapTypeId[a.toUpperCase()]});if("style"==g){var i=c.charAt(0).toUpperCase()+c.slice(1),j=i.replace(/Options$/,"")+"Style";f[g]=google.maps[j][h]}else f[g]="position"==g?google.maps.ControlPosition[h]:h}b[c]=f}catch(k){console.error("invald option for",c,e,k,k.stack)}}return b}}}}),ngMap.service("GeoCoder",["$q",function(a){return{geocode:function(b){var c=a.defer(),d=new google.maps.Geocoder;return d.geocode(b,function(a,b){b==google.maps.GeocoderStatus.OK?c.resolve(a):c.reject("Geocoder failed due to: "+b)}),c.promise}}}]),ngMap.service("NavigatorGeolocation",["$q",function(a){return{getCurrentPosition:function(){var b=a.defer();return navigator.geolocation?navigator.geolocation.getCurrentPosition(function(a){b.resolve(a)},function(a){console.error(a),b.reject(a)}):b.reject("Browser Geolocation service failed."),b.promise},watchPosition:function(){return"TODO"},clearWatch:function(){return"TODO"}}}]),angular.module("brandscopicApp.debounce",[]).factory("debounce",["$timeout","$q",function($timeout,$q){var deb=function(func,delay,immediate,ctx){var timer=null,deferred=$q.defer(),wait=delay||300;return function(){var context=ctx||this,args=arguments,callNow=immediate&&!timer,later=function(){immediate||(deferred.resolve(func.apply(context,args)),deferred=$q.defer())};return timer&&$timeout.cancel(timer),timer=$timeout(later,wait),callNow&&(deferred.resolve(func.apply(context,args)),deferred=$q.defer()),deferred.promise}};return deb}]),angular.module("brandscopicApp.eventService",[]).factory("eventService",["$q","CompanyService","UserService","Event",function($q,CompanyService,UserService,Event){var searchResult=[],_getEventSearch=function(value){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,q:value},actions={success:function(items){searchResult=[],angular.forEach(items,function(item){angular.forEach(item.value,function(subItem){searchResult.push({category:item.label,label:subItem.label,id:subItem.value,type:subItem.type})})}),defer.resolve(searchResult)},error:function(event_error){scope.event_error=event_error,defer.reject()}};return Event.search(credentials,actions),defer.promise},_getEventsByFilters=function(campaign,place,user,brand,brand_portfolio,venue){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,"campaign[]":campaign,"place[]":place,"user[]":user,"brand[]":brand,"brand_portfolio[]":brand_portfolio,"venue[]":venue},actions={success:function(items){defer.resolve(items)},error:function(event_error){scope.event_error=event_error,defer.reject()}};return Event.filterEvents(credentials,actions),defer.promise};return{getEventSearch:_getEventSearch,getEventsByFilters:_getEventsByFilters}}]),angular.module("brandscopicApp.photosService",[]).factory("photosService",["$q","CompanyService","UserService","$stateParams","Photos",function($q,CompanyService,UserService,$stateParams,Photos){var _getPhotoAmazonAuth=function(){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(response){defer.resolve(response)}};return Photos.form(credentials,actions),defer.promise},_getPhotosList=function(){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(response){defer.resolve(response)}};return Photos.all(credentials,actions),defer.promise},_getAddPhoto=function(){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(response){defer.resolve(response)}};return Photos.add(credentials,actions),defer.promise};return{getPhotoAmazonAuth:_getPhotoAmazonAuth,getPhotosList:_getPhotosList,getAddPhoto:_getAddPhoto}}]).service("UploadedPhotosTracker",function(){this.uploadedPhotos={},this.addUploadedPhotos=function(eventId,amount){this.uploadedPhotos[eventId]||(this.uploadedPhotos[eventId]=0),this.uploadedPhotos[eventId]+=amount},this.getExpectedPhotosAmount=function(eventId){return this.uploadedPhotos[eventId]},this.setUplodadedPhotos=function(eventId,amount){this.uploadedPhotos[eventId]=amount}}),angular.module("brandscopicApp.surveysService",[]).factory("surveysService",["$q","CompanyService","UserService","$stateParams","Surveys","Event",function($q,CompanyService,UserService,$stateParams,Surveys){var _question_one_options=Object.freeze([{PURCHASED:"PURCHASED",AWARE:"AWARE",UNAWARE:"UNAWARE"}]),_genders=Object.freeze([{key:scopic.consts.surveys_question_gender.MALE,value:"Male"},{key:scopic.consts.surveys_question_gender.FEMALE,value:"Female"}]),_races=Object.freeze([{key:scopic.consts.surveys_question_race.ASIAN,value:"Asian"},{key:scopic.consts.surveys_question_race.BLACK,value:"African American"},{key:scopic.consts.surveys_question_race.LATINO,value:"Hispanic Latino"},{key:scopic.consts.surveys_question_race.AMERICAN,value:"Native Americans"},{key:scopic.consts.surveys_question_race.WHITE,value:"White"}]),_ages=Object.freeze([{key:scopic.consts.surveys_question_age.LESS12,value:"<12"},{key:scopic.consts.surveys_question_age.BETWEEN_12_17,value:"12-17"},{key:scopic.consts.surveys_question_age.BETWEEN_18_20,value:"18-20"},{key:scopic.consts.surveys_question_age.BETWEEN_21_24,value:"21-24"},{key:scopic.consts.surveys_question_age.BETWEEN_25_34,value:"25-34"},{key:scopic.consts.surveys_question_age.BETWEEN_35_44,value:"35-44"},{key:scopic.consts.surveys_question_age.BETWEEN_45_54,value:"45-54"},{key:scopic.consts.surveys_question_age.BETWEEN_55_64,value:"55-64"},{key:scopic.consts.surveys_question_age.MORE_65,value:"65+"}]),_likelihood=Object.freeze([{key:scopic.consts.surveys_question_likelihood.VERY_UNLIKELY,value:"1 - VERY UNLIKELY"},{key:scopic.consts.surveys_question_likelihood.UNLIKELY,value:"2 - UNLIKELY"},{key:scopic.consts.surveys_question_likelihood.REGULAR,value:"3 - REGULAR"},{key:scopic.consts.surveys_question_likelihood.LIKELY,value:"4 - LIKELY"},{key:scopic.consts.surveys_question_likelihood.VERY_LIKELY,value:"5 - VERY LIKELY"}]),_getSurveysList=function(){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(items){defer.resolve(items)},error:function(event_error){defer.reject(event_error)}};return Surveys.all(credentials,actions),defer.promise},_createSurvey=function(survey){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(items){defer.resolve(items)},error:function(event_error){defer.reject(event_error)}};return Surveys.create(credentials,actions,survey),defer.promise},_editSurvey=function(survey,survey_id){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId,id:survey_id},actions={success:function(items){defer.resolve(items)},error:function(event_error){defer.reject(event_error)}};return Surveys.update(credentials,actions,survey),defer.promise},_getBrandslist=function(){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(items){defer.resolve(items)},error:function(event_error){console.log(event_error),defer.reject(event_error)}};return Surveys.brands(credentials,actions),defer.promise},_getSurveyDetail=function(survey_id){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId,id:survey_id},actions={success:function(items){defer.resolve(items)
},error:function(event_error){console.log(event_error),defer.reject(event_error)}};return Surveys.detail(credentials,actions),defer.promise};return{ages:_ages,createSurvey:_createSurvey,editSurvey:_editSurvey,genders:_genders,getBrandslist:_getBrandslist,getSurveyDetail:_getSurveyDetail,getSurveysList:_getSurveysList,likehood:_likelihood,races:_races,question_one_options:_question_one_options}}]),angular.module("brandscopicApp.venueService",[]).factory("venueService",["$q","CompanyService","UserService","Venue",function($q,CompanyService,UserService,Venue){var searchResult=[],_getVenuesSearch=function(value){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,term:value},actions={success:function(items){defer.resolve(items)},error:function(venue_error){scope.venue_error=venue_error,defer.reject()}};return Venue.search(credentials,actions),defer.promise},_getVenuesAutocomplete=function(value){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,q:value},actions={success:function(items){searchResult=[],angular.forEach(items,function(item){angular.forEach(item.value,function(subItem){searchResult.push({category:item.label,label:subItem.label,id:subItem.value,type:subItem.type})})}),defer.resolve(searchResult)},error:function(venue_error){scope.venue_error=venue_error,defer.reject()}};return Venue.venuesAutocomplete(credentials,actions),defer.promise},_getVenuesByFilters=function(area,brand,brand_portfolio,campaign,company_user,team){var defer=$q.defer(),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,"area[]":area,"brand[]":brand,"brand_portfolio[]":brand_portfolio,"campaign[]":campaign,"company_user[]":company_user,"team[]":team},actions={success:function(items){defer.resolve(items)},error:function(event_error){scope.event_error=event_error,defer.reject()}};return Venue.filterVenues(credentials,actions),defer.promise};return{getVenuesSearch:_getVenuesSearch,getVenuesAutocomplete:_getVenuesAutocomplete,getVenuesByFilters:_getVenuesByFilters}}]),angular.module("brandscopicApp.services").service("SessionService",["$sessionStorage","$localStorage",function($sessionStorage,$localStorage){this.storageService=$localStorage,this.setStorageType=function(type){if("local"===type.toLowerCase())this.storageService=$localStorage,delete $sessionStorage.usingSession;else{if("session"!==type.toLowerCase())throw"Invalid storage type";$sessionStorage.usingSession=!0,this.storageService=$sessionStorage}},this.get=function(dataName){return this.storageService[dataName]},this.put=function(dataName,data){this.storageService[dataName]=data},this.remove=function(dataName){delete this.storageService[dataName],this.storageService===$localStorage&&delete this.storageService.usingSession},$sessionStorage.usingSession&&(this.storageService=$sessionStorage)}]),angular.module("brandscopicApp.services.permissions").service("eventsPermissionsService",function(){this.pagePermissions=["events"],this.elementsVisiblePermissions={".edit-event":["events_edit"],".deactivate-event":["events_deactivate"]},this.hyperlinksEnabledPermissions={".events-link":["events_show"]}}),angular.module("brandscopicApp.services.permissions").service("venuesPermissionsService",function(){this.pagePermissions=["venues"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}).service("venuesPermissionsAddService",function(){this.pagePermissions=["venues_create"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}),angular.module("brandscopicApp.services.permissions").service("eventAboutPermissionsService",function(){this.pagePermissions=[],this.elementsVisiblePermissions={"#edit-button":["events_edit"],"#deactivate-button":["events_deactivate"]},this.hyperlinksEnabledPermissions={}}),angular.module("brandscopicApp.services.permissions").service("eventsDetailsPermissionsService",["UserService",function(UserService){this.pagePermissions=[],this.elementsVisiblePermissions={"#people-button":{events:["events_team_members","events_contacts"],customHandler:function(){for(var elementsShouldBeVisible=!1,i=0;i<this.events.length;i++)elementsShouldBeVisible=elementsShouldBeVisible||UserService.permissionIsValid(this.events[i]);return elementsShouldBeVisible}},"#expenses-button":["events_expenses"],"#photos-button":["events_photos"],"#surveys-button":["events_surveys"]},this.hyperlinksEnabledPermissions={}}]),angular.module("brandscopicApp.services.permissions").service("eventsPeoplePermissionsService",function(){this.pagePermissions=["events"],this.elementsVisiblePermissions={"#team-button":["events_team_members"],"#contacts-button":["events_contacts"],".contact-deactivate-button":["events_delete_contacts"],".contact-edit-button":["events_edit_contacts"]},this.hyperlinksEnabledPermissions={}}),angular.module("brandscopicApp.services.permissions").service("eventsExpensesPermissionsService",["UserService",function(){this.pagePermissions=["events_expenses"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}]).service("eventsExpensesAddPermissionsService",["UserService",function(){this.pagePermissions=["events_create_expenses"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}]),angular.module("brandscopicApp.services.permissions").service("eventsPhotosPermissionsService",function(){this.pagePermissions=["events_photos"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}).service("eventsPhotosAddPermissionsService",function(){this.pagePermissions=["events_create_photos"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}),angular.module("brandscopicApp.services.permissions").service("eventSurveysPermissionsService",function(){this.pagePermissions=["events_surveys"],this.elementsVisiblePermissions={".survey-edit-button":["events_edit_surveys"]},this.hyperlinksEnabledPermissions={}}).service("eventSurveysAddPermissionsService",function(){this.pagePermissions=["events_create_surveys"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}).service("eventSurveysEditPermissionsService",function(){this.pagePermissions=["events_edit_surveys"],this.elementsVisiblePermissions={},this.hyperlinksEnabledPermissions={}}),angular.module("brandscopicApp.services.permissions").service("homePermissionsService",function(){this.pagePermissions=[],this.elementsVisiblePermissions={"#eventsNavBar":["events"],"#venuesNavBar":["venues"]},this.hyperlinksEnabledPermissions={}}),angular.module("brandscopicApp.sharedDirectives",[]).directive("scopicTypeahead",["$q","CompanyService","debounce","UserService","Venue","Event","eventService","venueService",function($q,CompanyService,debounce,UserService,Venue,Event,eventService,venueService){var link=function(scope,element,attrs){function removeTagOnSelect(str){return String(str).replace("<i>","").replace("</i>","")}$.widget("custom.catcomplete",$.ui.autocomplete,{_renderMenu:function(ul,items){var that=this,currentCategory="";$.each(items,function(index,item){item.category&&item.category!=currentCategory&&(ul.append("<li class='ui-autocomplete-category'><span class='category'><strong>"+item.category+"</strong></span></li>"),currentCategory=item.category),that._renderItemData(ul,item)})}}),$("#searchEvent").catcomplete({delay:0,source:function(request,response){"events"==attrs.source&&eventService.getEventSearch(request.term).then(function(data){response(data)}),"venues"==attrs.source&&venueService.getVenuesAutocomplete(request.term).then(function(data){response(data)})},focus:function(event,ui){return void 0==ui.item?!1:void(ui.item.value=removeTagOnSelect("events"==attrs.source?ui.item.value:ui.item.label))},select:function(event,ui){return null!=ui.item&&void 0!=ui.item&&(scope.$broadcast("RESULT_SEARCH",{id:ui.item.id,type:ui.item.type}),scope.searchEvent=ui.item.value),!1}}).data("custom-catcomplete")._renderItem=function(ul,item){return $("<li></li>").data("ui-autocomplete-item",item).append("<a>"+item.label+"</a>").appendTo(ul)}};return{link:link,restrict:"E",templateUrl:"views/directives/templates/typeahead.html"}}]).directive("scopicAutoExpand",function(){return{restrict:"A",link:function($scope,elem){var textSummary,wordsCount;$scope.$watch("event.summary",function(value){null!=value&&(textSummary=value.split(" "),wordsCount=textSummary.length),$scope.showMoreTextLink=wordsCount>100?!0:!1}),$scope.$watch("isActive",function(value){if(value&&$scope.isMore){var height=elem[0].scrollHeight;elem.height(height),elem.bind("keyup",function($event){$event.target;elem.height(0);var height=elem[0].scrollHeight;elem.height(height)})}else elem.unbind("keyup"),elem.height(50)})}}}),angular.module("brandscopicApp.eventDirectives",[]).directive("scopicEventFilter",["$q","CompanyService","debounce","UserService","Venue","Event","eventService","UserInterface","$window","$state",function($q,CompanyService,debounce,UserService,Venue,Event,eventService,UserInterface,$window,$state){var link=function(scope){scope.getEventBorderColor=function(event_status){var classSelected;switch(event_status){case scopic.consts.event_status.APPROVED:classSelected="approve";break;case scopic.consts.event_status.LATE:classSelected="late";break;case scopic.consts.event_status.DUE:classSelected="due";break;case scopic.consts.event_status.SUBMITTED:classSelected="submitted";break;case scopic.consts.event_status.REJECTED:classSelected="late"}return classSelected},scope.getEventBorderColor=function(event_status){var classSelected;switch(event_status){case scopic.consts.event_status.APPROVED:classSelected="approve";break;case scopic.consts.event_status.LATE:classSelected="late";break;case scopic.consts.event_status.DUE:classSelected="due";break;case scopic.consts.event_status.SUBMITTED:classSelected="submitted";break;case scopic.consts.event_status.REJECTED:classSelected="late"}return classSelected},scope.getLastOfDateButtonClass=function(event){return event.start_date_LAST_OF_GROUP?"last_of_group":""},scope.handleEventClick=function(permission,state,eventId){UserService.permissionIsValid(permission)&&$state.go(state,{eventId:eventId})},scope.permissionIsValid=function(permission){return UserService.permissionIsValid(permission)},scope.$watch("filter",function(value){console.log(value);var campaign=[],place=[],user=[],brand=[],brand_portfolio=[],venue=[];if(""!==value||void 0!==value){switch(value.type){case scopic.consts.events_typeahead_categories.CAMPAIGN:campaign.push(value.id);break;case scopic.consts.events_typeahead_categories.BRAND:brand.push(value.id);break;case scopic.consts.events_typeahead_categories.BRAND2:brand_portfolio.push(value.id);break;case scopic.consts.events_typeahead_categories.PLACE:place.push(value.id);break;case scopic.consts.events_typeahead_categories.USER:user.push(value.id);break;case scopic.consts.events_typeahead_categories.VENUE:venue.push(value.id)}eventService.getEventsByFilters(campaign,place,user,brand,brand_portfolio,venue).then(function(response){scope.eventsItems=response.results})}})};return{link:link,scope:{filter:"=",eventsItems:"="},restrict:"E",templateUrl:"views/directives/templates/eventFilter.html"}}]),angular.module("highcharts-ng",[]).directive("highchart",function(){function prependMethod(obj,method,func){var original=obj[method];obj[method]=function(){var args=Array.prototype.slice.call(arguments);return func.apply(this,args),original?original.apply(this,args):void 0}}function deepExtend(destination,source){for(var property in source)source[property]&&source[property].constructor&&source[property].constructor===Object?(destination[property]=destination[property]||{},deepExtend(destination[property],source[property])):destination[property]=source[property];return destination}var indexOf=function(arr,find,i){void 0===i&&(i=0),0>i&&(i+=arr.length),0>i&&(i=0);for(var n=arr.length;n>i;i++)if(i in arr&&arr[i]===find)return i;return-1},seriesId=0,ensureIds=function(series){angular.forEach(series,function(s){angular.isDefined(s.id)||(s.id="series-"+seriesId++)})},axisNames=["xAxis","yAxis"],getMergedOptions=function(scope,element,config){var mergedOptions={},defaultOptions={chart:{events:{}},title:{},subtitle:{},series:[],credits:{},plotOptions:{},navigator:{enabled:!1}};return mergedOptions=config.options?deepExtend(defaultOptions,config.options):defaultOptions,mergedOptions.chart.renderTo=element[0],angular.forEach(axisNames,function(axisName){config[axisName]&&(prependMethod(mergedOptions.chart.events,"selection",function(e){var thisChart=this;scope.$apply(e[axisName]?function(){scope.config[axisName].currentMin=e[axisName][0].min,scope.config[axisName].currentMax=e[axisName][0].max}:function(){scope.config[axisName].currentMin=thisChart[axisName][0].dataMin,scope.config[axisName].currentMax=thisChart[axisName][0].dataMax})}),prependMethod(mergedOptions.chart.events,"addSeries",function(){scope.config[axisName].currentMin=this[axisName][0].min||scope.config[axisName].currentMin,scope.config[axisName].currentMax=this[axisName][0].max||scope.config[axisName].currentMax}),mergedOptions[axisName]=angular.copy(config[axisName]))}),config.title&&(mergedOptions.title=config.title),config.subtitle&&(mergedOptions.subtitle=config.subtitle),config.credits&&(mergedOptions.credits=config.credits),mergedOptions},updateZoom=function(axis,modelAxis){var extremes=axis.getExtremes();(modelAxis.currentMin!==extremes.dataMin||modelAxis.currentMax!==extremes.dataMax)&&axis.setExtremes(modelAxis.currentMin,modelAxis.currentMax,!1)},processExtremes=function(chart,axis,axisName){(axis.currentMin||axis.currentMax)&&chart[axisName][0].setExtremes(axis.currentMin,axis.currentMax,!0)},chartOptionsWithoutEasyOptions=function(options){return angular.extend({},options,{data:null,visible:null})},prevOptions={},processSeries=function(chart,series){var ids=[];series&&(ensureIds(series),angular.forEach(series,function(s){ids.push(s.id);var chartSeries=chart.get(s.id);chartSeries?angular.equals(prevOptions[s.id],chartOptionsWithoutEasyOptions(s))?(void 0!==s.visible&&chartSeries.visible!==s.visible&&chartSeries.setVisible(s.visible,!1),chartSeries.options.data!==s.data&&chartSeries.setData(angular.copy(s.data),!1)):chartSeries.update(angular.copy(s),!1):chart.addSeries(angular.copy(s),!1),prevOptions[s.id]=chartOptionsWithoutEasyOptions(s)}));for(var i=chart.series.length-1;i>=0;i--){var s=chart.series[i];indexOf(ids,s.options.id)<0&&s.remove(!1)}},initialiseChart=function(scope,element,config){config=config||{};for(var mergedOptions=getMergedOptions(scope,element,config),chart=config.useHighStocks?new Highcharts.StockChart(mergedOptions):new Highcharts.Chart(mergedOptions),i=0;i<axisNames.length;i++)config[axisNames[i]]&&processExtremes(chart,config[axisNames[i]],axisNames[i]);return processSeries(chart,config.series),config.loading&&chart.showLoading(),chart.redraw(),chart};return{restrict:"EAC",replace:!0,template:"<div></div>",scope:{config:"="},link:function(scope,element){function initChart(){chart&&chart.destroy(),chart=initialiseChart(scope,element,scope.config)}var chart=!1;initChart(),scope.$watch("config.series",function(newSeries,oldSeries){newSeries!==oldSeries&&(processSeries(chart,newSeries),chart.redraw())},!0),scope.$watch("config.title",function(newTitle){chart.setTitle(newTitle,!0)},!0),scope.$watch("config.subtitle",function(newSubtitle){chart.setTitle(!0,newSubtitle)},!0),scope.$watch("config.loading",function(loading){loading?chart.showLoading():chart.hideLoading()}),scope.$watch("config.credits.enabled",function(enabled){enabled?chart.credits.show():chart.credits&&chart.credits.hide()}),scope.$watch("config.useHighStocks",function(){initChart()}),angular.forEach(axisNames,function(axisName){scope.$watch("config."+axisName,function(newAxes,oldAxes){newAxes!==oldAxes&&newAxes&&(chart[axisName][0].update(newAxes,!1),updateZoom(chart[axisName][0],angular.copy(newAxes)),chart.redraw())},!0)}),scope.$watch("config.options",function(newOptions,oldOptions){newOptions!==oldOptions&&initChart()},!0),scope.$on("$destroy",function(){chart&&chart.destroy(),element.remove()})}}});var scopic={};scopic.consts=Object.freeze({typeahead_types:{PLACES:"PLACES",EVENTS:"EVENTS"},booleans:{TRUE:!0,FALSE:!1},surveys_question_gender:{MALE:10,FEMALE:9},surveys_question_race:{ASIAN:11,BLACK:12,LATINO:13,AMERICAN:14,WHITE:15},surveys_question_age:{LESS12:1,BETWEEN_12_17:2,BETWEEN_18_20:387,BETWEEN_21_24:3,BETWEEN_25_34:4,BETWEEN_35_44:5,BETWEEN_45_54:6,BETWEEN_55_64:7,MORE_65:8},surveys_question_likelihood:{VERY_UNLIKELY:1,UNLIKELY:2,REGULAR:3,LIKELY:4,VERY_LIKELY:5},question_one_options:{PURCHASED:"purchased",AWARE:"aware",UNAWARE:"unaware"},events_typeahead_categories:{CAMPAIGN:"campaign",BRAND:"brand",BRAND2:"brand_portfolio",PLACE:"place",USER:"user",VENUE:"venue"},event_status:{APPROVED:"Approved",LATE:"Late",DUE:"Due",SUBMITTED:"Submitted",REJECTED:"Rejected"}}),angular.forEach(scopic.consts,function(c){c=Object.freeze(c)}),scopic.injectConst=function(scope){scope.scopic={consts:scopic.consts}},function(){function r(a,b){var c;a||(a={});for(c in b)a[c]=b[c];return a}function x(){var a,c,b=arguments,d={},e=function(a,b){var c,d;"object"!=typeof a&&(a={});for(d in b)b.hasOwnProperty(d)&&(c=b[d],a[d]=c&&"object"==typeof c&&"[object Array]"!==Object.prototype.toString.call(c)&&"number"!=typeof c.nodeType?e(a[d]||{},c):b[d]);return a};for(b[0]===!0&&(d=b[1],b=Array.prototype.slice.call(b,2)),c=b.length,a=0;c>a;a++)d=e(d,b[a]);return d}function z(a,b){return parseInt(a,b||10)}function fa(a){return"string"==typeof a}function S(a){return"object"==typeof a}function Ka(a){return"[object Array]"===Object.prototype.toString.call(a)}function wa(a){return"number"==typeof a}function xa(a){return P.log(a)/P.LN10}function ga(a){return P.pow(10,a)}function ha(a,b){for(var c=a.length;c--;)if(a[c]===b){a.splice(c,1);break}}function t(a){return a!==u&&null!==a}function v(a,b,c){var d,e;if(fa(b))t(c)?a.setAttribute(b,c):a&&a.getAttribute&&(e=a.getAttribute(b));else if(t(b)&&S(b))for(d in b)a.setAttribute(d,b[d]);return e}function ja(a){return Ka(a)?a:[a]}function n(){var b,c,a=arguments,d=a.length;for(b=0;d>b;b++)if(c=a[b],"undefined"!=typeof c&&null!==c)return c}function D(a,b){ya&&b&&b.opacity!==u&&(b.filter="alpha(opacity="+100*b.opacity+")"),r(a.style,b)}function T(a,b,c,d,e){return a=y.createElement(a),b&&r(a,b),e&&D(a,{padding:0,border:Q,margin:0}),c&&D(a,c),d&&d.appendChild(a),a}function ia(a,b){var c=function(){};return c.prototype=new a,r(c.prototype,b),c}function Da(a,b,c,d){var e=G.lang,a=+a||0,f=-1===b?(a.toString().split(".")[1]||"").length:isNaN(b=M(b))?2:b,b=void 0===c?e.decimalPoint:c,d=void 0===d?e.thousandsSep:d,e=0>a?"-":"",c=String(z(a=M(a).toFixed(f))),g=c.length>3?c.length%3:0;return e+(g?c.substr(0,g)+d:"")+c.substr(g).replace(/(\d{3})(?=\d)/g,"$1"+d)+(f?b+M(a-c).toFixed(f).slice(2):"")}function Ea(a,b){return Array((b||2)+1-String(a).length).join(0)+a}function Va(a,b,c){var d=a[b];a[b]=function(){var a=Array.prototype.slice.call(arguments);return a.unshift(d),c.apply(this,a)}}function Fa(a,b){for(var e,f,g,h,i,c="{",d=!1,j=[];-1!==(c=a.indexOf(c));){if(e=a.slice(0,c),d){for(f=e.split(":"),g=f.shift().split("."),i=g.length,e=b,h=0;i>h;h++)e=e[g[h]];f.length&&(f=f.join(":"),g=/\.([0-9])/,h=G.lang,i=void 0,/f$/.test(f)?(i=(i=f.match(g))?i[1]:-1,e=Da(e,i,h.decimalPoint,f.indexOf(",")>-1?h.thousandsSep:"")):e=ab(f,e))}j.push(e),a=a.slice(c+1),c=(d=!d)?"}":"{"}return j.push(a),j.join("")}function mb(a){return P.pow(10,N(P.log(a)/P.LN10))}function nb(a,b,c,d){var e,c=n(c,1);for(e=a/c,b||(b=[1,2,2.5,5,10],d&&d.allowDecimals===!1&&(1===c?b=[1,2,5,10]:.1>=c&&(b=[1/c]))),d=0;d<b.length&&(a=b[d],!(e<=(b[d]+(b[d+1]||b[d]))/2));d++);return a*=c}function Ab(){this.symbol=this.color=0}function ob(a,b){var d,e,c=a.length;for(e=0;c>e;e++)a[e].ss_i=e;for(a.sort(function(a,c){return d=b(a,c),0===d?a.ss_i-c.ss_i:d}),e=0;c>e;e++)delete a[e].ss_i}function La(a){for(var b=a.length,c=a[0];b--;)a[b]<c&&(c=a[b]);return c}function za(a){for(var b=a.length,c=a[0];b--;)a[b]>c&&(c=a[b]);return c}function Ma(a,b){for(var c in a)a[c]&&a[c]!==b&&a[c].destroy&&a[c].destroy(),delete a[c]}function Na(a){bb||(bb=T(Ga)),a&&bb.appendChild(a),bb.innerHTML=""}function ka(a,b){var c="Highcharts error #"+a+": www.highcharts.com/errors/"+a;if(b)throw c;C.console&&console.log(c)}function aa(a){return parseFloat(a.toPrecision(14))}function Oa(a,b){oa=n(a,b.animation)}function Bb(){var a=G.global.useUTC,b=a?"getUTC":"get",c=a?"setUTC":"set";Pa=6e4*(a&&G.global.timezoneOffset||0),cb=a?Date.UTC:function(a,b,c,g,h,i){return new Date(a,b,n(c,1),n(g,0),n(h,0),n(i,0)).getTime()},pb=b+"Minutes",qb=b+"Hours",rb=b+"Day",Wa=b+"Date",db=b+"Month",eb=b+"FullYear",Cb=c+"Minutes",Db=c+"Hours",sb=c+"Date",Eb=c+"Month",Fb=c+"FullYear"}function pa(){}function Qa(a,b,c,d){this.axis=a,this.pos=b,this.type=c||"",this.isNew=!0,!c&&!d&&this.addLabel()}function qa(){this.init.apply(this,arguments)}function Gb(a,b,c,d,e,f){var g=a.chart.inverted;this.axis=a,this.isNegative=c,this.options=b,this.x=d,this.total=null,this.points={},this.stack=e,this.percent="percent"===f,this.alignOptions={align:b.align||(g?c?"left":"right":"center"),verticalAlign:b.verticalAlign||(g?"middle":c?"bottom":"top"),y:n(b.y,g?4:c?14:-6),x:n(b.x,g?c?-6:6:0)},this.textAlign=b.textAlign||(g?c?"right":"left":"center")}function tb(){this.init.apply(this,arguments)}function fb(){this.init.apply(this,arguments)}var u,Ya,bb,G,ab,oa,vb,E,cb,Pa,pb,qb,rb,Wa,db,eb,Cb,Db,sb,Eb,Fb,y=document,C=window,P=Math,w=P.round,N=P.floor,Ha=P.ceil,s=P.max,I=P.min,M=P.abs,U=P.cos,ba=P.sin,Aa=P.PI,Ba=2*Aa/360,ra=navigator.userAgent,Hb=C.opera,ya=/msie/i.test(ra)&&!Hb,gb=8===y.documentMode,hb=/AppleWebKit/.test(ra),Xa=/Firefox/.test(ra),Ib=/(Mobile|Android|Windows Phone)/.test(ra),Ca="http://www.w3.org/2000/svg",V=!!y.createElementNS&&!!y.createElementNS(Ca,"svg").createSVGRect,Nb=Xa&&parseInt(ra.split("Firefox/")[1],10)<4,da=!V&&!ya&&!!y.createElement("canvas").getContext,ib=y.documentElement.ontouchstart!==u,Jb={},ub=0,la=function(){},Ia=[],Ga="div",Q="none",Ob=/^[0-9]+$/,Kb="rgba(192,192,192,"+(V?1e-4:.002)+")",Lb="stroke-width",L={};C.Highcharts=C.Highcharts?ka(16,!0):{},ab=function(a,b,c){if(!t(b)||isNaN(b))return"Invalid date";var e,a=n(a,"%Y-%m-%d %H:%M:%S"),d=new Date(b-Pa),f=d[qb](),g=d[rb](),h=d[Wa](),i=d[db](),j=d[eb](),k=G.lang,l=k.weekdays,d=r({a:l[g].substr(0,3),A:l[g],d:Ea(h),e:h,b:k.shortMonths[i],B:k.months[i],m:Ea(i+1),y:j.toString().substr(2,2),Y:j,H:Ea(f),I:Ea(f%12||12),l:f%12||12,M:Ea(d[pb]()),p:12>f?"AM":"PM",P:12>f?"am":"pm",S:Ea(d.getSeconds()),L:Ea(w(b%1e3),3)},Highcharts.dateFormats);for(e in d)for(;-1!==a.indexOf("%"+e);)a=a.replace("%"+e,"function"==typeof d[e]?d[e](b):d[e]);return c?a.substr(0,1).toUpperCase()+a.substr(1):a},Ab.prototype={wrapColor:function(a){this.color>=a&&(this.color=0)},wrapSymbol:function(a){this.symbol>=a&&(this.symbol=0)}},E=function(){for(var a=0,b=arguments,c=b.length,d={};c>a;a++)d[b[a++]]=b[a];return d}("millisecond",1,"second",1e3,"minute",6e4,"hour",36e5,"day",864e5,"week",6048e5,"month",26784e5,"year",31556952e3),vb={init:function(a,b,c){var g,h,i,b=b||"",d=a.shift,e=b.indexOf("C")>-1,f=e?7:3,b=b.split(" "),c=[].concat(c),j=function(a){for(g=a.length;g--;)"M"===a[g]&&a.splice(g+1,0,a[g+1],a[g+2],a[g+1],a[g+2])};if(e&&(j(b),j(c)),a.isArea&&(h=b.splice(b.length-6,6),i=c.splice(c.length-6,6)),d<=c.length/f&&b.length===c.length)for(;d--;)c=[].concat(c).splice(0,f).concat(c);if(a.shift=0,b.length)for(a=c.length;b.length<a;)d=[].concat(b).splice(b.length-f,f),e&&(d[f-6]=d[f-2],d[f-5]=d[f-1]),b=b.concat(d);return h&&(b=b.concat(h),c=c.concat(i)),[b,c]},step:function(a,b,c,d){var e=[],f=a.length;if(1===c)e=d;else if(f===b.length&&1>c)for(;f--;)d=parseFloat(a[f]),e[f]=isNaN(d)?a[f]:c*parseFloat(b[f]-d)+d;else e=b;return e}},function(a){C.HighchartsAdapter=C.HighchartsAdapter||a&&{init:function(b){var e,c=a.fx,d=c.step,f=a.Tween,g=f&&f.propHooks;e=a.cssHooks.opacity,a.extend(a.easing,{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}}),a.each(["cur","_default","width","height","opacity"],function(a,b){var k,e=d;"cur"===b?e=c.prototype:"_default"===b&&f&&(e=g[b],b="set"),(k=e[b])&&(e[b]=function(c){var d,c=a?c:this;return"align"!==c.prop?(d=c.elem,d.attr?d.attr(c.prop,"cur"===b?u:c.now):k.apply(this,arguments)):void 0})}),Va(e,"get",function(a,b,c){return b.attr?b.opacity||0:a.call(this,b,c)}),e=function(a){var d,c=a.elem;a.started||(d=b.init(c,c.d,c.toD),a.start=d[0],a.end=d[1],a.started=!0),c.attr("d",b.step(a.start,a.end,a.pos,c.toD))},f?g.d={set:e}:d.d=e,this.each=Array.prototype.forEach?function(a,b){return Array.prototype.forEach.call(a,b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(b.call(a[c],a[c],c,a)===!1)return c},a.fn.highcharts=function(){var c,d,a="Chart",b=arguments;return fa(b[0])&&(a=b[0],b=Array.prototype.slice.call(b,1)),c=b[0],c!==u&&(c.chart=c.chart||{},c.chart.renderTo=this[0],new Highcharts[a](c,b[1]),d=this),c===u&&(d=Ia[v(this[0],"data-highcharts-chart")]),d}},getScript:a.getScript,inArray:a.inArray,adapterRun:function(b,c){return a(b)[c]()},grep:a.grep,map:function(a,c){for(var d=[],e=0,f=a.length;f>e;e++)d[e]=c.call(a[e],a[e],e,a);return d},offset:function(b){return a(b).offset()},addEvent:function(b,c,d){a(b).bind(c,d)},removeEvent:function(b,c,d){var e=y.removeEventListener?"removeEventListener":"detachEvent";y[e]&&b&&!b[e]&&(b[e]=function(){}),a(b).unbind(c,d)},fireEvent:function(b,c,d,e){var h,f=a.Event(c),g="detached"+c;!ya&&d&&(delete d.layerX,delete d.layerY),r(f,d),b[c]&&(b[g]=b[c],b[c]=null),a.each(["preventDefault","stopPropagation"],function(a,b){var c=f[b];f[b]=function(){try{c.call(f)}catch(a){"preventDefault"===b&&(h=!0)}}}),a(b).trigger(f),b[g]&&(b[c]=b[g],b[g]=null),e&&!f.isDefaultPrevented()&&!h&&e(f)},washMouseEvent:function(a){var c=a.originalEvent||a;return c.pageX===u&&(c.pageX=a.pageX,c.pageY=a.pageY),c},animate:function(b,c,d){var e=a(b);b.style||(b.style={}),c.d&&(b.toD=c.d,c.d=1),e.stop(),c.opacity!==u&&b.attr&&(c.opacity+="px"),e.animate(c,d)},stop:function(b){a(b).stop()}}}(C.jQuery);var W=C.HighchartsAdapter,J=W||{};W&&W.init.call(W,vb);var jb=J.adapterRun,Pb=J.getScript,sa=J.inArray,p=J.each,wb=J.grep,Qb=J.offset,Ra=J.map,F=J.addEvent,X=J.removeEvent,A=J.fireEvent,Rb=J.washMouseEvent,kb=J.animate,Za=J.stop,J={enabled:!0,x:0,y:15,style:{color:"#666",cursor:"default",fontSize:"11px"}};G={colors:"#2f7ed8,#0d233a,#8bbc21,#910000,#1aadce,#492970,#f28f43,#77a1e5,#c42525,#a6c96a".split(","),symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),shortMonths:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),weekdays:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),decimalPoint:".",numericSymbols:"k,M,G,T,P,E".split(","),resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/3.0.9/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/3.0.9/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#274b6d",fontSize:"16px"}},subtitle:{text:"",align:"center",style:{color:"#4d759e"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{enabled:!0,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:x(J,{align:"center",enabled:!1,formatter:function(){return null===this.y?"":Da(this.y,-1)},verticalAlign:"bottom",y:0}),cropThreshold:300,pointRange:0,states:{hover:{marker:{}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{cursor:"pointer",color:"#274b6d",fontSize:"12px"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"1em"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:V,backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b><br/>',shadow:!0,snap:Ib?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}};var Y=G.plotOptions,W=Y.line;Bb();var Sb=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,Tb=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,Ub=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,ta=function(a){var c,d,b=[];return function(a){a&&a.stops?d=Ra(a.stops,function(a){return ta(a[1])}):(c=Sb.exec(a))?b=[z(c[1]),z(c[2]),z(c[3]),parseFloat(c[4],10)]:(c=Tb.exec(a))?b=[z(c[1],16),z(c[2],16),z(c[3],16),1]:(c=Ub.exec(a))&&(b=[z(c[1]),z(c[2]),z(c[3]),1])}(a),{get:function(c){var f;return d?(f=x(a),f.stops=[].concat(f.stops),p(d,function(a,b){f.stops[b]=[f.stops[b][0],a.get(c)]})):f=b&&!isNaN(b[0])?"rgb"===c?"rgb("+b[0]+","+b[1]+","+b[2]+")":"a"===c?b[3]:"rgba("+b.join(",")+")":a,f},brighten:function(a){if(d)p(d,function(b){b.brighten(a)});else if(wa(a)&&0!==a){var c;for(c=0;3>c;c++)b[c]+=z(255*a),b[c]<0&&(b[c]=0),b[c]>255&&(b[c]=255)}return this},rgba:b,setOpacity:function(a){return b[3]=a,this}}};pa.prototype={init:function(a,b){this.element="span"===b?T(b):y.createElementNS(Ca,b),this.renderer=a,this.attrSetters={}},opacity:1,animate:function(a,b,c){b=n(b,oa,!0),Za(this),b?(b=x(b),c&&(b.complete=c),kb(this,a,b)):(this.attr(a),c&&c())},attr:function(a,b){var c,d,e,f,j,m,q,g=this.element,h=g.nodeName.toLowerCase(),i=this.renderer,k=this.attrSetters,l=this.shadows,o=this;if(fa(a)&&t(b)&&(c=a,a={},a[c]=b),fa(a))c=a,"circle"===h?c={x:"cx",y:"cy"}[c]||c:"strokeWidth"===c&&(c="stroke-width"),o=v(g,c)||this[c]||0,"d"!==c&&"visibility"!==c&&"fill"!==c&&(o=parseFloat(o));else{for(c in a)if(j=!1,d=a[c],e=k[c]&&k[c].call(this,d,c),e!==!1){if(e!==u&&(d=e),"d"===c)d&&d.join&&(d=d.join(" ")),/(NaN| {2}|^$)/.test(d)&&(d="M 0 0");else if("x"===c&&"text"===h)for(e=0;e<g.childNodes.length;e++)f=g.childNodes[e],v(f,"x")===v(g,"x")&&v(f,"x",d);else if(!this.rotation||"x"!==c&&"y"!==c)if("fill"===c)d=i.color(d,g,c);else if("circle"!==h||"x"!==c&&"y"!==c)if("rect"===h&&"r"===c)v(g,{rx:d,ry:d}),j=!0;else if("translateX"===c||"translateY"===c||"rotation"===c||"verticalAlign"===c||"scaleX"===c||"scaleY"===c)j=q=!0;else if("stroke"===c)d=i.color(d,g,c);else if("dashstyle"===c){if(c="stroke-dasharray",d=d&&d.toLowerCase(),"solid"===d)d=Q;
else if(d){for(d=d.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(","),e=d.length;e--;)d[e]=z(d[e])*n(a["stroke-width"],this["stroke-width"]);d=d.join(",")}}else"width"===c?d=z(d):"align"===c?(c="text-anchor",d={left:"start",center:"middle",right:"end"}[d]):"title"===c&&(e=g.getElementsByTagName("title")[0],e||(e=y.createElementNS(Ca,"title"),g.appendChild(e)),e.textContent=d);else c={x:"cx",y:"cy"}[c]||c;else q=!0;if("strokeWidth"===c&&(c="stroke-width"),("stroke-width"===c||"stroke"===c)&&(this[c]=d,this.stroke&&this["stroke-width"]?(v(g,"stroke",this.stroke),v(g,"stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===c&&0===d&&this.hasStroke&&(g.removeAttribute("stroke"),this.hasStroke=!1),j=!0),this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(c)&&(m||(this.symbolAttr(a),m=!0),j=!0),l&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(c))for(e=l.length;e--;)v(l[e],c,"height"===c?s(d-(l[e].cutHeight||0),0):d);("width"===c||"height"===c)&&"rect"===h&&0>d&&(d=0),this[c]=d,"text"===c?(d!==this.textStr&&delete this.bBox,this.textStr=d,this.added&&i.buildText(this)):j||v(g,c,d)}q&&this.updateTransform()}return o},addClass:function(a){var b=this.element,c=v(b,"class")||"";return-1===c.indexOf(a)&&v(b,"class",c+" "+a),this},symbolAttr:function(a){var b=this;p("x,y,r,start,end,width,height,innerR,anchorX,anchorY".split(","),function(c){b[c]=n(a[c],b[c])}),b.attr({d:b.renderer.symbols[b.symbolName](b.x,b.y,b.width,b.height,b)})},clip:function(a){return this.attr("clip-path",a?"url("+this.renderer.url+"#"+a.id+")":Q)},crisp:function(a,b,c,d,e){var f,i,g={},h={},a=a||this.strokeWidth||this.attr&&this.attr("stroke-width")||0;i=w(a)%2/2,h.x=N(b||this.x||0)+i,h.y=N(c||this.y||0)+i,h.width=N((d||this.width||0)-2*i),h.height=N((e||this.height||0)-2*i),h.strokeWidth=a;for(f in h)this[f]!==h[f]&&(this[f]=g[f]=h[f]);return g},css:function(a){var d,b=this.element,c=this.textWidth=a&&a.width&&"text"===b.nodeName.toLowerCase()&&z(a.width),e="",f=function(a,b){return"-"+b.toLowerCase()};if(a&&a.color&&(a.fill=a.color),this.styles=a=r(this.styles,a),c&&delete a.width,ya&&!V)D(this.element,a);else{for(d in a)e+=d.replace(/([A-Z])/g,f)+":"+a[d]+";";v(b,"style",e)}return c&&this.added&&this.renderer.buildText(this),this},on:function(a,b){var c=this,d=c.element;return ib&&"click"===a?(d.ontouchstart=function(a){c.touchEventFired=Date.now(),a.preventDefault(),b.call(d,a)},d.onclick=function(a){(-1===ra.indexOf("Android")||Date.now()-(c.touchEventFired||0)>1100)&&b.call(d,a)}):d["on"+a]=b,this},setRadialReference:function(a){return this.element.radialReference=a,this},translate:function(a,b){return this.attr({translateX:a,translateY:b})},invert:function(){return this.inverted=!0,this.updateTransform(),this},updateTransform:function(){var a=this.translateX||0,b=this.translateY||0,c=this.scaleX,d=this.scaleY,e=this.inverted,f=this.rotation;e&&(a+=this.attr("width"),b+=this.attr("height")),a=["translate("+a+","+b+")"],e?a.push("rotate(90) scale(-1,1)"):f&&a.push("rotate("+f+" "+(this.x||0)+" "+(this.y||0)+")"),(t(c)||t(d))&&a.push("scale("+n(c,1)+" "+n(d,1)+")"),a.length&&v(this.element,"transform",a.join(" "))},toFront:function(){var a=this.element;return a.parentNode.appendChild(a),this},align:function(a,b,c){var d,e,f,g,h={};return e=this.renderer,f=e.alignedObjects,a?(this.alignOptions=a,this.alignByTranslate=b,(!c||fa(c))&&(this.alignTo=d=c||"renderer",ha(f,this),f.push(this),c=null)):(a=this.alignOptions,b=this.alignByTranslate,d=this.alignTo),c=n(c,e[d],e),d=a.align,e=a.verticalAlign,f=(c.x||0)+(a.x||0),g=(c.y||0)+(a.y||0),("right"===d||"center"===d)&&(f+=(c.width-(a.width||0))/{right:1,center:2}[d]),h[b?"translateX":"x"]=w(f),("bottom"===e||"middle"===e)&&(g+=(c.height-(a.height||0))/({bottom:1,middle:2}[e]||1)),h[b?"translateY":"y"]=w(g),this[this.placed?"animate":"attr"](h),this.placed=!0,this.alignAttr=h,this},getBBox:function(){var c,d,a=this.bBox,b=this.renderer,e=this.rotation;c=this.element;var f=this.styles,g=e*Ba;d=this.textStr;var h;if((""===d||Ob.test(d))&&(h=d.length+"|"+f.fontSize+"|"+f.fontFamily,a=b.cache[h]),!a){if(c.namespaceURI===Ca||b.forExport){try{a=c.getBBox?r({},c.getBBox()):{width:c.offsetWidth,height:c.offsetHeight}}catch(i){}(!a||a.width<0)&&(a={width:0,height:0})}else a=this.htmlGetBBox();b.isSVG&&(c=a.width,d=a.height,ya&&f&&"11px"===f.fontSize&&"16.9"===d.toPrecision(3)&&(a.height=d=14),e&&(a.width=M(d*ba(g))+M(c*U(g)),a.height=M(d*U(g))+M(c*ba(g)))),this.bBox=a,h&&(b.cache[h]=a)}return a},show:function(){return this.attr({visibility:"visible"})},hide:function(){return this.attr({visibility:"hidden"})},fadeOut:function(a){var b=this;b.animate({opacity:0},{duration:a||150,complete:function(){b.hide()}})},add:function(a){var h,b=this.renderer,c=a||b,d=c.element||b.box,e=d.childNodes,f=this.element,g=v(f,"zIndex");if(a&&(this.parentGroup=a),this.parentInverted=a&&a.inverted,void 0!==this.textStr&&b.buildText(this),g&&(c.handleZ=!0,g=z(g)),c.handleZ)for(c=0;c<e.length;c++)if(a=e[c],b=v(a,"zIndex"),a!==f&&(z(b)>g||!t(g)&&t(b))){d.insertBefore(f,a),h=!0;break}return h||d.appendChild(f),this.added=!0,A(this,"add"),this},safeRemoveChild:function(a){var b=a.parentNode;b&&b.removeChild(a)},destroy:function(){var e,f,a=this,b=a.element||{},c=a.shadows,d=a.renderer.isSVG&&"SPAN"===b.nodeName&&a.parentGroup;if(b.onclick=b.onmouseout=b.onmouseover=b.onmousemove=b.point=null,Za(a),a.clipPath&&(a.clipPath=a.clipPath.destroy()),a.stops){for(f=0;f<a.stops.length;f++)a.stops[f]=a.stops[f].destroy();a.stops=null}for(a.safeRemoveChild(b),c&&p(c,function(b){a.safeRemoveChild(b)});d&&0===d.div.childNodes.length;)b=d.parentGroup,a.safeRemoveChild(d.div),delete d.div,d=b;a.alignTo&&ha(a.renderer.alignedObjects,a);for(e in a)delete a[e];return null},shadow:function(a,b,c){var e,f,h,i,j,k,d=[],g=this.element;if(a){for(i=n(a.width,3),j=(a.opacity||.15)/i,k=this.parentInverted?"(-1,-1)":"("+n(a.offsetX,1)+", "+n(a.offsetY,1)+")",e=1;i>=e;e++)f=g.cloneNode(0),h=2*i+1-2*e,v(f,{isShadow:"true",stroke:a.color||"black","stroke-opacity":j*e,"stroke-width":h,transform:"translate"+k,fill:Q}),c&&(v(f,"height",s(v(f,"height")-h,0)),f.cutHeight=h),b?b.element.appendChild(f):g.parentNode.insertBefore(f,g),d.push(f);this.shadows=d}return this}};var ua=function(){this.init.apply(this,arguments)};ua.prototype={Element:pa,init:function(a,b,c,d){var f,g,e=location;f=this.createElement("svg").attr({version:"1.1"}),g=f.element,a.appendChild(g),-1===a.innerHTML.indexOf("xmlns")&&v(g,"xmlns",Ca),this.isSVG=!0,this.box=g,this.boxWrapper=f,this.alignedObjects=[],this.url=(Xa||hb)&&y.getElementsByTagName("base").length?e.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(y.createTextNode("Created with Highcharts 3.0.9")),this.defs=this.createElement("defs").add(),this.forExport=d,this.gradients={},this.cache={},this.setSize(b,c,!1);var h;Xa&&a.getBoundingClientRect&&(this.subPixelFix=b=function(){D(a,{left:0,top:0}),h=a.getBoundingClientRect(),D(a,{left:Ha(h.left)-h.left+"px",top:Ha(h.top)-h.top+"px"})},b(),F(C,"resize",b))},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var a=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),Ma(this.gradients||{}),this.gradients=null,a&&(this.defs=a.destroy()),this.subPixelFix&&X(C,"resize",this.subPixelFix),this.alignedObjects=null},createElement:function(a){var b=new this.Element;return b.init(this,a),b},draw:function(){},buildText:function(a){for(var b=a.element,c=this,d=c.forExport,e=n(a.textStr,"").toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g),f=b.childNodes,g=/style="([^"]+)"/,h=/href="(http[^"]+)"/,i=v(b,"x"),j=a.styles,k=a.textWidth,l=j&&j.lineHeight,m=f.length,q=function(a){return l?z(l):c.fontMetrics(/px$/.test(a&&a.style.fontSize)?a.style.fontSize:j.fontSize||11).h};m--;)b.removeChild(f[m]);k&&!a.added&&this.box.appendChild(b),""===e[e.length-1]&&e.pop(),p(e,function(e,f){var l,m=0,e=e.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");l=e.split("|||"),p(l,function(e){if(""!==e||1===l.length){var p,o={},n=y.createElementNS(Ca,"tspan");if(g.test(e)&&(p=e.match(g)[1].replace(/(;| |^)color([ :])/,"$1fill$2"),v(n,"style",p)),h.test(e)&&!d&&(v(n,"onclick",'location.href="'+e.match(h)[1]+'"'),D(n,{cursor:"pointer"})),e=(e.replace(/<(.|\n)*?>/g,"")||" ").replace(/&lt;/g,"<").replace(/&gt;/g,">")," "!==e&&(n.appendChild(y.createTextNode(e)),m?o.dx=0:o.x=i,v(n,o),!m&&f&&(!V&&d&&D(n,{display:"block"}),v(n,"dy",q(n),hb&&n.offsetHeight)),b.appendChild(n),m++,k))for(var t,s,e=e.replace(/([^\^])-/g,"$1- ").split(" "),o=e.length>1&&"nowrap"!==j.whiteSpace,w=a._clipHeight,u=[],r=q(),$=1;o&&(e.length||u.length);)delete a.bBox,t=a.getBBox(),s=t.width,!V&&c.forExport&&(s=c.measureSpanWidth(n.firstChild.data,a.styles)),t=s>k,t&&1!==e.length?(n.removeChild(n.firstChild),u.unshift(e.pop())):(e=u,u=[],e.length&&($++,w&&$*r>w?(e=["..."],a.attr("title",a.textStr)):(n=y.createElementNS(Ca,"tspan"),v(n,{dy:r,x:i}),p&&v(n,"style",p),b.appendChild(n),s>k&&(k=s)))),e.length&&n.appendChild(y.createTextNode(e.join(" ").replace(/- /g,"-")))}})})},button:function(a,b,c,d,e,f,g,h,i){var l,m,q,o,n,p,j=this.label(a,b,c,i,null,null,null,null,"button"),k=0,a={x1:0,y1:0,x2:0,y2:1},e=x({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:a,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},e);return q=e.style,delete e.style,f=x(e,{stroke:"#68A",fill:{linearGradient:a,stops:[[0,"#FFF"],[1,"#ACF"]]}},f),o=f.style,delete f.style,g=x(e,{stroke:"#68A",fill:{linearGradient:a,stops:[[0,"#9BD"],[1,"#CDF"]]}},g),n=g.style,delete g.style,h=x(e,{style:{color:"#CCC"}},h),p=h.style,delete h.style,F(j.element,ya?"mouseover":"mouseenter",function(){3!==k&&j.attr(f).css(o)}),F(j.element,ya?"mouseout":"mouseleave",function(){3!==k&&(l=[e,f,g][k],m=[q,o,n][k],j.attr(l).css(m))}),j.setState=function(a){(j.state=k=a)?2===a?j.attr(g).css(n):3===a&&j.attr(h).css(p):j.attr(e).css(q)},j.on("click",function(){3!==k&&d.call(j)}).attr(e).css(r({cursor:"default"},q))},crispLine:function(a,b){return a[1]===a[4]&&(a[1]=a[4]=w(a[1])-b%2/2),a[2]===a[5]&&(a[2]=a[5]=w(a[2])+b%2/2),a},path:function(a){var b={fill:Q};return Ka(a)?b.d=a:S(a)&&r(b,a),this.createElement("path").attr(b)},circle:function(a,b,c){return a=S(a)?a:{x:a,y:b,r:c},this.createElement("circle").attr(a)},arc:function(a,b,c,d,e,f){return S(a)&&(b=a.y,c=a.r,d=a.innerR,e=a.start,f=a.end,a=a.x),a=this.symbol("arc",a||0,b||0,c||0,c||0,{innerR:d||0,start:e||0,end:f||0}),a.r=c,a},rect:function(a,b,c,d,e,f){return e=S(a)?a.r:e,e=this.createElement("rect").attr({rx:e,ry:e,fill:Q}),e.attr(S(a)?a:e.crisp(f,a,b,s(c,0),s(d,0)))},setSize:function(a,b,c){var d=this.alignedObjects,e=d.length;for(this.width=a,this.height=b,this.boxWrapper[n(c,!0)?"animate":"attr"]({width:a,height:b});e--;)d[e].align()},g:function(a){var b=this.createElement("g");return t(a)?b.attr({"class":"highcharts-"+a}):b},image:function(a,b,c,d,e){var f={preserveAspectRatio:Q};return arguments.length>1&&r(f,{x:b,y:c,width:d,height:e}),f=this.createElement("image").attr(f),f.element.setAttributeNS?f.element.setAttributeNS("http://www.w3.org/1999/xlink","href",a):f.element.setAttribute("hc-svg-href",a),f},symbol:function(a,b,c,d,e,f){var g,j,k,h=this.symbols[a],h=h&&h(w(b),w(c),d,e,f),i=/^url\((.*?)\)$/;return h?(g=this.path(h),r(g,{symbolName:a,x:b,y:c,width:d,height:e}),f&&r(g,f)):i.test(a)&&(k=function(a,b){a.element&&(a.attr({width:b[0],height:b[1]}),a.alignByTranslate||a.translate(w((d-b[0])/2),w((e-b[1])/2)))},j=a.match(i)[1],a=Jb[j],g=this.image(j).attr({x:b,y:c}),g.isImg=!0,a?k(g,a):(g.attr({width:0,height:0}),T("img",{onload:function(){k(g,Jb[j]=[this.width,this.height])},src:j}))),g},symbols:{circle:function(a,b,c,d){var e=.166*c;return["M",a+c/2,b,"C",a+c+e,b,a+c+e,b+d,a+c/2,b+d,"C",a-e,b+d,a-e,b,a+c/2,b,"Z"]},square:function(a,b,c,d){return["M",a,b,"L",a+c,b,a+c,b+d,a,b+d,"Z"]},triangle:function(a,b,c,d){return["M",a+c/2,b,"L",a+c,b+d,a,b+d,"Z"]},"triangle-down":function(a,b,c,d){return["M",a,b,"L",a+c,b,a+c/2,b+d,"Z"]},diamond:function(a,b,c,d){return["M",a+c/2,b,"L",a+c,b+d/2,a+c/2,b+d,a,b+d/2,"Z"]},arc:function(a,b,c,d,e){var f=e.start,c=e.r||c||d,g=e.end-.001,d=e.innerR,h=e.open,i=U(f),j=ba(f),k=U(g),g=ba(g),e=e.end-f<Aa?0:1;return["M",a+c*i,b+c*j,"A",c,c,0,e,1,a+c*k,b+c*g,h?"M":"L",a+d*k,b+d*g,"A",d,d,0,e,0,a+d*i,b+d*j,h?"":"Z"]}},clipRect:function(a,b,c,d){var e="highcharts-"+ub++,f=this.createElement("clipPath").attr({id:e}).add(this.defs),a=this.rect(a,b,c,d,0).add(f);return a.id=e,a.clipPath=f,a},color:function(a,b,c){var e,g,h,i,j,k,l,m,d=this,f=/^rgba/,q=[];if(a&&a.linearGradient?g="linearGradient":a&&a.radialGradient&&(g="radialGradient"),g){c=a[g],h=d.gradients,j=a.stops,b=b.radialReference,Ka(c)&&(a[g]=c={x1:c[0],y1:c[1],x2:c[2],y2:c[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===g&&b&&!t(c.gradientUnits)&&(c=x(c,{cx:b[0]-b[2]/2+c.cx*b[2],cy:b[1]-b[2]/2+c.cy*b[2],r:c.r*b[2],gradientUnits:"userSpaceOnUse"}));for(m in c)"id"!==m&&q.push(m,c[m]);for(m in j)q.push(j[m]);return q=q.join(","),h[q]?a=h[q].id:(c.id=a="highcharts-"+ub++,h[q]=i=d.createElement(g).attr(c).add(d.defs),i.stops=[],p(j,function(a){f.test(a[1])?(e=ta(a[1]),k=e.get("rgb"),l=e.get("a")):(k=a[1],l=1),a=d.createElement("stop").attr({offset:a[0],"stop-color":k,"stop-opacity":l}).add(i),i.stops.push(a)})),"url("+d.url+"#"+a+")"}return f.test(a)?(e=ta(a),v(b,c+"-opacity",e.get("a")),e.get("rgb")):(b.removeAttribute(c+"-opacity"),a)},text:function(a,b,c,d){var e=G.chart.style,f=da||!V&&this.forExport;return d&&!this.forExport?this.html(a,b,c):(b=w(n(b,0)),c=w(n(c,0)),a=this.createElement("text").attr({x:b,y:c,text:a}).css({fontFamily:e.fontFamily,fontSize:e.fontSize}),f&&a.css({position:"absolute"}),a.x=b,a.y=c,a)},fontMetrics:function(a){var a=z(a||11),a=24>a?a+4:w(1.2*a),b=w(.8*a);return{h:a,b:b}},label:function(a,b,c,d,e,f,g,h,i){function j(){var a,b;a=n.element.style,va=(void 0===Z||void 0===Sa||o.styles.textAlign)&&n.getBBox(),o.width=(Z||va.width||0)+2*ea+lb,o.height=(Sa||va.height||0)+2*ea,$=ea+q.fontMetrics(a&&a.fontSize).b,y&&(H||(a=w(-s*ea),b=h?-$:0,o.box=H=d?q.symbol(d,a,b,o.width,o.height,v):q.rect(a,b,o.width,o.height,0,v[Lb]),H.add(o)),H.isImg||H.attr(x({width:o.width,height:o.height},v)),v=null)}function k(){var c,a=o.styles,a=a&&a.textAlign,b=lb+ea*(1-s);c=h?0:$,!t(Z)||"center"!==a&&"right"!==a||(b+={center:.5,right:1}[a]*(Z-va.width)),(b!==n.x||c!==n.y)&&n.attr({x:b,y:c}),n.x=b,n.y=c}function l(a,b){H?H.attr(a,b):v[a]=b}function m(){n.add(o),o.attr({text:a,x:b,y:c}),H&&t(e)&&o.attr({anchorX:e,anchorY:f})}var H,va,Z,Sa,Ta,K,$,y,q=this,o=q.g(i),n=q.text("",0,0,g).attr({zIndex:1}),s=0,ea=3,lb=0,B=0,v={},g=o.attrSetters;F(o,"add",m),g.width=function(a){return Z=a,!1},g.height=function(a){return Sa=a,!1},g.padding=function(a){return t(a)&&a!==ea&&(ea=a,k()),!1},g.paddingLeft=function(a){return t(a)&&a!==lb&&(lb=a,k()),!1},g.align=function(a){return s={left:0,center:.5,right:1}[a],!1},g.text=function(a,b){return n.attr(b,a),j(),k(),!1},g[Lb]=function(a,b){return y=!0,B=a%2/2,l(b,a),!1},g.stroke=g.fill=g.r=function(a,b){return"fill"===b&&(y=!0),l(b,a),!1},g.anchorX=function(a,b){return e=a,l(b,a+B-Ta),!1},g.anchorY=function(a,b){return f=a,l(b,a-K),!1},g.x=function(a){return o.x=a,a-=s*((Z||va.width)+ea),Ta=w(a),o.attr("translateX",Ta),!1},g.y=function(a){return K=o.y=w(a),o.attr("translateY",K),!1};var z=o.css;return r(o,{css:function(a){if(a){var b={},a=x(a);p("fontSize,fontWeight,fontFamily,color,lineHeight,width,textDecoration,textShadow".split(","),function(c){a[c]!==u&&(b[c]=a[c],delete a[c])}),n.css(b)}return z.call(o,a)},getBBox:function(){return{width:va.width+2*ea,height:va.height+2*ea,x:va.x-ea,y:va.y-ea}},shadow:function(a){return H&&H.shadow(a),o},destroy:function(){X(o,"add",m),X(o.element,"mouseenter"),X(o.element,"mouseleave"),n&&(n=n.destroy()),H&&(H=H.destroy()),pa.prototype.destroy.call(o),o=q=j=k=l=m=null}})}},Ya=ua,r(pa.prototype,{htmlCss:function(a){var b=this.element;return(b=a&&"SPAN"===b.tagName&&a.width)&&(delete a.width,this.textWidth=b,this.updateTransform()),this.styles=r(this.styles,a),D(this.element,a),this},htmlGetBBox:function(){var a=this.element,b=this.bBox;return b||("text"===a.nodeName&&(a.style.position="absolute"),b=this.bBox={x:a.offsetLeft,y:a.offsetTop,width:a.offsetWidth,height:a.offsetHeight}),b},htmlUpdateTransform:function(){if(this.added){var a=this.renderer,b=this.element,c=this.translateX||0,d=this.translateY||0,e=this.x||0,f=this.y||0,g=this.textAlign||"left",h={left:0,center:.5,right:1}[g],i=this.shadows;if(D(b,{marginLeft:c,marginTop:d}),i&&p(i,function(a){D(a,{marginLeft:c+1,marginTop:d+1})}),this.inverted&&p(b.childNodes,function(c){a.invertChild(c,b)}),"SPAN"===b.tagName){var k,j=this.rotation,l=z(this.textWidth),m=[j,g,b.innerHTML,this.textWidth].join(",");m!==this.cTT&&(k=a.fontMetrics(b.style.fontSize).b,t(j)&&this.setSpanRotation(j,h,k),i=n(this.elemWidth,b.offsetWidth),i>l&&/[ \-]/.test(b.textContent||b.innerText)&&(D(b,{width:l+"px",display:"block",whiteSpace:"normal"}),i=l),this.getSpanCorrection(i,k,h,j,g)),D(b,{left:e+(this.xCorr||0)+"px",top:f+(this.yCorr||0)+"px"}),hb&&(k=b.offsetHeight),this.cTT=m}}else this.alignOnAdd=!0},setSpanRotation:function(a,b,c){var d={},e=ya?"-ms-transform":hb?"-webkit-transform":Xa?"MozTransform":Hb?"-o-transform":"";d[e]=d.transform="rotate("+a+"deg)",d[e+(Xa?"Origin":"-origin")]=100*b+"% "+c+"px",D(this.element,d)},getSpanCorrection:function(a,b,c){this.xCorr=-a*c,this.yCorr=-b}}),r(ua.prototype,{html:function(a,b,c){var d=G.chart.style,e=this.createElement("span"),f=e.attrSetters,g=e.element,h=e.renderer;return f.text=function(a){return a!==g.innerHTML&&delete this.bBox,g.innerHTML=a,!1},f.x=f.y=f.align=f.rotation=function(a,b){return"align"===b&&(b="textAlign"),e[b]=a,e.htmlUpdateTransform(),!1},e.attr({text:a,x:w(b),y:w(c)}).css({position:"absolute",whiteSpace:"nowrap",fontFamily:d.fontFamily,fontSize:d.fontSize}),e.css=e.htmlCss,h.isSVG&&(e.add=function(a){var b,c=h.box.parentNode,d=[];if(this.parentGroup=a){if(b=a.div,!b){for(;a;)d.push(a),a=a.parentGroup;p(d.reverse(),function(a){var d;b=a.div=a.div||T(Ga,{className:v(a.element,"class")},{position:"absolute",left:(a.translateX||0)+"px",top:(a.translateY||0)+"px"},b||c),d=b.style,r(a.attrSetters,{translateX:function(a){d.left=a+"px"},translateY:function(a){d.top=a+"px"},visibility:function(a,b){d[b]=a}})})}}else b=c;return b.appendChild(g),e.added=!0,e.alignOnAdd&&e.htmlUpdateTransform(),e}),e}});var R;if(!V&&!da){Highcharts.VMLElement=R={init:function(a,b){var c=["<",b,' filled="f" stroked="f"'],d=["position: ","absolute",";"],e=b===Ga;("shape"===b||e)&&d.push("left:0;top:0;width:1px;height:1px;"),d.push("visibility: ",e?"hidden":"visible"),c.push(' style="',d.join(""),'"/>'),b&&(c=e||"span"===b||"img"===b?c.join(""):a.prepVML(c),this.element=T(c)),this.renderer=a,this.attrSetters={}},add:function(a){var b=this.renderer,c=this.element,d=b.box,d=a?a.element||a:d;return a&&a.inverted&&b.invertChild(c,d),d.appendChild(c),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),A(this,"add"),this},updateTransform:pa.prototype.htmlUpdateTransform,setSpanRotation:function(){var a=this.rotation,b=U(a*Ba),c=ba(a*Ba);D(this.element,{filter:a?["progid:DXImageTransform.Microsoft.Matrix(M11=",b,", M12=",-c,", M21=",c,", M22=",b,", sizingMethod='auto expand')"].join(""):Q})},getSpanCorrection:function(a,b,c,d,e){var i,f=d?U(d*Ba):1,g=d?ba(d*Ba):0,h=n(this.elemHeight,this.element.offsetHeight);this.xCorr=0>f&&-a,this.yCorr=0>g&&-h,i=0>f*g,this.xCorr+=g*b*(i?1-c:c),this.yCorr-=f*b*(d?i?c:1-c:1),e&&"left"!==e&&(this.xCorr-=a*c*(0>f?-1:1),d&&(this.yCorr-=h*c*(0>g?-1:1)),D(this.element,{textAlign:e}))},pathToVML:function(a){for(var b=a.length,c=[];b--;)wa(a[b])?c[b]=w(10*a[b])-5:"Z"===a[b]?c[b]="x":(c[b]=a[b],!a.isArc||"wa"!==a[b]&&"at"!==a[b]||(c[b+5]===c[b+7]&&(c[b+7]+=a[b+7]>a[b+5]?1:-1),c[b+6]===c[b+8]&&(c[b+8]+=a[b+8]>a[b+6]?1:-1)));return c.join(" ")||"x"},attr:function(a,b){var c,d,e,k,m,f=this.element||{},g=f.style,h=f.nodeName,i=this.renderer,j=this.symbolName,l=this.shadows,q=this.attrSetters,o=this;if(fa(a)&&t(b)&&(c=a,a={},a[c]=b),fa(a))c=a,o="strokeWidth"===c||"stroke-width"===c?this.strokeweight:this[c];else for(c in a)if(d=a[c],m=!1,e=q[c]&&q[c].call(this,d,c),e!==!1&&null!==d){if(e!==u&&(d=e),j&&/^(x|y|r|start|end|width|height|innerR|anchorX|anchorY)/.test(c))k||(this.symbolAttr(a),k=!0),m=!0;else if("d"===c){if(d=d||[],this.d=d.join(" "),f.path=d=this.pathToVML(d),l)for(e=l.length;e--;)l[e].path=l[e].cutOff?this.cutOffPath(d,l[e].cutOff):d;m=!0}else if("visibility"===c){if(l)for(e=l.length;e--;)l[e].style[c]=d;"DIV"===h&&(d="hidden"===d?"-999em":0,gb||(g[c]=d?"visible":"hidden"),c="top"),g[c]=d,m=!0}else"zIndex"===c?(d&&(g[c]=d),m=!0):-1!==sa(c,["x","y","width","height"])?(this[c]=d,"x"===c||"y"===c?c={x:"left",y:"top"}[c]:d=s(0,d),this.updateClipping?(this[c]=d,this.updateClipping()):g[c]=d,m=!0):"class"===c&&"DIV"===h?f.className=d:"stroke"===c?(d=i.color(d,f,c),c="strokecolor"):"stroke-width"===c||"strokeWidth"===c?(f.stroked=d?!0:!1,c="strokeweight",this[c]=d,wa(d)&&(d+="px")):"dashstyle"===c?((f.getElementsByTagName("stroke")[0]||T(i.prepVML(["<stroke/>"]),null,null,f))[c]=d||"solid",this.dashstyle=d,m=!0):"fill"===c?"SPAN"===h?g.color=d:"IMG"!==h&&(f.filled=d!==Q?!0:!1,d=i.color(d,f,c,this),c="fillcolor"):"opacity"===c?m=!0:"shape"===h&&"rotation"===c?(this[c]=f.style[c]=d,f.style.left=-w(ba(d*Ba)+1)+"px",f.style.top=w(U(d*Ba))+"px"):("translateX"===c||"translateY"===c||"rotation"===c)&&(this[c]=d,this.updateTransform(),m=!0);m||(gb?f[c]=d:v(f,c,d))}return o},clip:function(a){var c,b=this;return a?(c=a.members,ha(c,b),c.push(b),b.destroyClip=function(){ha(c,b)},a=a.getCSS(b)):(b.destroyClip&&b.destroyClip(),a={clip:gb?"inherit":"rect(auto)"}),b.css(a)},css:pa.prototype.htmlCss,safeRemoveChild:function(a){a.parentNode&&Na(a)},destroy:function(){return this.destroyClip&&this.destroyClip(),pa.prototype.destroy.apply(this)},on:function(a,b){return this.element["on"+a]=function(){var a=C.event;a.target=a.srcElement,b(a)},this},cutOffPath:function(a,b){var c,a=a.split(/[ ,]/);return c=a.length,(9===c||11===c)&&(a[c-4]=a[c-2]=z(a[c-2])-10*b),a.join(" ")},shadow:function(a,b,c){var e,h,j,l,m,q,o,d=[],f=this.element,g=this.renderer,i=f.style,k=f.path;if(k&&"string"!=typeof k.value&&(k="x"),m=k,a){for(q=n(a.width,3),o=(a.opacity||.15)/q,e=1;3>=e;e++)l=2*q+1-2*e,c&&(m=this.cutOffPath(k.value,l+.5)),j=['<shape isShadow="true" strokeweight="',l,'" filled="false" path="',m,'" coordsize="10 10" style="',f.style.cssText,'" />'],h=T(g.prepVML(j),null,{left:z(i.left)+n(a.offsetX,1),top:z(i.top)+n(a.offsetY,1)}),c&&(h.cutOff=l+1),j=['<stroke color="',a.color||"black",'" opacity="',o*e,'"/>'],T(g.prepVML(j),null,null,h),b?b.element.appendChild(h):f.parentNode.insertBefore(h,f),d.push(h);this.shadows=d}return this}},R=ia(pa,R);var xb={Element:R,isIE8:ra.indexOf("MSIE 8.0")>-1,init:function(a,b,c){var d,e;if(this.alignedObjects=[],d=this.createElement(Ga),e=d.element,e.style.position="relative",a.appendChild(d.element),this.isVML=!0,this.box=e,this.boxWrapper=d,this.cache={},this.setSize(b,c,!1),!y.namespaces.hcv){y.namespaces.add("hcv","urn:schemas-microsoft-com:vml");try{y.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}catch(f){y.styleSheets[0].cssText+="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } "}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(a,b,c,d){var e=this.createElement(),f=S(a);return r(e,{members:[],left:(f?a.x:a)+1,top:(f?a.y:b)+1,width:(f?a.width:c)-1,height:(f?a.height:d)-1,getCSS:function(a){var b=a.element,c=b.nodeName,a=a.inverted,d=this.top-("shape"===c?b.offsetTop:0),e=this.left,b=e+this.width,f=d+this.height,d={clip:"rect("+w(a?e:d)+"px,"+w(a?f:b)+"px,"+w(a?b:f)+"px,"+w(a?d:e)+"px)"};return!a&&gb&&"DIV"===c&&r(d,{width:b+"px",height:f+"px"}),d},updateClipping:function(){p(e.members,function(a){a.css(e.getCSS(a))})}})},color:function(a,b,c,d){var f,h,i,e=this,g=/^rgba/,j=Q;if(a&&a.linearGradient?i="gradient":a&&a.radialGradient&&(i="pattern"),i){var k,l,q,o,n,H,s,u,m=a.linearGradient||a.radialGradient,t="",a=a.stops,w=[],r=function(){h=['<fill colors="'+w.join(",")+'" opacity="',n,'" o:opacity2="',o,'" type="',i,'" ',t,'focus="100%" method="any" />'],T(e.prepVML(h),null,null,b)};if(q=a[0],u=a[a.length-1],q[0]>0&&a.unshift([0,q[1]]),u[0]<1&&a.push([1,u[1]]),p(a,function(a,b){g.test(a[1])?(f=ta(a[1]),k=f.get("rgb"),l=f.get("a")):(k=a[1],l=1),w.push(100*a[0]+"% "+k),b?(n=l,H=k):(o=l,s=k)}),"fill"===c)if("gradient"===i)c=m.x1||m[0]||0,a=m.y1||m[1]||0,q=m.x2||m[2]||0,m=m.y2||m[3]||0,t='angle="'+(90-180*P.atan((m-a)/(q-c))/Aa)+'"',r();else{var $,j=m.r,Sa=2*j,Ta=2*j,v=m.cx,B=m.cy,x=b.radialReference,j=function(){x&&($=d.getBBox(),v+=(x[0]-$.x)/$.width-.5,B+=(x[1]-$.y)/$.height-.5,Sa*=x[2]/$.width,Ta*=x[2]/$.height),t='src="'+G.global.VMLRadialGradientURL+'" size="'+Sa+","+Ta+'" origin="0.5,0.5" position="'+v+","+B+'" color2="'+s+'" ',r()};d.added?j():F(d,"add",j),j=H}else j=k}else g.test(a)&&"IMG"!==b.tagName?(f=ta(a),h=["<",c,' opacity="',f.get("a"),'"/>'],T(this.prepVML(h),null,null,b),j=f.get("rgb")):(j=b.getElementsByTagName(c),j.length&&(j[0].opacity=1,j[0].type="solid"),j=a);return j},prepVML:function(a){var b=this.isIE8,a=a.join("");return b?(a=a.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />'),a=-1===a.indexOf('style="')?a.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):a.replace('style="','style="display:inline-block;behavior:url(#default#VML);')):a=a.replace("<","<hcv:"),a},text:ua.prototype.html,path:function(a){var b={coordsize:"10 10"};return Ka(a)?b.d=a:S(a)&&r(b,a),this.createElement("shape").attr(b)},circle:function(a,b,c){var d=this.symbol("circle");return S(a)&&(c=a.r,b=a.y,a=a.x),d.isCircle=!0,d.r=c,d.attr({x:a,y:b})},g:function(a){var b;return a&&(b={className:"highcharts-"+a,"class":"highcharts-"+a}),this.createElement(Ga).attr(b)},image:function(a,b,c,d,e){var f=this.createElement("img").attr({src:a});return arguments.length>1&&f.attr({x:b,y:c,width:d,height:e}),f},rect:function(a,b,c,d,e,f){var g=this.symbol("rect");return g.r=S(a)?a.r:e,g.attr(S(a)?a:g.crisp(f,a,b,s(c,0),s(d,0)))},invertChild:function(a,b){var c=b.style;D(a,{flip:"x",left:z(c.width)-1,top:z(c.height)-1,rotation:-90})},symbols:{arc:function(a,b,c,d,e){var f=e.start,g=e.end,h=e.r||c||d,c=e.innerR,d=U(f),i=ba(f),j=U(g),k=ba(g);return g-f===0?["x"]:(f=["wa",a-h,b-h,a+h,b+h,a+h*d,b+h*i,a+h*j,b+h*k],e.open&&!c&&f.push("e","M",a,b),f.push("at",a-c,b-c,a+c,b+c,a+c*j,b+c*k,a+c*d,b+c*i,"x","e"),f.isArc=!0,f)},circle:function(a,b,c,d,e){return e&&(c=d=2*e.r),e&&e.isCircle&&(a-=c/2,b-=d/2),["wa",a,b,a+c,b+d,a+c,b+d/2,a+c,b+d/2,"e"]},rect:function(a,b,c,d,e){var h,f=a+c,g=b+d;return t(e)&&e.r?(h=I(e.r,c,d),f=["M",a+h,b,"L",f-h,b,"wa",f-2*h,b,f,b+2*h,f-h,b,f,b+h,"L",f,g-h,"wa",f-2*h,g-2*h,f,g,f,g-h,f-h,g,"L",a+h,g,"wa",a,g-2*h,a+2*h,g,a+h,g,a,g-h,"L",a,b+h,"wa",a,b,a+2*h,b+2*h,a,b+h,a+h,b,"x","e"]):f=ua.prototype.symbols.square.apply(0,arguments),f}}};Highcharts.VMLRenderer=R=function(){this.init.apply(this,arguments)},R.prototype=x(ua.prototype,xb),Ya=R}ua.prototype.measureSpanWidth=function(a,b){var d,c=y.createElement("span");return d=y.createTextNode(a),c.appendChild(d),D(c,b),this.box.appendChild(c),d=c.offsetWidth,Na(c),d};var Mb;da&&(Highcharts.CanVGRenderer=R=function(){Ca="http://www.w3.org/1999/xhtml"},R.prototype.symbols={},Mb=function(){function a(){var d,a=b.length;for(d=0;a>d;d++)b[d]();b=[]}var b=[];return{push:function(c,d){0===b.length&&Pb(d,a),b.push(c)}}}(),Ya=R),Qa.prototype={addLabel:function(){var l,a=this.axis,b=a.options,c=a.chart,d=a.horiz,e=a.categories,f=a.names,g=this.pos,h=b.labels,i=a.tickPositions,d=d&&e&&!h.step&&!h.staggerLines&&!h.rotation&&c.plotWidth/i.length||!d&&(c.margin[3]||.33*c.chartWidth),j=g===i[0],k=g===i[i.length-1],f=e?n(e[g],f[g],g):g,e=this.label,m=i.info;a.isDatetimeAxis&&m&&(l=b.dateTimeLabelFormats[m.higherRanks[g]||m.unitName]),this.isFirst=j,this.isLast=k,b=a.labelFormatter.call({axis:a,chart:c,isFirst:j,isLast:k,dateTimeLabelFormat:l,value:a.isLog?aa(ga(f)):f}),g=d&&{width:s(1,w(d-2*(h.padding||10)))+"px"},g=r(g,h.style),t(e)?e&&e.attr({text:b}).css(g):(l={align:a.labelAlign},wa(h.rotation)&&(l.rotation=h.rotation),d&&h.ellipsis&&(l._clipHeight=a.len/i.length),this.label=t(b)&&h.enabled?c.renderer.text(b,0,0,h.useHTML).attr(l).css(g).add(a.labelGroup):null)},getLabelSize:function(){var a=this.label,b=this.axis;return a?a.getBBox()[b.horiz?"height":"width"]:0},getLabelSides:function(){var a=this.label.getBBox(),b=this.axis,c=b.horiz,d=b.options.labels,a=c?a.width:a.height,b=c?a*{left:0,center:.5,right:1}[b.labelAlign]-d.x:a;return[-b,a-b]},handleOverflow:function(a,b){var B,c=!0,d=this.axis,e=this.isFirst,f=this.isLast,g=d.horiz?b.x:b.y,h=d.reversed,i=d.tickPositions,j=this.getLabelSides(),k=j[0],j=j[1],l=d.pos,m=l+d.len,q=this.label.line||0,o=d.labelEdge,n=d.justifyLabels&&(e||f);return o[q]===u||g+k>o[q]?o[q]=g+j:n||(c=!1),n&&(B=(d=d.ticks[i[a+(e?1:-1)]])&&d.label.xy&&d.label.xy.x+d.getLabelSides()[e?0:1],i=B,e&&!h||f&&h?l>g+k&&(g=l-k,d&&g+j>i&&(c=!1)):g+j>m&&(g=m-j,d&&i>g+k&&(c=!1)),b.x=g),c},getPosition:function(a,b,c,d){var e=this.axis,f=e.chart,g=d&&f.oldChartHeight||f.chartHeight;return{x:a?e.translate(b+c,null,null,d)+e.transB:e.left+e.offset+(e.opposite?(d&&f.oldChartWidth||f.chartWidth)-e.right-e.left:0),y:a?g-e.bottom+e.offset-(e.opposite?e.height:0):g-e.translate(b+c,null,null,d)-e.transB}},getLabelPosition:function(a,b,c,d,e,f,g,h){var i=this.axis,j=i.transA,k=i.reversed,l=i.staggerLines,m=i.chart.renderer.fontMetrics(e.style.fontSize).b,q=e.rotation,a=a+e.x-(f&&d?f*j*(k?-1:1):0),b=b+e.y-(f&&!d?f*j*(k?1:-1):0);return q&&2===i.side&&(b-=m-m*U(q*Ba)),!t(e.y)&&!q&&(b+=m-c.getBBox().height/2),l&&(c.line=g/(h||1)%l,b+=c.line*(i.labelOffset/l)),{x:a,y:b}},getMarkPath:function(a,b,c,d,e,f){return f.crispLine(["M",a,b,"L",a+(e?0:-c),b+(e?c:0)],d)},render:function(a,b,c){var d=this.axis,e=d.options,f=d.chart.renderer,g=d.horiz,h=this.type,i=this.label,j=this.pos,k=e.labels,l=this.gridLine,m=h?h+"Grid":"grid",q=h?h+"Tick":"tick",o=e[m+"LineWidth"],p=e[m+"LineColor"],H=e[m+"LineDashStyle"],s=e[q+"Length"],m=e[q+"Width"]||0,t=e[q+"Color"],w=e[q+"Position"],q=this.mark,r=k.step,Z=!0,x=d.tickmarkOffset,v=this.getPosition(g,j,x,b),y=v.x,v=v.y,B=g&&y===d.pos+d.len||!g&&v===d.pos?-1:1;this.isActive=!0,o&&(j=d.getPlotLinePath(j+x,o*B,b,!0),l===u&&(l={stroke:p,"stroke-width":o},H&&(l.dashstyle=H),h||(l.zIndex=1),b&&(l.opacity=0),this.gridLine=l=o?f.path(j).attr(l).add(d.gridGroup):null),!b&&l&&j&&l[this.isNew?"attr":"animate"]({d:j,opacity:c})),m&&s&&("inside"===w&&(s=-s),d.opposite&&(s=-s),h=this.getMarkPath(y,v,s,m*B,g,f),q?q.animate({d:h,opacity:c}):this.mark=f.path(h).attr({stroke:t,"stroke-width":m,opacity:c}).add(d.axisGroup)),i&&!isNaN(y)&&(i.xy=v=this.getLabelPosition(y,v,i,g,k,x,a,r),this.isFirst&&!this.isLast&&!n(e.showFirstLabel,1)||this.isLast&&!this.isFirst&&!n(e.showLastLabel,1)?Z=!1:!d.isRadial&&!k.step&&!k.rotation&&!b&&0!==c&&(Z=this.handleOverflow(a,v)),r&&a%r&&(Z=!1),Z&&!isNaN(v.y)?(v.opacity=c,i[this.isNew?"attr":"animate"](v),this.isNew=!1):i.attr("y",-9999))},destroy:function(){Ma(this,this.axis)}};var yb=function(a,b){this.axis=a,b&&(this.options=b,this.id=b.id)};yb.prototype={render:function(){var p,a=this,b=a.axis,c=b.horiz,d=(b.pointRange||0)/2,e=a.options,f=e.label,g=a.label,h=e.width,i=e.to,j=e.from,k=t(j)&&t(i),l=e.value,m=e.dashStyle,q=a.svgElem,o=[],H=e.color,w=e.zIndex,r=e.events,u=b.chart.renderer;
if(b.isLog&&(j=xa(j),i=xa(i),l=xa(l)),h)o=b.getPlotLinePath(l,h),d={stroke:H,"stroke-width":h},m&&(d.dashstyle=m);else{if(!k)return;j=s(j,b.min-d),i=I(i,b.max+d),o=b.getPlotBandPath(j,i,e),d={fill:H},e.borderWidth&&(d.stroke=e.borderColor,d["stroke-width"]=e.borderWidth)}if(t(w)&&(d.zIndex=w),q)o?q.animate({d:o},null,q.onGetPath):(q.hide(),q.onGetPath=function(){q.show()},g&&(a.label=g=g.destroy()));else if(o&&o.length&&(a.svgElem=q=u.path(o).attr(d).add(),r))for(p in e=function(b){q.on(b,function(c){r[b].apply(a,[c])})},r)e(p);return f&&t(f.text)&&o&&o.length&&b.width>0&&b.height>0?(f=x({align:c&&k&&"center",x:c?!k&&4:10,verticalAlign:!c&&k&&"middle",y:c?k?16:10:k?6:-4,rotation:c&&!k&&90},f),g||(a.label=g=u.text(f.text,0,0,f.useHTML).attr({align:f.textAlign||f.align,rotation:f.rotation,zIndex:w}).css(f.style).add()),b=[o[1],o[4],n(o[6],o[1])],o=[o[2],o[5],n(o[7],o[2])],c=La(b),k=La(o),g.align(f,!1,{x:c,y:k,width:za(b)-c,height:za(o)-k}),g.show()):g&&g.hide(),a},destroy:function(){ha(this.axis.plotLinesAndBands,this),delete this.axis,Ma(this)}},qa.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#C0C0C0",labels:J,lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",style:{color:"#4d759e",fontWeight:"bold"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,tickWidth:0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return Da(this.total,-1)},style:J.style}},defaultLeftAxisOptions:{labels:{x:-8,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:8,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{x:0,y:14},title:{rotation:0}},defaultTopAxisOptions:{labels:{x:0,y:-5},title:{rotation:0}},init:function(a,b){var c=b.isX;this.horiz=a.inverted?!c:c,this.coll=(this.isXAxis=c)?"xAxis":"yAxis",this.opposite=b.opposite,this.side=b.side||(this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(b);var d=this.options,e=d.type;this.labelFormatter=d.labels.formatter||this.defaultLabelFormatter,this.userOptions=b,this.minPixelPadding=0,this.chart=a,this.reversed=d.reversed,this.zoomEnabled=d.zoomEnabled!==!1,this.categories=d.categories||"category"===e,this.names=[],this.isLog="logarithmic"===e,this.isDatetimeAxis="datetime"===e,this.isLinked=t(d.linkedTo),this.tickmarkOffset=this.categories&&"between"===d.tickmarkPlacement?.5:0,this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=d.minRange||d.maxZoom,this.range=d.range,this.offset=d.offset||0,this.stacks={},this.oldStacks={},this.stackExtremes={},this.min=this.max=null,this.crosshair=n(d.crosshair,ja(a.options.tooltip.crosshairs)[c?0:1],!1);var f,d=this.options.events;-1===sa(this,a.axes)&&(a.axes.push(this),a[this.coll].push(this)),this.series=this.series||[],a.inverted&&c&&this.reversed===u&&(this.reversed=!0),this.removePlotLine=this.removePlotBand=this.removePlotBandOrLine;for(f in d)F(this,f,d[f]);this.isLog&&(this.val2lin=xa,this.lin2val=ga)},setOptions:function(a){this.options=x(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],x(G[this.coll],a))},defaultLabelFormatter:function(){var g,a=this.axis,b=this.value,c=a.categories,d=this.dateTimeLabelFormat,e=G.lang.numericSymbols,f=e&&e.length,h=a.options.labels.format,a=a.isLog?b:a.tickInterval;if(h)g=Fa(h,this);else if(c)g=b;else if(d)g=ab(d,b);else if(f&&a>=1e3)for(;f--&&g===u;)c=Math.pow(1e3,f+1),a>=c&&null!==e[f]&&(g=Da(b/c,-1)+e[f]);return g===u&&(g=b>=1e4?Da(b,0):Da(b,-1,u,"")),g},getSeriesExtremes:function(){var a=this,b=a.chart;a.hasVisibleSeries=!1,a.dataMin=a.dataMax=null,a.stackExtremes={},a.buildStacks(),p(a.series,function(c){if(c.visible||!b.options.chart.ignoreHiddenSeries){var d;d=c.options.threshold;var e;a.hasVisibleSeries=!0,a.isLog&&0>=d&&(d=null),a.isXAxis?(d=c.xData,d.length&&(a.dataMin=I(n(a.dataMin,d[0]),La(d)),a.dataMax=s(n(a.dataMax,d[0]),za(d)))):(c.getExtremes(),e=c.dataMax,c=c.dataMin,t(c)&&t(e)&&(a.dataMin=I(n(a.dataMin,c),c),a.dataMax=s(n(a.dataMax,e),e)),t(d)&&(a.dataMin>=d?(a.dataMin=d,a.ignoreMinPadding=!0):a.dataMax<d&&(a.dataMax=d,a.ignoreMaxPadding=!0)))}})},translate:function(a,b,c,d,e,f){var g=this.len,h=1,i=0,j=d?this.oldTransA:this.transA,d=d?this.oldMin:this.min,k=this.minPixelPadding,e=(this.options.ordinal||this.isLog&&e)&&this.lin2val;return j||(j=this.transA),c&&(h*=-1,i=g),this.reversed&&(h*=-1,i-=h*g),b?(a=a*h+i,a-=k,a=a/j+d,e&&(a=this.lin2val(a))):(e&&(a=this.val2lin(a)),"between"===f&&(f=.5),a=h*(a-d)*j+i+h*k+(wa(f)?j*f*this.pointRange:0)),a},toPixels:function(a,b){return this.translate(a,!1,!this.horiz,null,!0)+(b?0:this.pos)},toValue:function(a,b){return this.translate(a-(b?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(a,b,c,d,e){var i,j,m,f=this.chart,g=this.left,h=this.top,k=c&&f.oldChartHeight||f.chartHeight,l=c&&f.oldChartWidth||f.chartWidth;return i=this.transB,e=n(e,this.translate(a,null,null,c)),a=c=w(e+i),i=j=w(k-e-i),isNaN(e)?m=!0:this.horiz?(i=h,j=k-this.bottom,(g>a||a>g+this.width)&&(m=!0)):(a=g,c=l-this.right,(h>i||i>h+this.height)&&(m=!0)),m&&!d?null:f.renderer.crispLine(["M",a,i,"L",c,j],b||1)},getLinearTickPositions:function(a,b,c){for(var d,b=aa(N(b/a)*a),c=aa(Ha(c/a)*a),e=[];c>=b&&(e.push(b),b=aa(b+a),b!==d);)d=b;return e},getMinorTickPositions:function(){var e,a=this.options,b=this.tickPositions,c=this.minorTickInterval,d=[];if(this.isLog)for(e=b.length,a=1;e>a;a++)d=d.concat(this.getLogTickPositions(c,b[a-1],b[a],!0));else if(this.isDatetimeAxis&&"auto"===a.minorTickInterval)d=d.concat(this.getTimeTicks(this.normalizeTimeTickInterval(c),this.min,this.max,a.startOfWeek)),d[0]<this.min&&d.shift();else for(b=this.min+(b[0]-this.min)%c;b<=this.max;b+=c)d.push(b);return d},adjustForMinRange:function(){var d,f,g,h,i,j,a=this.options,b=this.min,c=this.max,e=this.dataMax-this.dataMin>=this.minRange;if(this.isXAxis&&this.minRange===u&&!this.isLog&&(t(a.min)||t(a.max)?this.minRange=null:(p(this.series,function(a){for(i=a.xData,g=j=a.xIncrement?1:i.length-1;g>0;g--)h=i[g]-i[g-1],(f===u||f>h)&&(f=h)}),this.minRange=I(5*f,this.dataMax-this.dataMin))),c-b<this.minRange){var k=this.minRange;d=(k-c+b)/2,d=[b-d,n(a.min,b-d)],e&&(d[2]=this.dataMin),b=za(d),c=[b+k,n(a.max,b+k)],e&&(c[2]=this.dataMax),c=La(c),k>c-b&&(d[0]=c-k,d[1]=n(a.min,c-k),b=za(d))}this.min=b,this.max=c},setAxisTranslation:function(a){var d,b=this.max-this.min,c=0,e=0,f=0,g=this.linkedParent,h=!!this.categories,i=this.transA;(this.isXAxis||h)&&(g?(e=g.minPointOffset,f=g.pointRangePadding):p(this.series,function(a){var g=s(a.pointRange,+h),i=a.options.pointPlacement,m=a.closestPointRange;g>b&&(g=0),c=s(c,g),e=s(e,fa(i)?0:g/2),f=s(f,"on"===i?0:g),!a.noSharedTooltip&&t(m)&&(d=t(d)?I(d,m):m)}),g=this.ordinalSlope&&d?this.ordinalSlope/d:1,this.minPointOffset=e*=g,this.pointRangePadding=f*=g,this.pointRange=I(c,b),this.closestPointRange=d),a&&(this.oldTransA=i),this.translationSlope=this.transA=i=this.len/(b+f||1),this.transB=this.horiz?this.left:this.bottom,this.minPixelPadding=i*e},setTickPositions:function(a){var o,b=this,c=b.chart,d=b.options,e=b.isLog,f=b.isDatetimeAxis,g=b.isXAxis,h=b.isLinked,i=b.options.tickPositioner,j=d.maxPadding,k=d.minPadding,l=d.tickInterval,m=d.minTickInterval,q=d.tickPixelInterval,ma=b.categories;h?(b.linkedParent=c[b.coll][d.linkedTo],c=b.linkedParent.getExtremes(),b.min=n(c.min,c.dataMin),b.max=n(c.max,c.dataMax),d.type!==b.linkedParent.options.type&&ka(11,1)):(b.min=n(b.userMin,d.min,b.dataMin),b.max=n(b.userMax,d.max,b.dataMax)),e&&(!a&&I(b.min,n(b.dataMin,b.min))<=0&&ka(10,1),b.min=aa(xa(b.min)),b.max=aa(xa(b.max))),b.range&&t(b.max)&&(b.userMin=b.min=s(b.min,b.max-b.range),b.userMax=b.max,b.range=null),b.beforePadding&&b.beforePadding(),b.adjustForMinRange(),!ma&&!b.usePercentage&&!h&&t(b.min)&&t(b.max)&&(c=b.max-b.min)&&(t(d.min)||t(b.userMin)||!k||!(b.dataMin<0)&&b.ignoreMinPadding||(b.min-=c*k),t(d.max)||t(b.userMax)||!j||!(b.dataMax>0)&&b.ignoreMaxPadding||(b.max+=c*j)),b.min===b.max||void 0===b.min||void 0===b.max?b.tickInterval=1:h&&!l&&q===b.linkedParent.options.tickPixelInterval?b.tickInterval=b.linkedParent.tickInterval:(b.tickInterval=n(l,ma?1:(b.max-b.min)*q/s(b.len,q)),!t(l)&&b.len<q&&!this.isRadial&&!ma&&d.startOnTick&&d.endOnTick&&(o=!0,b.tickInterval/=4)),g&&!a&&p(b.series,function(a){a.processData(b.min!==b.oldMin||b.max!==b.oldMax)}),b.setAxisTranslation(!0),b.beforeSetTickPositions&&b.beforeSetTickPositions(),b.postProcessTickInterval&&(b.tickInterval=b.postProcessTickInterval(b.tickInterval)),b.pointRange&&(b.tickInterval=s(b.pointRange,b.tickInterval)),!l&&b.tickInterval<m&&(b.tickInterval=m),f||e||l||(b.tickInterval=nb(b.tickInterval,null,mb(b.tickInterval),d)),b.minorTickInterval="auto"===d.minorTickInterval&&b.tickInterval?b.tickInterval/5:d.minorTickInterval,b.tickPositions=a=d.tickPositions?[].concat(d.tickPositions):i&&i.apply(b,[b.min,b.max]),a||(!b.ordinalPositions&&(b.max-b.min)/b.tickInterval>s(2*b.len,200)&&ka(19,!0),a=f?b.getTimeTicks(b.normalizeTimeTickInterval(b.tickInterval,d.units),b.min,b.max,d.startOfWeek,b.ordinalPositions,b.closestPointRange,!0):e?b.getLogTickPositions(b.tickInterval,b.min,b.max):b.getLinearTickPositions(b.tickInterval,b.min,b.max),o&&a.splice(1,a.length-2),b.tickPositions=a),h||(e=a[0],f=a[a.length-1],h=b.minPointOffset||0,d.startOnTick?b.min=e:b.min-h>e&&a.shift(),d.endOnTick?b.max=f:b.max+h<f&&a.pop(),1===a.length&&(b.min-=.001,b.max+=.001))},setMaxTicks:function(){var a=this.chart,b=a.maxTicks||{},c=this.tickPositions,d=this._maxTicksKey=[this.coll,this.pos,this.len].join("-");!this.isLinked&&!this.isDatetimeAxis&&c&&c.length>(b[d]||0)&&this.options.alignTicks!==!1&&(b[d]=c.length),a.maxTicks=b},adjustTickAmount:function(){var a=this._maxTicksKey,b=this.tickPositions,c=this.chart.maxTicks;if(c&&c[a]&&!this.isDatetimeAxis&&!this.categories&&!this.isLinked&&this.options.alignTicks!==!1&&this.min!==u){var d=this.tickAmount,e=b.length;if(this.tickAmount=a=c[a],a>e){for(;b.length<a;)b.push(aa(b[b.length-1]+this.tickInterval));this.transA*=(e-1)/(a-1),this.max=b[b.length-1]}t(d)&&a!==d&&(this.isDirty=!0)}},setScale:function(){var b,c,d,e,a=this.stacks;if(this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),e=this.len!==this.oldAxisLength,p(this.series,function(a){(a.isDirtyData||a.isDirty||a.xAxis.isDirty)&&(d=!0)}),e||d||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax){if(!this.isXAxis)for(b in a)for(c in a[b])a[b][c].total=null,a[b][c].cum=0;this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickPositions(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=e||this.min!==this.oldMin||this.max!==this.oldMax)}else if(!this.isXAxis){this.oldStacks&&(a=this.stacks=this.oldStacks);for(b in a)for(c in a[b])a[b][c].cum=a[b][c].total}this.setMaxTicks()},setExtremes:function(a,b,c,d,e){var f=this,g=f.chart,c=n(c,!0),e=r(e,{min:a,max:b});A(f,"setExtremes",e,function(){f.userMin=a,f.userMax=b,f.eventArgs=e,f.isDirtyExtremes=!0,c&&g.redraw(d)})},zoom:function(a,b){return this.allowZoomOutside||(t(this.dataMin)&&a<=this.dataMin&&(a=u),t(this.dataMax)&&b>=this.dataMax&&(b=u)),this.displayBtn=a!==u||b!==u,this.setExtremes(a,b,!1,u,{trigger:"zoom"}),!0},setAxisSize:function(){var f,g,a=this.chart,b=this.options,c=b.offsetLeft||0,d=b.offsetRight||0,e=this.horiz;this.left=g=n(b.left,a.plotLeft+c),this.top=f=n(b.top,a.plotTop),this.width=c=n(b.width,a.plotWidth-c+d),this.height=b=n(b.height,a.plotHeight),this.bottom=a.chartHeight-b-f,this.right=a.chartWidth-c-g,this.len=s(e?c:b,0),this.pos=e?g:f},getExtremes:function(){var a=this.isLog;return{min:a?aa(ga(this.min)):this.min,max:a?aa(ga(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(a){var b=this.isLog,c=b?ga(this.min):this.min,b=b?ga(this.max):this.max;return c>a||null===a?a=c:a>b&&(a=b),this.translate(a,0,1,0,1)},autoLabelAlign:function(a){return a=(n(a,0)-90*this.side+720)%360,a>15&&165>a?"right":a>195&&345>a?"left":"center"},getOffset:function(){var j,l,v,y,z,K,B,a=this,b=a.chart,c=b.renderer,d=a.options,e=a.tickPositions,f=a.ticks,g=a.horiz,h=a.side,i=b.inverted?[1,0,3,2][h]:h,k=0,m=0,q=d.title,o=d.labels,ma=0,H=b.axisOffset,w=b.clipOffset,r=[-1,1,1,-1][h],x=1,Z=n(o.maxStaggerLines,5);if(a.hasData=j=a.hasVisibleSeries||t(a.min)&&t(a.max)&&!!e,a.showAxis=b=j||n(d.showEmpty,!0),a.staggerLines=a.horiz&&o.staggerLines,a.axisGroup||(a.gridGroup=c.g("grid").attr({zIndex:d.gridZIndex||1}).add(),a.axisGroup=c.g("axis").attr({zIndex:d.zIndex||2}).add(),a.labelGroup=c.g("axis-labels").attr({zIndex:o.zIndex||7}).add()),j||a.isLinked){if(a.labelAlign=n(o.align||a.autoLabelAlign(o.rotation)),p(e,function(b){f[b]?f[b].addLabel():f[b]=new Qa(a,b)}),a.horiz&&!a.staggerLines&&Z&&!o.rotation){for(v=a.reversed?[].concat(e).reverse():e;Z>x;){for(j=[],y=!1,o=0;o<v.length;o++)z=v[o],K=(K=f[z].label&&f[z].label.getBBox())?K.width:0,B=o%x,K&&(z=a.translate(z),j[B]!==u&&z<j[B]&&(y=!0),j[B]=z+K);if(!y)break;x++}x>1&&(a.staggerLines=x)}p(e,function(b){(0===h||2===h||{1:"left",3:"right"}[h]===a.labelAlign)&&(ma=s(f[b].getLabelSize(),ma))}),a.staggerLines&&(ma*=a.staggerLines,a.labelOffset=ma)}else for(v in f)f[v].destroy(),delete f[v];q&&q.text&&q.enabled!==!1&&(a.axisTitle||(a.axisTitle=c.text(q.text,0,0,q.useHTML).attr({zIndex:7,rotation:q.rotation||0,align:q.textAlign||{low:"left",middle:"center",high:"right"}[q.align]}).css(q.style).add(a.axisGroup),a.axisTitle.isNew=!0),b&&(k=a.axisTitle.getBBox()[g?"height":"width"],m=n(q.margin,g?5:10),l=q.offset),a.axisTitle[b?"show":"hide"]()),a.offset=r*n(d.offset,H[h]),a.axisTitleMargin=n(l,ma+m+(2!==h&&ma&&r*d.labels[g?"y":"x"])),H[h]=s(H[h],a.axisTitleMargin+k+r*a.offset),w[i]=s(w[i],2*N(d.lineWidth/2))},getLinePath:function(a){var b=this.chart,c=this.opposite,d=this.offset,e=this.horiz,f=this.left+(c?this.width:0)+d,d=b.chartHeight-this.bottom-(c?this.height:0)+d;return c&&(a*=-1),b.renderer.crispLine(["M",e?this.left:f,e?d:this.top,"L",e?b.chartWidth-this.right:f,e?d:b.chartHeight-this.bottom],a)},getTitlePosition:function(){var a=this.horiz,b=this.left,c=this.top,d=this.len,e=this.options.title,f=a?b:c,g=this.opposite,h=this.offset,i=z(e.style.fontSize||12),d={low:f+(a?0:d),middle:f+d/2,high:f+(a?d:0)}[e.align],b=(a?c+this.height:b)+(a?1:-1)*(g?-1:1)*this.axisTitleMargin+(2===this.side?i:0);return{x:a?d:b+(g?this.width:0)+h+(e.x||0),y:a?b-(g?this.height:0)+h:d+(e.y||0)}},render:function(){var j,y,K,a=this,b=a.horiz,c=a.reversed,d=a.chart,e=d.renderer,f=a.options,g=a.isLog,h=a.isLinked,i=a.tickPositions,k=a.axisTitle,l=a.stacks,m=a.ticks,q=a.minorTicks,o=a.alternateBands,n=f.stackLabels,H=f.alternateGridColor,s=a.tickmarkOffset,r=f.lineWidth,w=d.hasRendered&&t(a.oldMin)&&!isNaN(a.oldMin),v=a.hasData,x=a.showAxis,z=a.justifyLabels=!a.staggerLines&&b&&"justify"===f.labels.overflow;if(a.labelEdge.length=0,p([m,q,o],function(a){for(var b in a)a[b].isActive=!1}),(v||h)&&(a.minorTickInterval&&!a.categories&&p(a.getMinorTickPositions(),function(b){q[b]||(q[b]=new Qa(a,b,"minor")),w&&q[b].isNew&&q[b].render(null,!0),q[b].render(null,!1,1)}),i.length&&(j=i.slice(),(b&&c||!b&&!c)&&j.reverse(),z&&(j=j.slice(1).concat([j[0]])),p(j,function(b,c){z&&(c=c===j.length-1?0:c+1),(!h||b>=a.min&&b<=a.max)&&(m[b]||(m[b]=new Qa(a,b)),w&&m[b].isNew&&m[b].render(c,!0,.1),m[b].render(c,!1,1))}),s&&0===a.min&&(m[-1]||(m[-1]=new Qa(a,-1,null,!0)),m[-1].render(-1))),H&&p(i,function(b,c){c%2===0&&b<a.max&&(o[b]||(o[b]=new yb(a)),y=b+s,K=i[c+1]!==u?i[c+1]+s:a.max,o[b].options={from:g?ga(y):y,to:g?ga(K):K,color:H},o[b].render(),o[b].isActive=!0)}),a._addedPlotLB||(p((f.plotLines||[]).concat(f.plotBands||[]),function(b){a.addPlotBandOrLine(b)}),a._addedPlotLB=!0)),p([m,q,o],function(a){var b,c,e=[],f=oa?oa.duration||500:0,g=function(){for(c=e.length;c--;)a[e[c]]&&!a[e[c]].isActive&&(a[e[c]].destroy(),delete a[e[c]])};for(b in a)a[b].isActive||(a[b].render(b,!1,0),a[b].isActive=!1,e.push(b));a!==o&&d.hasRendered&&f?f&&setTimeout(g,f):g()}),r&&(b=a.getLinePath(r),a.axisLine?a.axisLine.animate({d:b}):a.axisLine=e.path(b).attr({stroke:f.lineColor,"stroke-width":r,zIndex:7}).add(a.axisGroup),a.axisLine[x?"show":"hide"]()),k&&x&&(k[k.isNew?"attr":"animate"](a.getTitlePosition()),k.isNew=!1),n&&n.enabled){var B,A,f=a.stackTotalGroup;f||(a.stackTotalGroup=f=e.g("stack-labels").attr({visibility:"visible",zIndex:6}).add()),f.translate(d.plotLeft,d.plotTop);for(B in l)for(A in e=l[B])e[A].render(f)}a.isDirty=!1},redraw:function(){var a=this.chart.pointer;a.reset&&a.reset(!0),this.render(),p(this.plotLinesAndBands,function(a){a.render()}),p(this.series,function(a){a.isDirty=!0})},buildStacks:function(){var a=this.series,b=a.length;if(!this.isXAxis){for(;b--;)a[b].setStackedPoints();if(this.usePercentage)for(b=0;b<a.length;b++)a[b].setPercentStacks()}},destroy:function(a){var d,b=this,c=b.stacks,e=b.plotLinesAndBands;a||X(b);for(d in c)Ma(c[d]),c[d]=null;for(p([b.ticks,b.minorTicks,b.alternateBands],function(a){Ma(a)}),a=e.length;a--;)e[a].destroy();p("stackTotalGroup,axisLine,axisTitle,axisGroup,cross,gridGroup,labelGroup".split(","),function(a){b[a]&&(b[a]=b[a].destroy())}),this.cross&&this.cross.destroy()},drawCrosshair:function(a,b){if(this.crosshair)if((t(b)||!n(this.crosshair.snap,!0))===!1)this.hideCrosshair();else{var c,d=this.crosshair,e=d.animation;n(d.snap,!0)?t(b)&&(c=this.chart.inverted!=this.horiz?b.plotX:this.len-b.plotY):c=this.horiz?a.chartX-this.pos:this.len-a.chartY+this.pos,c=this.isRadial?this.getPlotLinePath(this.isXAxis?b.x:n(b.stackY,b.y)):this.getPlotLinePath(null,null,null,null,c),null===c?this.hideCrosshair():this.cross?this.cross.attr({visibility:"visible"})[e?"animate":"attr"]({d:c},e):(e={"stroke-width":d.width||1,stroke:d.color||"#C0C0C0",zIndex:d.zIndex||2},d.dashStyle&&(e.dashstyle=d.dashStyle),this.cross=this.chart.renderer.path(c).attr(e).add())}},hideCrosshair:function(){this.cross&&this.cross.hide()}},r(qa.prototype,{getPlotBandPath:function(a,b){var c=this.getPlotLinePath(b),d=this.getPlotLinePath(a);return d&&c?d.push(c[4],c[5],c[1],c[2]):d=null,d},addPlotBand:function(a){this.addPlotBandOrLine(a,"plotBands")},addPlotLine:function(a){this.addPlotBandOrLine(a,"plotLines")},addPlotBandOrLine:function(a,b){var c=new yb(this,a).render(),d=this.userOptions;return c&&(b&&(d[b]=d[b]||[],d[b].push(a)),this.plotLinesAndBands.push(c)),c},removePlotBandOrLine:function(a){for(var b=this.plotLinesAndBands,c=this.options,d=this.userOptions,e=b.length;e--;)b[e].id===a&&b[e].destroy();p([c.plotLines||[],d.plotLines||[],c.plotBands||[],d.plotBands||[]],function(b){for(e=b.length;e--;)b[e].id===a&&ha(b,b[e])})}}),qa.prototype.getLogTickPositions=function(a,b,c,d){var e=this.options,f=this.len,g=[];if(d||(this._minorAutoInterval=null),a>=.5)a=w(a),g=this.getLinearTickPositions(a,b,c);else if(a>=.08)for(var h,i,j,k,l,f=N(b),e=a>.3?[1,2,4]:a>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9];c+1>f&&!l;f++)for(i=e.length,h=0;i>h&&!l;h++)j=xa(ga(f)*e[h]),j>b&&(!d||c>=k)&&g.push(k),k>c&&(l=!0),k=j;else b=ga(b),c=ga(c),a=e[d?"minorTickInterval":"tickInterval"],a=n("auto"===a?null:a,this._minorAutoInterval,(c-b)*(e.tickPixelInterval/(d?5:1))/((d?f/this.tickPositions.length:f)||1)),a=nb(a,null,mb(a)),g=Ra(this.getLinearTickPositions(a,b,c),xa),d||(this._minorAutoInterval=a/5);return d||(this.tickInterval=a),g},qa.prototype.getTimeTicks=function(a,b,c,d){var h,e=[],f={},g=G.global.useUTC,i=new Date(b-Pa),j=a.unitRange,k=a.count;if(t(b)){j>=E.second&&(i.setMilliseconds(0),i.setSeconds(j>=E.minute?0:k*N(i.getSeconds()/k))),j>=E.minute&&i[Cb](j>=E.hour?0:k*N(i[pb]()/k)),j>=E.hour&&i[Db](j>=E.day?0:k*N(i[qb]()/k)),j>=E.day&&i[sb](j>=E.month?1:k*N(i[Wa]()/k)),j>=E.month&&(i[Eb](j>=E.year?0:k*N(i[db]()/k)),h=i[eb]()),j>=E.year&&(h-=h%k,i[Fb](h)),j===E.week&&i[sb](i[Wa]()-i[rb]()+n(d,1)),b=1,Pa&&(i=new Date(i.getTime()+Pa)),h=i[eb]();for(var d=i.getTime(),l=i[db](),m=i[Wa](),q=g?Pa:(864e5+6e4*i.getTimezoneOffset())%864e5;c>d;)e.push(d),j===E.year?d=cb(h+b*k,0):j===E.month?d=cb(h,l+b*k):g||j!==E.day&&j!==E.week?d+=j*k:d=cb(h,l,m+b*k*(j===E.day?1:7)),b++;e.push(d),p(wb(e,function(a){return j<=E.hour&&a%E.day===q}),function(a){f[a]="day"})}return e.info=r(a,{higherRanks:f,totalRange:j*k}),e},qa.prototype.normalizeTimeTickInterval=function(a,b){var g,c=b||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],d=c[c.length-1],e=E[d[0]],f=d[1];for(g=0;g<c.length&&(d=c[g],e=E[d[0]],f=d[1],!(c[g+1]&&a<=(e*f[f.length-1]+E[c[g+1][0]])/2));g++);return e===E.year&&5*e>a&&(f=[1,2,5]),c=nb(a/e,f,"year"===d[0]?s(mb(a/e),1):1),{unitRange:e,count:c,unitName:d[0]}},Gb.prototype={destroy:function(){Ma(this,this.axis)},render:function(a){var b=this.options,c=b.format,c=c?Fa(c,this):b.formatter.call(this);this.label?this.label.attr({text:c,visibility:"hidden"}):this.label=this.axis.chart.renderer.text(c,0,0,b.useHTML).css(b.style).attr({align:this.textAlign,rotation:b.rotation,visibility:"hidden"}).add(a)},setOffset:function(a,b){var c=this.axis,d=c.chart,e=d.inverted,f=this.isNegative,g=c.translate(this.percent?100:this.total,0,0,0,1),c=c.translate(0),c=M(g-c),h=d.xAxis[0].translate(this.x)+a,i=d.plotHeight,f={x:e?f?g:g-c:h,y:e?i-h-b:f?i-g-c:i-g,width:e?c:b,height:e?b:c};(e=this.label)&&(e.align(this.alignOptions,null,f),f=e.alignAttr,e.attr({visibility:this.options.crop===!1||d.isInsidePlot(f.x,f.y)?V?"inherit":"visible":"hidden"}))}},tb.prototype={init:function(a,b){var c=b.borderWidth,d=b.style,e=z(d.padding);this.chart=a,this.options=b,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=a.renderer.label("",0,0,b.shape,null,null,b.useHTML,null,"tooltip").attr({padding:e,fill:b.backgroundColor,"stroke-width":c,r:b.borderRadius,zIndex:8}).css(d).css({padding:0}).add().attr({y:-999}),da||this.label.shadow(b.shadow),this.shared=b.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(a,b,c,d){var e=this,f=e.now,g=e.options.animation!==!1&&!e.isHidden;r(f,{x:g?(2*f.x+a)/3:a,y:g?(f.y+b)/2:b,anchorX:g?(2*f.anchorX+c)/3:c,anchorY:g?(f.anchorY+d)/2:d}),e.label.attr(f),g&&(M(a-f.x)>1||M(b-f.y)>1)&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout(function(){e&&e.move(a,b,c,d)},32))},hide:function(){var b,a=this;clearTimeout(this.hideTimer),this.isHidden||(b=this.chart.hoverPoints,this.hideTimer=setTimeout(function(){a.label.fadeOut(),a.isHidden=!0},n(this.options.hideDelay,500)),b&&p(b,function(a){a.setState()}),this.chart.hoverPoints=null)},getAnchor:function(a,b){var c,i,d=this.chart,e=d.inverted,f=d.plotTop,g=0,h=0,a=ja(a);return c=a[0].tooltipPos,this.followPointer&&b&&(b.chartX===u&&(b=d.pointer.normalize(b)),c=[b.chartX-d.plotLeft,b.chartY-f]),c||(p(a,function(a){i=a.series.yAxis,g+=a.plotX,h+=(a.plotLow?(a.plotLow+a.plotHigh)/2:a.plotY)+(!e&&i?i.top-f:0)}),g/=a.length,h/=a.length,c=[e?d.plotWidth-h:g,this.shared&&!e&&a.length>1&&b?b.chartY-f:e?d.plotHeight-g:h]),Ra(c,w)},getPosition:function(a,b,c){var l,d=this.chart,e=d.plotLeft,f=d.plotTop,g=d.plotWidth,h=d.plotHeight,i=n(this.options.distance,12),j=c.plotX,c=c.plotY,d=j+e+(d.inverted?i:-a-i),k=c-b+f+15;return 7>d&&(d=e+s(j,0)+i),d+a>e+g&&(d-=d+a-(e+g),k=c-b+f-i,l=!0),f+5>k&&(k=f+5,l&&c>=k&&k+b>=c&&(k=c+f+i)),k+b>f+h&&(k=s(f,f+h-b-i)),{x:d,y:k}},defaultFormatter:function(a){var d,b=this.points||ja(this),c=b[0].series;return d=[c.tooltipHeaderFormatter(b[0])],p(b,function(a){c=a.series,d.push(c.tooltipFormatter&&c.tooltipFormatter(a)||a.point.tooltipFormatter(c.tooltipOptions.pointFormat))}),d.push(a.options.footerFormat||""),d.join("")},refresh:function(a,b){var f,g,i,c=this.chart,d=this.label,e=this.options,h={},j=[];i=e.formatter||this.defaultFormatter;var k,h=c.hoverPoints,l=this.shared;clearTimeout(this.hideTimer),this.followPointer=ja(a)[0].series.tooltipOptions.followPointer,g=this.getAnchor(a,b),f=g[0],g=g[1],!l||a.series&&a.series.noSharedTooltip?h=a.getLabelConfig():(c.hoverPoints=a,h&&p(h,function(a){a.setState()}),p(a,function(a){a.setState("hover"),j.push(a.getLabelConfig())}),h={x:a[0].category,y:a[0].y},h.points=j,a=a[0]),i=i.call(h,this),h=a.series,i===!1?this.hide():(this.isHidden&&(Za(d),d.attr("opacity",1).show()),d.attr({text:i}),k=e.borderColor||a.color||h.color||"#606060",d.attr({stroke:k}),this.updatePosition({plotX:f,plotY:g}),this.isHidden=!1),A(c,"tooltipRefresh",{text:i,x:f+c.plotLeft,y:g+c.plotTop,borderColor:k})},updatePosition:function(a){var b=this.chart,c=this.label,c=(this.options.positioner||this.getPosition).call(this,c.width,c.height,a);this.move(w(c.x),w(c.y),a.plotX+b.plotLeft,a.plotY+b.plotTop)}};var $a=Highcharts.Pointer=function(a,b){this.init(a,b)};if($a.prototype={init:function(a,b){var f,c=b.chart,d=c.events,e=da?"":c.zoomType,c=a.inverted;this.options=b,this.chart=a,this.zoomX=f=/x/.test(e),this.zoomY=e=/y/.test(e),this.zoomHor=f&&!c||e&&c,this.zoomVert=e&&!c||f&&c,this.runChartClick=d&&!!d.click,this.pinchDown=[],this.lastValidTouch={},b.tooltip.enabled&&(a.tooltip=new tb(a,b.tooltip)),this.setDOMEvents()},normalize:function(a,b){var c,d,a=a||C.event;return a.target||(a.target=a.srcElement),a=Rb(a),d=a.touches?a.touches.item(0):a,b||(this.chartPosition=b=Qb(this.chart.container)),d.pageX===u?(c=s(a.x,a.clientX-b.left),d=a.y):(c=d.pageX-b.left,d=d.pageY-b.top),r(a,{chartX:w(c),chartY:w(d)})},getCoordinates:function(a){var b={xAxis:[],yAxis:[]};return p(this.chart.axes,function(c){b[c.isXAxis?"xAxis":"yAxis"].push({axis:c,value:c.toValue(a[c.horiz?"chartX":"chartY"])})}),b},getIndex:function(a){var b=this.chart;return b.inverted?b.plotHeight+b.plotTop-a.chartY:a.chartX-b.plotLeft},runPointActions:function(a){var f,g,j,k,b=this,c=b.chart,d=c.series,e=c.tooltip,h=c.hoverPoint,i=c.hoverSeries,l=c.chartWidth,m=b.getIndex(a);if(e&&b.options.tooltip.shared&&(!i||!i.noSharedTooltip)){for(g=[],j=d.length,k=0;j>k;k++)d[k].visible&&d[k].options.enableMouseTracking!==!1&&!d[k].noSharedTooltip&&d[k].tooltipPoints.length&&(f=d[k].tooltipPoints[m])&&f.series&&(f._dist=M(m-f.clientX),l=I(l,f._dist),g.push(f));for(j=g.length;j--;)g[j]._dist>l&&g.splice(j,1);g.length&&g[0].clientX!==b.hoverX&&(e.refresh(g,a),b.hoverX=g[0].clientX)}i&&i.tracker?(f=i.tooltipPoints[m])&&f!==h&&f.onMouseOver(a):e&&e.followPointer&&!e.isHidden&&(d=e.getAnchor([{}],a),e.updatePosition({plotX:d[0],plotY:d[1]})),e&&!b._onDocumentMouseMove&&(b._onDocumentMouseMove=function(a){b.onDocumentMouseMove(a)},F(y,"mousemove",b._onDocumentMouseMove)),p(c.axes,function(b){b.drawCrosshair(a,n(f,h))})},reset:function(a){var b=this.chart,c=b.hoverSeries,d=b.hoverPoint,e=b.tooltip,f=e&&e.shared?b.hoverPoints:d;(a=a&&e&&f)&&ja(f)[0].plotX===u&&(a=!1),a?(e.refresh(f),d&&d.setState(d.state,!0)):(d&&d.onMouseOut(),c&&c.onMouseOut(),e&&e.hide(),this._onDocumentMouseMove&&(X(y,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null),p(b.axes,function(a){a.hideCrosshair()}),this.hoverX=null)},scaleGroups:function(a,b){var d,c=this.chart;p(c.series,function(e){d=a||e.getPlotBox(),e.xAxis&&e.xAxis.zoomEnabled&&(e.group.attr(d),e.markerGroup&&(e.markerGroup.attr(d),e.markerGroup.clip(b?c.clipRect:null)),e.dataLabelsGroup&&e.dataLabelsGroup.attr(d))}),c.clipRect.attr(b||c.clipBox)},pinchTranslate:function(a,b,c,d,e,f,g,h){a&&this.pinchTranslateDirection(!0,c,d,e,f,g,h),b&&this.pinchTranslateDirection(!1,c,d,e,f,g,h)},pinchTranslateDirection:function(a,b,c,d,e,f,g,h){var o,n,y,i=this.chart,j=a?"x":"y",k=a?"X":"Y",l="chart"+k,m=a?"width":"height",q=i["plot"+(a?"Left":"Top")],p=h||1,s=i.inverted,t=i.bounds[a?"h":"v"],r=1===b.length,w=b[0][l],u=c[0][l],v=!r&&b[1][l],x=!r&&c[1][l],c=function(){!r&&M(w-v)>20&&(p=h||M(u-x)/M(w-v)),n=(q-u)/p+w,o=i["plot"+(a?"Width":"Height")]/p};c(),b=n,b<t.min?(b=t.min,y=!0):b+o>t.max&&(b=t.max-o,y=!0),y?(u-=.8*(u-g[j][0]),r||(x-=.8*(x-g[j][1])),c()):g[j]=[u,x],s||(f[j]=n-q,f[m]=o),f=s?1/p:p,e[m]=o,e[j]=b,d[s?a?"scaleY":"scaleX":"scale"+k]=p,d["translate"+k]=f*q+(u-f*w)},pinch:function(a){var b=this,c=b.chart,d=b.pinchDown,e=c.tooltip&&c.tooltip.options.followTouchMove,f=a.touches,g=f.length,h=b.lastValidTouch,i=b.zoomHor||b.pinchHor,j=b.zoomVert||b.pinchVert,k=i||j,l=b.selectionMarker,m={},q=1===g&&(b.inClass(a.target,"highcharts-tracker")&&c.runTrackerClick||c.runChartClick),o={};(k||e)&&!q&&a.preventDefault(),Ra(f,function(a){return b.normalize(a)}),"touchstart"===a.type?(p(f,function(a,b){d[b]={chartX:a.chartX,chartY:a.chartY}}),h.x=[d[0].chartX,d[1]&&d[1].chartX],h.y=[d[0].chartY,d[1]&&d[1].chartY],p(c.axes,function(a){if(a.zoomEnabled){var b=c.bounds[a.horiz?"h":"v"],d=a.minPixelPadding,e=a.toPixels(a.dataMin),f=a.toPixels(a.dataMax),g=I(e,f),e=s(e,f);b.min=I(a.pos,g-d),b.max=s(a.pos+a.len,e+d)}})):d.length&&(l||(b.selectionMarker=l=r({destroy:la},c.plotBox)),b.pinchTranslate(i,j,d,f,m,l,o,h),b.hasPinched=k,b.scaleGroups(m,o),!k&&e&&1===g&&this.runPointActions(b.normalize(a)))},dragStart:function(a){var b=this.chart;b.mouseIsDown=a.type,b.cancelClick=!1,b.mouseDownX=this.mouseDownX=a.chartX,b.mouseDownY=this.mouseDownY=a.chartY},drag:function(a){var l,b=this.chart,c=b.options.chart,d=a.chartX,e=a.chartY,f=this.zoomHor,g=this.zoomVert,h=b.plotLeft,i=b.plotTop,j=b.plotWidth,k=b.plotHeight,m=this.mouseDownX,q=this.mouseDownY;h>d?d=h:d>h+j&&(d=h+j),i>e?e=i:e>i+k&&(e=i+k),this.hasDragged=Math.sqrt(Math.pow(m-d,2)+Math.pow(q-e,2)),this.hasDragged>10&&(l=b.isInsidePlot(m-h,q-i),b.hasCartesianSeries&&(this.zoomX||this.zoomY)&&l&&!this.selectionMarker&&(this.selectionMarker=b.renderer.rect(h,i,f?1:j,g?1:k,0).attr({fill:c.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add()),this.selectionMarker&&f&&(d-=m,this.selectionMarker.attr({width:M(d),x:(d>0?0:d)+m})),this.selectionMarker&&g&&(d=e-q,this.selectionMarker.attr({height:M(d),y:(d>0?0:d)+q})),l&&!this.selectionMarker&&c.panning&&b.pan(a,c.panning))},drop:function(a){var b=this.chart,c=this.hasPinched;if(this.selectionMarker){var h,d={xAxis:[],yAxis:[],originalEvent:a.originalEvent||a},e=this.selectionMarker,f=e.x,g=e.y;(this.hasDragged||c)&&(p(b.axes,function(a){if(a.zoomEnabled){var b=a.horiz,c=a.toValue(b?f:g),b=a.toValue(b?f+e.width:g+e.height);!isNaN(c)&&!isNaN(b)&&(d[a.coll].push({axis:a,min:I(c,b),max:s(c,b)}),h=!0)}}),h&&A(b,"selection",d,function(a){b.zoom(r(a,c?{animation:!1}:null))})),this.selectionMarker=this.selectionMarker.destroy(),c&&this.scaleGroups()}b&&(D(b.container,{cursor:b._cursor}),b.cancelClick=this.hasDragged>10,b.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(a){a=this.normalize(a),a.preventDefault&&a.preventDefault(),this.dragStart(a)},onDocumentMouseUp:function(a){this.drop(a)},onDocumentMouseMove:function(a){var b=this.chart,c=this.chartPosition,d=b.hoverSeries,a=this.normalize(a,c);c&&d&&!this.inClass(a.target,"highcharts-tracker")&&!b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)&&this.reset()},onContainerMouseLeave:function(){this.reset(),this.chartPosition=null},onContainerMouseMove:function(a){var b=this.chart,a=this.normalize(a);"mousedown"===b.mouseIsDown&&this.drag(a),(this.inClass(a.target,"highcharts-tracker")||b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop))&&!b.openMenu&&this.runPointActions(a)
},inClass:function(a,b){for(var c;a;){if(c=v(a,"class")){if(-1!==c.indexOf(b))return!0;if(-1!==c.indexOf("highcharts-container"))return!1}a=a.parentNode}},onTrackerMouseOut:function(a){var b=this.chart.hoverSeries,c=(a=a.relatedTarget||a.toElement)&&a.point&&a.point.series;!b||b.options.stickyTracking||this.inClass(a,"highcharts-tooltip")||c===b||b.onMouseOut()},onContainerClick:function(a){var g,h,i,b=this.chart,c=b.hoverPoint,d=b.plotLeft,e=b.plotTop,f=b.inverted,a=this.normalize(a);a.cancelBubble=!0,b.cancelClick||(c&&this.inClass(a.target,"highcharts-tracker")?(g=this.chartPosition,h=c.plotX,i=c.plotY,r(c,{pageX:g.left+d+(f?b.plotWidth-i:h),pageY:g.top+e+(f?b.plotHeight-h:i)}),A(c.series,"click",r(a,{point:c})),b.hoverPoint&&c.firePointEvent("click",a)):(r(a,this.getCoordinates(a)),b.isInsidePlot(a.chartX-d,a.chartY-e)&&A(b,"click",a)))},onContainerTouchStart:function(a){var b=this.chart;1===a.touches.length?(a=this.normalize(a),b.isInsidePlot(a.chartX-b.plotLeft,a.chartY-b.plotTop)?(this.runPointActions(a),this.pinch(a)):this.reset()):2===a.touches.length&&this.pinch(a)},onContainerTouchMove:function(a){(1===a.touches.length||2===a.touches.length)&&this.pinch(a)},onDocumentTouchEnd:function(a){this.drop(a)},setDOMEvents:function(){var c,a=this,b=a.chart.container;this._events=c=[[b,"onmousedown","onContainerMouseDown"],[b,"onmousemove","onContainerMouseMove"],[b,"onclick","onContainerClick"],[b,"mouseleave","onContainerMouseLeave"],[y,"mouseup","onDocumentMouseUp"]],ib&&c.push([b,"ontouchstart","onContainerTouchStart"],[b,"ontouchmove","onContainerTouchMove"],[y,"touchend","onDocumentTouchEnd"]),p(c,function(b){a["_"+b[2]]=function(c){a[b[2]](c)},0===b[1].indexOf("on")?b[0][b[1]]=a["_"+b[2]]:F(b[0],b[1],a["_"+b[2]])})},destroy:function(){var a=this;p(a._events,function(b){0===b[1].indexOf("on")?b[0][b[1]]=null:X(b[0],b[1],a["_"+b[2]])}),delete a._events,clearInterval(a.tooltipTimeout)}},J=Highcharts.TrackerMixin={drawTrackerPoint:function(){var a=this,b=a.chart,c=b.pointer,d=a.options.cursor,e=d&&{cursor:d},f=function(c){var e,d=c.target;for(b.hoverSeries!==a&&a.onMouseOver();d&&!e;)e=d.point,d=d.parentNode;e!==u&&e!==b.hoverPoint&&e.onMouseOver(c)};p(a.points,function(a){a.graphic&&(a.graphic.element.point=a),a.dataLabel&&(a.dataLabel.element.point=a)}),a._hasTracking||(p(a.trackerGroups,function(b){a[b]&&(a[b].addClass("highcharts-tracker").on("mouseover",f).on("mouseout",function(a){c.onTrackerMouseOut(a)}).css(e),ib)&&a[b].on("touchstart",f)}),a._hasTracking=!0)},drawTrackerGraph:function(){var m,a=this,b=a.options,c=b.trackByArea,d=[].concat(c?a.areaPath:a.graphPath),e=d.length,f=a.chart,g=f.pointer,h=f.renderer,i=f.options.tooltip.snap,j=a.tracker,k=b.cursor,l=k&&{cursor:k},k=a.singlePoints,q=function(){f.hoverSeries!==a&&a.onMouseOver()};if(e&&!c)for(m=e+1;m--;)"M"===d[m]&&d.splice(m+1,0,d[m+1]-i,d[m+2],"L"),(m&&"M"===d[m]||m===e)&&d.splice(m,0,"L",d[m-2]+i,d[m-1]);for(m=0;m<k.length;m++)e=k[m],d.push("M",e.plotX-i,e.plotY,"L",e.plotX+i,e.plotY);j?j.attr({d:d}):(a.tracker=h.path(d).attr({"stroke-linejoin":"round",visibility:a.visible?"visible":"hidden",stroke:Kb,fill:c?Kb:Q,"stroke-width":b.lineWidth+(c?0:2*i),zIndex:2}).add(a.group),p([a.tracker,a.markerGroup],function(a){a.addClass("highcharts-tracker").on("mouseover",q).on("mouseout",function(a){g.onTrackerMouseOut(a)}).css(l),ib&&a.on("touchstart",q)}))}},C.PointerEvent||C.MSPointerEvent){var na={};$a.prototype.getWebkitTouches=function(){var a,b=[];b.item=function(a){return this[a]};for(a in na)na.hasOwnProperty(a)&&b.push({pageX:na[a].pageX,pageY:na[a].pageY,target:na[a].target});return b},Va($a.prototype,"init",function(a,b,c){b.container.style["-ms-touch-action"]=b.container.style["touch-action"]="none",a.call(this,b,c)}),Va($a.prototype,"setDOMEvents",function(a){var b=this;a.apply(this,Array.prototype.slice.call(arguments,1)),p([[this.chart.container,"PointerDown","touchstart","onContainerTouchStart",function(a){na[a.pointerId]={pageX:a.pageX,pageY:a.pageY,target:a.currentTarget}}],[this.chart.container,"PointerMove","touchmove","onContainerTouchMove",function(a){na[a.pointerId]={pageX:a.pageX,pageY:a.pageY},na[a.pointerId].target||(na[a.pointerId].target=a.currentTarget)}],[document,"PointerUp","touchend","onDocumentTouchEnd",function(a){delete na[a.pointerId]}]],function(a){F(a[0],window.PointerEvent?a[1].toLowerCase():"MS"+a[1],function(d){d=d.originalEvent,("touch"===d.pointerType||d.pointerType===d.MSPOINTER_TYPE_TOUCH)&&(a[4](d),b[a[3]]({type:a[2],target:d.currentTarget,preventDefault:la,touches:b.getWebkitTouches()}))})})})}var zb=Highcharts.Legend=function(a,b){this.init(a,b)};zb.prototype={init:function(a,b){var c=this,d=b.itemStyle,e=n(b.padding,8),f=b.itemMarginTop||0;this.options=b,b.enabled&&(c.baseline=z(d.fontSize)+3+f,c.itemStyle=d,c.itemHiddenStyle=x(d,b.itemHiddenStyle),c.itemMarginTop=f,c.padding=e,c.initialItemX=e,c.initialItemY=e-5,c.maxItemWidth=0,c.chart=a,c.itemHeight=0,c.lastLineHeight=0,c.symbolWidth=n(b.symbolWidth,16),c.pages=[],c.render(),F(c.chart,"endResize",function(){c.positionCheckboxes()}))},colorizeItem:function(a,b){var j,c=this.options,d=a.legendItem,e=a.legendLine,f=a.legendSymbol,g=this.itemHiddenStyle.color,c=b?c.itemStyle.color:g,h=b?a.legendColor||a.color:g,g=a.options&&a.options.marker,i={stroke:h,fill:h};if(d&&d.css({fill:c,color:c}),e&&e.attr({stroke:h}),f){if(g&&f.isMarker)for(j in g=a.convertAttribs(g))d=g[j],d!==u&&(i[j]=d);f.attr(i)}},positionItem:function(a){var b=this.options,c=b.symbolPadding,b=!b.rtl,d=a._legendItemPos,e=d[0],d=d[1],f=a.checkbox;a.legendGroup&&a.legendGroup.translate(b?e:this.legendWidth-e-2*c-4,d),f&&(f.x=e,f.y=d)},destroyItem:function(a){var b=a.checkbox;p(["legendItem","legendLine","legendSymbol","legendGroup"],function(b){a[b]&&(a[b]=a[b].destroy())}),b&&Na(a.checkbox)},destroy:function(){var a=this.group,b=this.box;b&&(this.box=b.destroy()),a&&(this.group=a.destroy())},positionCheckboxes:function(a){var c,b=this.group.alignAttr,d=this.clipHeight||this.legendHeight;b&&(c=b.translateY,p(this.allItems,function(e){var g,f=e.checkbox;f&&(g=c+f.y+(a||0)+3,D(f,{left:b.translateX+e.legendItemWidth+f.x-20+"px",top:g+"px",display:g>c-6&&c+d-6>g?"":Q}))}))},renderTitle:function(){var a=this.padding,b=this.options.title,c=0;b.text&&(this.title||(this.title=this.chart.renderer.label(b.text,a-3,a-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(b.style).add(this.group)),a=this.title.getBBox(),c=a.height,this.offsetWidth=a.width,this.contentGroup.attr({translateY:c})),this.titleHeight=c},renderItem:function(a){var B,b=this,c=b.chart,d=c.renderer,e=b.options,f="horizontal"===e.layout,g=b.symbolWidth,h=e.symbolPadding,i=b.itemStyle,j=b.itemHiddenStyle,k=b.padding,l=f?n(e.itemDistance,8):0,m=!e.rtl,q=e.width,o=e.itemMarginBottom||0,p=b.itemMarginTop,t=b.initialItemX,r=a.legendItem,u=a.series&&a.series.drawLegendSymbol?a.series:a,v=u.options,v=v&&v.showCheckbox,y=e.useHTML;!r&&(a.legendGroup=d.g("legend-item").attr({zIndex:1}).add(b.scrollGroup),u.drawLegendSymbol(b,a),a.legendItem=r=d.text(e.labelFormat?Fa(e.labelFormat,a):e.labelFormatter.call(a),m?g+h:-h,b.baseline,y).css(x(a.visible?i:j)).attr({align:m?"left":"right",zIndex:2}).add(a.legendGroup),(y?r:a.legendGroup).on("mouseover",function(){a.setState("hover"),r.css(b.options.itemHoverStyle)}).on("mouseout",function(){r.css(a.visible?i:j),a.setState()}).on("click",function(b){var c=function(){a.setVisible()},b={browserEvent:b};a.firePointEvent?a.firePointEvent("legendItemClick",b,c):A(a,"legendItemClick",b,c)}),b.colorizeItem(a,a.visible),v)&&(a.checkbox=T("input",{type:"checkbox",checked:a.selected,defaultChecked:a.selected},e.itemCheckboxStyle,c.container),F(a.checkbox,"click",function(b){A(a,"checkboxClick",{checked:b.target.checked},function(){a.select()})})),d=r.getBBox(),B=a.legendItemWidth=e.itemWidth||a.legendItemWidth||g+h+d.width+l+(v?20:0),e=B,b.itemHeight=g=w(a.legendItemHeight||d.height),f&&b.itemX-t+e>(q||c.chartWidth-2*k-t)&&(b.itemX=t,b.itemY+=p+b.lastLineHeight+o,b.lastLineHeight=0),b.maxItemWidth=s(b.maxItemWidth,e),b.lastItemY=p+b.itemY+o,b.lastLineHeight=s(g,b.lastLineHeight),a._legendItemPos=[b.itemX,b.itemY],f?b.itemX+=e:(b.itemY+=p+g+o,b.lastLineHeight=g),b.offsetWidth=q||s((f?b.itemX-t-l:e)+k,b.offsetWidth)},getAllItems:function(){var a=[];return p(this.chart.series,function(b){var c=b.options;n(c.showInLegend,t(c.linkedTo)?!1:u,!0)&&(a=a.concat(b.legendItems||("point"===c.legendType?b.data:b)))}),a},render:function(){var e,f,g,h,a=this,b=a.chart,c=b.renderer,d=a.group,i=a.box,j=a.options,k=a.padding,l=j.borderWidth,m=j.backgroundColor;a.itemX=a.initialItemX,a.itemY=a.initialItemY,a.offsetWidth=0,a.lastItemY=0,d||(a.group=d=c.g("legend").attr({zIndex:7}).add(),a.contentGroup=c.g().attr({zIndex:1}).add(d),a.scrollGroup=c.g().add(a.contentGroup)),a.renderTitle(),e=a.getAllItems(),ob(e,function(a,b){return(a.options&&a.options.legendIndex||0)-(b.options&&b.options.legendIndex||0)}),j.reversed&&e.reverse(),a.allItems=e,a.display=f=!!e.length,p(e,function(b){a.renderItem(b)}),g=j.width||a.offsetWidth,h=a.lastItemY+a.lastLineHeight+a.titleHeight,h=a.handleOverflow(h),(l||m)&&(g+=k,h+=k,i?g>0&&h>0&&(i[i.isNew?"attr":"animate"](i.crisp(null,null,null,g,h)),i.isNew=!1):(a.box=i=c.rect(0,0,g,h,j.borderRadius,l||0).attr({stroke:j.borderColor,"stroke-width":l||0,fill:m||Q}).add(d).shadow(j.shadow),i.isNew=!0),i[f?"show":"hide"]()),a.legendWidth=g,a.legendHeight=h,p(e,function(b){a.positionItem(b)}),f&&d.align(r({width:g,height:h},j),!0,"spacingBox"),b.isResizing||this.positionCheckboxes()},handleOverflow:function(a){var h,o,b=this,c=this.chart,d=c.renderer,e=this.options,f=e.y,f=c.spacingBox.height+("top"===e.verticalAlign?-f:f)-this.padding,g=e.maxHeight,i=this.clipRect,j=e.navigation,k=n(j.animation,!0),l=j.arrowSize||12,m=this.nav,q=this.pages,s=this.allItems;return"horizontal"===e.layout&&(f/=2),g&&(f=I(f,g)),q.length=0,a>f&&!e.useHTML?(this.clipHeight=h=f-20-this.titleHeight-this.padding,this.currentPage=n(this.currentPage,1),this.fullHeight=a,p(s,function(a,b){var c=a._legendItemPos[1],d=w(a.legendItem.bBox.height),e=q.length;(!e||c-q[e-1]>h)&&q.push(o||c),b===s.length-1&&c+d-q[e-1]>h&&q.push(c),c!==o&&(o=c)}),i||(i=b.clipRect=d.clipRect(0,this.padding,9999,0),b.contentGroup.clip(i)),i.attr({height:h}),m||(this.nav=m=d.g().attr({zIndex:1}).add(this.group),this.up=d.symbol("triangle",0,0,l,l).on("click",function(){b.scroll(-1,k)}).add(m),this.pager=d.text("",15,10).css(j.style).add(m),this.down=d.symbol("triangle-down",0,0,l,l).on("click",function(){b.scroll(1,k)}).add(m)),b.scroll(0),a=f):m&&(i.attr({height:c.chartHeight}),m.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),a},scroll:function(a,b){var c=this.pages,d=c.length,e=this.currentPage+a,f=this.clipHeight,g=this.options.navigation,h=g.activeColor,g=g.inactiveColor,i=this.pager,j=this.padding;e>d&&(e=d),e>0&&(b!==u&&Oa(b,this.chart),this.nav.attr({translateX:j,translateY:f+this.padding+7+this.titleHeight,visibility:"visible"}),this.up.attr({fill:1===e?g:h}).css({cursor:1===e?"default":"pointer"}),i.attr({text:e+"/"+d}),this.down.attr({x:18+this.pager.getBBox().width,fill:e===d?g:h}).css({cursor:e===d?"default":"pointer"}),c=-c[e-1]+this.initialItemY,this.scrollGroup.animate({translateY:c}),this.currentPage=e,this.positionCheckboxes(c))}},R=Highcharts.LegendSymbolMixin={drawRectangle:function(a,b){var c=a.options.symbolHeight||12;b.legendSymbol=this.chart.renderer.rect(0,a.baseline-5-c/2,a.symbolWidth,c,n(a.options.symbolRadius,2)).attr({zIndex:3}).add(b.legendGroup)},drawLineMarker:function(a){var d,b=this.options,c=b.marker;d=a.symbolWidth;var g,e=this.chart.renderer,f=this.legendGroup,a=a.baseline-w(.3*e.fontMetrics(a.options.itemStyle.fontSize).b);b.lineWidth&&(g={"stroke-width":b.lineWidth},b.dashStyle&&(g.dashstyle=b.dashStyle),this.legendLine=e.path(["M",0,a,"L",d,a]).attr(g).add(f)),c&&c.enabled&&(b=c.radius,this.legendSymbol=d=e.symbol(this.symbol,d/2-b,a-b,2*b,2*b).add(f),d.isMarker=!0)}},/Trident\/7\.0/.test(ra)&&Va(zb.prototype,"positionItem",function(a,b){var c=this,d=function(){b._legendItemPos&&a.call(c,b)};c.chart.renderer.forExport?d():setTimeout(d)}),fb.prototype={init:function(a,b){var c,d=a.series;a.series=null,c=x(G,a),c.series=a.series=d,this.userOptions=a,d=c.chart,this.margin=this.splashArray("margin",d),this.spacing=this.splashArray("spacing",d);var e=d.events;this.bounds={h:{},v:{}},this.callback=b,this.isResizing=0,this.options=c,this.axes=[],this.series=[],this.hasCartesianSeries=d.showAxes;var g,f=this;if(f.index=Ia.length,Ia.push(f),d.reflow!==!1&&F(f,"load",function(){f.initReflow()}),e)for(g in e)F(f,g,e[g]);f.xAxis=[],f.yAxis=[],f.animation=da?!1:n(d.animation,!0),f.pointCount=0,f.counters=new Ab,f.firstRender()},initSeries:function(a){var b=this.options.chart;return(b=L[a.type||b.type||b.defaultSeriesType])||ka(17,!0),b=new b,b.init(this,a),b},isInsidePlot:function(a,b,c){var d=c?b:a,a=c?a:b;return d>=0&&d<=this.plotWidth&&a>=0&&a<=this.plotHeight},adjustTickAmounts:function(){this.options.chart.alignTicks!==!1&&p(this.axes,function(a){a.adjustTickAmount()}),this.maxTicks=null},redraw:function(a){var g,h,b=this.axes,c=this.series,d=this.pointer,e=this.legend,f=this.isDirtyLegend,i=this.isDirtyBox,j=c.length,k=j,l=this.renderer,m=l.isHidden(),q=[];for(Oa(a,this),m&&this.cloneRenderTo(),this.layOutTitles();k--;)if(a=c[k],a.options.stacking&&(g=!0,a.isDirty)){h=!0;break}if(h)for(k=j;k--;)a=c[k],a.options.stacking&&(a.isDirty=!0);p(c,function(a){a.isDirty&&"point"===a.options.legendType&&(f=!0)}),f&&e.options.enabled&&(e.render(),this.isDirtyLegend=!1),g&&this.getStacks(),this.hasCartesianSeries&&(this.isResizing||(this.maxTicks=null,p(b,function(a){a.setScale()})),this.adjustTickAmounts(),this.getMargins(),p(b,function(a){a.isDirty&&(i=!0)}),p(b,function(a){a.isDirtyExtremes&&(a.isDirtyExtremes=!1,q.push(function(){A(a,"afterSetExtremes",r(a.eventArgs,a.getExtremes())),delete a.eventArgs})),(i||g)&&a.redraw()})),i&&this.drawChartBox(),p(c,function(a){a.isDirty&&a.visible&&(!a.isCartesian||a.xAxis)&&a.redraw()}),d&&d.reset&&d.reset(!0),l.draw(),A(this,"redraw"),m&&this.cloneRenderTo(!0),p(q,function(a){a.call()})},get:function(a){var d,e,b=this.axes,c=this.series;for(d=0;d<b.length;d++)if(b[d].options.id===a)return b[d];for(d=0;d<c.length;d++)if(c[d].options.id===a)return c[d];for(d=0;d<c.length;d++)for(e=c[d].points||[],b=0;b<e.length;b++)if(e[b].id===a)return e[b];return null},getAxes:function(){var a=this,b=this.options,c=b.xAxis=ja(b.xAxis||{}),b=b.yAxis=ja(b.yAxis||{});p(c,function(a,b){a.index=b,a.isX=!0}),p(b,function(a,b){a.index=b}),c=c.concat(b),p(c,function(b){new qa(a,b)}),a.adjustTickAmounts()},getSelectedPoints:function(){var a=[];return p(this.series,function(b){a=a.concat(wb(b.points||[],function(a){return a.selected}))}),a},getSelectedSeries:function(){return wb(this.series,function(a){return a.selected})},getStacks:function(){var a=this;p(a.yAxis,function(a){a.stacks&&a.hasVisibleSeries&&(a.oldStacks=a.stacks)}),p(a.series,function(b){!b.options.stacking||b.visible!==!0&&a.options.chart.ignoreHiddenSeries!==!1||(b.stackKey=b.type+n(b.options.stack,""))})},showResetZoom:function(){var a=this,b=G.lang,c=a.options.chart.resetZoomButton,d=c.theme,e=d.states,f="chart"===c.relativeTo?null:"plotBox";this.resetZoomButton=a.renderer.button(b.resetZoom,null,null,function(){a.zoomOut()},d,e&&e.hover).attr({align:c.position.align,title:b.resetZoomTitle}).add().align(c.position,!1,f)},zoomOut:function(){var a=this;A(a,"selection",{resetSelection:!0},function(){a.zoom()})},zoom:function(a){var b,e,c=this.pointer,d=!1;!a||a.resetSelection?p(this.axes,function(a){b=a.zoom()}):p(a.xAxis.concat(a.yAxis),function(a){var e=a.axis,h=e.isXAxis;(c[h?"zoomX":"zoomY"]||c[h?"pinchX":"pinchY"])&&(b=e.zoom(a.min,a.max),e.displayBtn&&(d=!0))}),e=this.resetZoomButton,d&&!e?this.showResetZoom():!d&&S(e)&&(this.resetZoomButton=e.destroy()),b&&this.redraw(n(this.options.chart.animation,a&&a.animation,this.pointCount<100))},pan:function(a,b){var e,c=this,d=c.hoverPoints;d&&p(d,function(a){a.setState()}),p("xy"===b?[1,0]:[1],function(b){var d=a[b?"chartX":"chartY"],h=c[b?"xAxis":"yAxis"][0],i=c[b?"mouseDownX":"mouseDownY"],j=(h.pointRange||0)/2,k=h.getExtremes(),l=h.toValue(i-d,!0)+j,i=h.toValue(i+c[b?"plotWidth":"plotHeight"]-d,!0)-j;h.series.length&&l>I(k.dataMin,k.min)&&i<s(k.dataMax,k.max)&&(h.setExtremes(l,i,!1,!1,{trigger:"pan"}),e=!0),c[b?"mouseDownX":"mouseDownY"]=d}),e&&c.redraw(!1),D(c.container,{cursor:"move"})},setTitle:function(a,b){var f,e,c=this,d=c.options;e=d.title=x(d.title,a),f=d.subtitle=x(d.subtitle,b),d=f,p([["title",a,e],["subtitle",b,d]],function(a){var b=a[0],d=c[b],e=a[1],a=a[2];d&&e&&(c[b]=d=d.destroy()),a&&a.text&&!d&&(c[b]=c.renderer.text(a.text,0,0,a.useHTML).attr({align:a.align,"class":"highcharts-"+b,zIndex:a.zIndex||4}).css(a.style).add())}),c.layOutTitles()},layOutTitles:function(){var a=0,b=this.title,c=this.subtitle,d=this.options,e=d.title,d=d.subtitle,f=this.spacingBox.width-44;!b||(b.css({width:(e.width||f)+"px"}).align(r({y:15},e),!1,"spacingBox"),e.floating||e.verticalAlign)||(a=b.getBBox().height,a>=18&&25>=a&&(a=15)),c&&(c.css({width:(d.width||f)+"px"}).align(r({y:a+e.margin},d),!1,"spacingBox"),!d.floating&&!d.verticalAlign&&(a=Ha(a+c.getBBox().height))),this.titleOffset=a},getChartSize:function(){var a=this.options.chart,b=this.renderToClone||this.renderTo;this.containerWidth=jb(b,"width"),this.containerHeight=jb(b,"height"),this.chartWidth=s(0,a.width||this.containerWidth||600),this.chartHeight=s(0,n(a.height,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(a){var b=this.renderToClone,c=this.container;a?b&&(this.renderTo.appendChild(c),Na(b),delete this.renderToClone):(c&&c.parentNode===this.renderTo&&this.renderTo.removeChild(c),this.renderToClone=b=this.renderTo.cloneNode(0),D(b,{position:"absolute",top:"-9999px",display:"block"}),y.body.appendChild(b),c&&b.appendChild(c))},getContainer:function(){var a,c,d,e,b=this.options.chart;this.renderTo=a=b.renderTo,e="highcharts-"+ub++,fa(a)&&(this.renderTo=a=y.getElementById(a)),a||ka(13,!0),c=z(v(a,"data-highcharts-chart")),!isNaN(c)&&Ia[c]&&Ia[c].destroy(),v(a,"data-highcharts-chart",this.index),a.innerHTML="",a.offsetWidth||this.cloneRenderTo(),this.getChartSize(),c=this.chartWidth,d=this.chartHeight,this.container=a=T(Ga,{className:"highcharts-container"+(b.className?" "+b.className:""),id:e},r({position:"relative",overflow:"hidden",width:c+"px",height:d+"px",textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},b.style),this.renderToClone||a),this._cursor=a.style.cursor,this.renderer=b.forExport?new ua(a,c,d,!0):new Ya(a,c,d),da&&this.renderer.create(this,a,c,d)},getMargins:function(){var b,a=this.spacing,c=this.legend,d=this.margin,e=this.options.legend,f=n(e.margin,10),g=e.x,h=e.y,i=e.align,j=e.verticalAlign,k=this.titleOffset;this.resetMargins(),b=this.axisOffset,k&&!t(d[0])&&(this.plotTop=s(this.plotTop,k+this.options.title.margin+a[0])),c.display&&!e.floating&&("right"===i?t(d[1])||(this.marginRight=s(this.marginRight,c.legendWidth-g+f+a[1])):"left"===i?t(d[3])||(this.plotLeft=s(this.plotLeft,c.legendWidth+g+f+a[3])):"top"===j?t(d[0])||(this.plotTop=s(this.plotTop,c.legendHeight+h+f+a[0])):"bottom"!==j||t(d[2])||(this.marginBottom=s(this.marginBottom,c.legendHeight-h+f+a[2]))),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),this.hasCartesianSeries&&p(this.axes,function(a){a.getOffset()}),t(d[3])||(this.plotLeft+=b[3]),t(d[0])||(this.plotTop+=b[0]),t(d[2])||(this.marginBottom+=b[2]),t(d[1])||(this.marginRight+=b[1]),this.setChartSize()},reflow:function(a){var b=this,c=b.options.chart,d=b.renderTo,e=c.width||jb(d,"width"),f=c.height||jb(d,"height"),c=a?a.target:C,d=function(){b.container&&(b.setSize(e,f,!1),b.hasUserSize=null)};b.hasUserSize||!e||!f||c!==C&&c!==y||((e!==b.containerWidth||f!==b.containerHeight)&&(clearTimeout(b.reflowTimeout),a?b.reflowTimeout=setTimeout(d,100):d()),b.containerWidth=e,b.containerHeight=f)},initReflow:function(){var a=this,b=function(b){a.reflow(b)};F(C,"resize",b),F(a,"destroy",function(){X(C,"resize",b)})},setSize:function(a,b,c){var e,f,g,d=this;d.isResizing+=1,g=function(){d&&A(d,"endResize",null,function(){d.isResizing-=1})},Oa(c,d),d.oldChartHeight=d.chartHeight,d.oldChartWidth=d.chartWidth,t(a)&&(d.chartWidth=e=s(0,w(a)),d.hasUserSize=!!e),t(b)&&(d.chartHeight=f=s(0,w(b))),(oa?kb:D)(d.container,{width:e+"px",height:f+"px"},oa),d.setChartSize(!0),d.renderer.setSize(e,f,c),d.maxTicks=null,p(d.axes,function(a){a.isDirty=!0,a.setScale()}),p(d.series,function(a){a.isDirty=!0}),d.isDirtyLegend=!0,d.isDirtyBox=!0,d.getMargins(),d.redraw(c),d.oldChartHeight=null,A(d,"resize"),oa===!1?g():setTimeout(g,oa&&oa.duration||500)},setChartSize:function(a){var i,j,k,l,b=this.inverted,c=this.renderer,d=this.chartWidth,e=this.chartHeight,f=this.options.chart,g=this.spacing,h=this.clipOffset;this.plotLeft=i=w(this.plotLeft),this.plotTop=j=w(this.plotTop),this.plotWidth=k=s(0,w(d-i-this.marginRight)),this.plotHeight=l=s(0,w(e-j-this.marginBottom)),this.plotSizeX=b?l:k,this.plotSizeY=b?k:l,this.plotBorderWidth=f.plotBorderWidth||0,this.spacingBox=c.spacingBox={x:g[3],y:g[0],width:d-g[3]-g[1],height:e-g[0]-g[2]},this.plotBox=c.plotBox={x:i,y:j,width:k,height:l},d=2*N(this.plotBorderWidth/2),b=Ha(s(d,h[3])/2),c=Ha(s(d,h[0])/2),this.clipBox={x:b,y:c,width:N(this.plotSizeX-s(d,h[1])/2-b),height:N(this.plotSizeY-s(d,h[2])/2-c)},a||p(this.axes,function(a){a.setAxisSize(),a.setAxisTranslation()})},resetMargins:function(){var a=this.spacing,b=this.margin;this.plotTop=n(b[0],a[0]),this.marginRight=n(b[1],a[1]),this.marginBottom=n(b[2],a[2]),this.plotLeft=n(b[3],a[3]),this.axisOffset=[0,0,0,0],this.clipOffset=[0,0,0,0]},drawChartBox:function(){var q,a=this.options.chart,b=this.renderer,c=this.chartWidth,d=this.chartHeight,e=this.chartBackground,f=this.plotBackground,g=this.plotBorder,h=this.plotBGImage,i=a.borderWidth||0,j=a.backgroundColor,k=a.plotBackgroundColor,l=a.plotBackgroundImage,m=a.plotBorderWidth||0,o=this.plotLeft,n=this.plotTop,p=this.plotWidth,s=this.plotHeight,r=this.plotBox,t=this.clipRect,w=this.clipBox;q=i+(a.shadow?8:0),(i||j)&&(e?e.animate(e.crisp(null,null,null,c-q,d-q)):(e={fill:j||Q},i&&(e.stroke=a.borderColor,e["stroke-width"]=i),this.chartBackground=b.rect(q/2,q/2,c-q,d-q,a.borderRadius,i).attr(e).add().shadow(a.shadow))),k&&(f?f.animate(r):this.plotBackground=b.rect(o,n,p,s,0).attr({fill:k}).add().shadow(a.plotShadow)),l&&(h?h.animate(r):this.plotBGImage=b.image(l,o,n,p,s).add()),t?t.animate({width:w.width,height:w.height}):this.clipRect=b.clipRect(w),m&&(g?g.animate(g.crisp(null,o,n,p,s)):this.plotBorder=b.rect(o,n,p,s,0,-m).attr({stroke:a.plotBorderColor,"stroke-width":m,zIndex:1}).add()),this.isDirtyBox=!1},propFromSeries:function(){var c,e,f,a=this,b=a.options.chart,d=a.options.series;p(["inverted","angular","polar"],function(g){for(c=L[b.type||b.defaultSeriesType],f=a[g]||b[g]||c&&c.prototype[g],e=d&&d.length;!f&&e--;)(c=L[d[e].type])&&c.prototype[g]&&(f=!0);a[g]=f})},linkSeries:function(){var a=this,b=a.series;p(b,function(a){a.linkedSeries.length=0}),p(b,function(b){var d=b.options.linkedTo;fa(d)&&(d=":previous"===d?a.series[b.index-1]:a.get(d))&&(d.linkedSeries.push(b),b.linkedParent=d)})},render:function(){var g,a=this,b=a.axes,c=a.renderer,d=a.options,e=d.labels,f=d.credits;a.setTitle(),a.legend=new zb(a,d.legend),a.getStacks(),p(b,function(a){a.setScale()}),a.getMargins(),a.maxTicks=null,p(b,function(a){a.setTickPositions(!0),a.setMaxTicks()}),a.adjustTickAmounts(),a.getMargins(),a.drawChartBox(),a.hasCartesianSeries&&p(b,function(a){a.render()}),a.seriesGroup||(a.seriesGroup=c.g("series-group").attr({zIndex:3}).add()),p(a.series,function(a){a.translate(),a.setTooltipPoints(),a.render()}),e.items&&p(e.items,function(b){var d=r(e.style,b.style),f=z(d.left)+a.plotLeft,g=z(d.top)+a.plotTop+12;delete d.left,delete d.top,c.text(b.html,f,g).attr({zIndex:2}).css(d).add()}),f.enabled&&!a.credits&&(g=f.href,a.credits=c.text(f.text,0,0).on("click",function(){g&&(location.href=g)}).attr({align:f.position.align,zIndex:8}).css(f.style).add().align(f.position)),a.hasRendered=!0},destroy:function(){var e,a=this,b=a.axes,c=a.series,d=a.container,f=d&&d.parentNode;for(A(a,"destroy"),Ia[a.index]=u,a.renderTo.removeAttribute("data-highcharts-chart"),X(a),e=b.length;e--;)b[e]=b[e].destroy();for(e=c.length;e--;)c[e]=c[e].destroy();p("title,subtitle,chartBackground,plotBackground,plotBGImage,plotBorder,seriesGroup,clipRect,credits,pointer,scroller,rangeSelector,legend,resetZoomButton,tooltip,renderer".split(","),function(b){var c=a[b];c&&c.destroy&&(a[b]=c.destroy())}),d&&(d.innerHTML="",X(d),f&&Na(d));for(e in a)delete a[e]},isReadyToRender:function(){var a=this;return!V&&C==C.top&&"complete"!==y.readyState||da&&!C.canvg?(da?Mb.push(function(){a.firstRender()},a.options.global.canvasToolsURL):y.attachEvent("onreadystatechange",function(){y.detachEvent("onreadystatechange",a.firstRender),"complete"===y.readyState&&a.firstRender()}),!1):!0},firstRender:function(){var a=this,b=a.options,c=a.callback;a.isReadyToRender()&&(a.getContainer(),A(a,"init"),a.resetMargins(),a.setChartSize(),a.propFromSeries(),a.getAxes(),p(b.series||[],function(b){a.initSeries(b)}),a.linkSeries(),A(a,"beforeRender"),a.pointer=new $a(a,b),a.render(),a.renderer.draw(),c&&c.apply(a,[a]),p(a.callbacks,function(b){b.apply(a,[a])}),a.cloneRenderTo(!0),A(a,"load"))},splashArray:function(a,b){var c=b[a],c=S(c)?c:[c,c,c,c];return[n(b[a+"Top"],c[0]),n(b[a+"Right"],c[1]),n(b[a+"Bottom"],c[2]),n(b[a+"Left"],c[3])]}},fb.prototype.callbacks=[];var xb=Highcharts.CenteredSeriesMixin={getCenter:function(){var d,h,a=this.options,b=this.chart,c=2*(a.slicedOffset||0),e=b.plotWidth-2*c,f=b.plotHeight-2*c,b=a.center,a=[n(b[0],"50%"),n(b[1],"50%"),a.size||"100%",a.innerSize||0],g=I(e,f);return Ra(a,function(a,b){return h=/%$/.test(a),d=2>b||2===b&&h,(h?[e,f,g,g][b]*z(a)/100:a)+(d?c:0)})}},Ja=function(){};Ja.prototype={init:function(a,b,c){return this.series=a,this.applyOptions(b,c),this.pointAttr={},a.options.colorByPoint&&(b=a.options.colors||a.chart.options.colors,this.color=this.color||b[a.colorCounter++],a.colorCounter===b.length)&&(a.colorCounter=0),a.chart.pointCount++,this},applyOptions:function(a,b){var c=this.series,d=c.pointValKey,a=Ja.prototype.optionsToObject.call(this,a);return r(this,a),this.options=this.options?r(this.options,a):a,d&&(this.y=this[d]),this.x===u&&c&&(this.x=b===u?c.autoIncrement():b),this},optionsToObject:function(a){var b={},c=this.series,d=c.pointArrayMap||["y"],e=d.length,f=0,g=0;if("number"==typeof a||null===a)b[d[0]]=a;else if(Ka(a))for(a.length>e&&(c=typeof a[0],"string"===c?b.name=a[0]:"number"===c&&(b.x=a[0]),f++);e>g;)b[d[g++]]=a[f++];else"object"==typeof a&&(b=a,a.dataLabels&&(c._hasPointLabels=!0),a.marker&&(c._hasPointMarkers=!0));return b},destroy:function(){var c,a=this.series.chart,b=a.hoverPoints;a.pointCount--,b&&(this.setState(),ha(b,this),!b.length)&&(a.hoverPoints=null),this===a.hoverPoint&&this.onMouseOut(),(this.graphic||this.dataLabel)&&(X(this),this.destroyElements()),this.legendItem&&a.legend.destroyItem(this);for(c in this)this[c]=null},destroyElements:function(){for(var b,a="graphic,dataLabel,dataLabelUpper,group,connector,shadowGroup".split(","),c=6;c--;)b=a[c],this[b]&&(this[b]=this[b].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},select:function(a,b){var c=this,d=c.series,e=d.chart,a=n(a,!c.selected);c.firePointEvent(a?"select":"unselect",{accumulate:b},function(){c.selected=c.options.selected=a,d.options.data[sa(c,d.data)]=c.options,c.setState(a&&"select"),b||p(e.getSelectedPoints(),function(a){a.selected&&a!==c&&(a.selected=a.options.selected=!1,d.options.data[sa(a,d.data)]=a.options,a.setState(""),a.firePointEvent("unselect"))})})},onMouseOver:function(a){var b=this.series,c=b.chart,d=c.tooltip,e=c.hoverPoint;e&&e!==this&&e.onMouseOut(),this.firePointEvent("mouseOver"),d&&(!d.shared||b.noSharedTooltip)&&d.refresh(this,a),this.setState("hover"),c.hoverPoint=this},onMouseOut:function(){var a=this.series.chart,b=a.hoverPoints;b&&-1!==sa(this,b)||(this.firePointEvent("mouseOut"),this.setState(),a.hoverPoint=null)},tooltipFormatter:function(a){var b=this.series,c=b.tooltipOptions,d=n(c.valueDecimals,""),e=c.valuePrefix||"",f=c.valueSuffix||"";return p(b.pointArrayMap||["y"],function(b){b="{point."+b,(e||f)&&(a=a.replace(b+"}",e+b+"}"+f)),a=a.replace(b+"}",b+":,."+d+"f}")}),Fa(a,{point:this,series:this.series})},firePointEvent:function(a,b,c){var d=this,e=this.series.options;(e.point.events[a]||d.options&&d.options.events&&d.options.events[a])&&this.importEvents(),"click"===a&&e.allowPointSelect&&(c=function(a){d.select(null,a.ctrlKey||a.metaKey||a.shiftKey)}),A(this,a,b,c)},importEvents:function(){if(!this.hasImportedEvents){var b,a=x(this.series.options.point,this.options).events;this.events=a;for(b in a)F(this,b,a[b]);this.hasImportedEvents=!0}},setState:function(a,b){var c=this.plotX,d=this.plotY,e=this.series,f=e.options.states,g=Y[e.type].marker&&e.options.marker,h=g&&!g.enabled,i=g&&g.states[a],j=i&&i.enabled===!1,k=e.stateMarkerGraphic,l=this.marker||{},m=e.chart,q=this.pointAttr,a=a||"",b=b&&k;a===this.state&&!b||this.selected&&"select"!==a||f[a]&&f[a].enabled===!1||a&&(j||h&&!i.enabled)||a&&l.states&&l.states[a]&&l.states[a].enabled===!1||(this.graphic?(f=g&&this.graphic.symbolName&&q[a].r,this.graphic.attr(x(q[a],f?{x:c-f,y:d-f,width:2*f,height:2*f}:{}))):(a&&i&&(f=i.radius,l=l.symbol||e.symbol,k&&k.currentSymbol!==l&&(k=k.destroy()),k?k[b?"animate":"attr"]({x:c-f,y:d-f}):(e.stateMarkerGraphic=k=m.renderer.symbol(l,c-f,d-f,2*f,2*f).attr(q[a]).add(e.markerGroup),k.currentSymbol=l)),k&&k[a&&m.isInsidePlot(c,d,m.inverted)?"show":"hide"]()),this.state=a)}};var O=function(){};O.prototype={isCartesian:!0,type:"line",pointClass:Ja,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(a,b){var d,e,c=this,f=a.series,g=function(a,b){return n(a.options.index,a._i)-n(b.options.index,b._i)};c.chart=a,c.options=b=c.setOptions(b),c.linkedSeries=[],c.bindAxes(),r(c,{name:b.name,state:"",pointAttr:{},visible:b.visible!==!1,selected:b.selected===!0}),da&&(b.animation=!1),e=b.events;for(d in e)F(c,d,e[d]);(e&&e.click||b.point&&b.point.events&&b.point.events.click||b.allowPointSelect)&&(a.runTrackerClick=!0),c.getColor(),c.getSymbol(),p(c.parallelArrays,function(a){c[a+"Data"]=[]}),c.setData(b.data,!1),c.isCartesian&&(a.hasCartesianSeries=!0),f.push(c),c._i=f.length-1,ob(f,g),this.yAxis&&ob(this.yAxis.series,g),p(f,function(a,b){a.index=b,a.name=a.name||"Series "+(b+1)})},bindAxes:function(){var d,a=this,b=a.options,c=a.chart;p(a.axisTypes||[],function(e){p(c[e],function(c){d=c.options,(b[e]===d.index||b[e]!==u&&b[e]===d.id||b[e]===u&&0===d.index)&&(c.series.push(a),a[e]=c,c.isDirty=!0)}),!a[e]&&a.optionalAxis!==e&&ka(18,!0)})},updateParallelArrays:function(a,b){var c=a.series,d=arguments;p(c.parallelArrays,"number"==typeof b?function(d){var f="y"===d&&c.toYData?c.toYData(a):a[d];c[d+"Data"][b]=f}:function(a){Array.prototype[b].apply(c[a+"Data"],Array.prototype.slice.call(d,2))})},autoIncrement:function(){var a=this.options,b=this.xIncrement,b=n(b,a.pointStart,0);return this.pointInterval=n(this.pointInterval,a.pointInterval,1),this.xIncrement=b+this.pointInterval,b},getSegments:function(){var c,a=-1,b=[],d=this.points,e=d.length;if(e)if(this.options.connectNulls){for(c=e;c--;)null===d[c].y&&d.splice(c,1);d.length&&(b=[d])}else p(d,function(c,g){null===c.y?(g>a+1&&b.push(d.slice(a+1,g)),a=g):g===e-1&&b.push(d.slice(a+1,g+1))});this.segments=b
},setOptions:function(a){var b=this.chart,c=b.options.plotOptions,b=b.userOptions||{},d=b.plotOptions||{},e=c[this.type];return this.userOptions=a,c=x(e,c.series,a),this.tooltipOptions=x(G.tooltip,G.plotOptions[this.type].tooltip,b.tooltip,d.series&&d.series.tooltip,d[this.type]&&d[this.type].tooltip,a.tooltip),null===e.marker&&delete c.marker,c},getColor:function(){var e,a=this.options,b=this.userOptions,c=this.chart.options.colors,d=this.chart.counters;e=a.color||Y[this.type].color,e||a.colorByPoint||(t(b._colorIndex)?a=b._colorIndex:(b._colorIndex=d.color,a=d.color++),e=c[a]),this.color=e,d.wrapColor(c.length)},getSymbol:function(){var a=this.userOptions,b=this.options.marker,c=this.chart,d=c.options.symbols,c=c.counters;this.symbol=b.symbol,this.symbol||(t(a._symbolIndex)?a=a._symbolIndex:(a._symbolIndex=c.symbol,a=c.symbol++),this.symbol=d[a]),/^url/.test(this.symbol)&&(b.radius=0),c.wrapSymbol(d.length)},drawLegendSymbol:R.drawLineMarker,setData:function(a,b){var j,c=this,d=c.points,e=c.options,f=c.chart,g=null,h=c.xAxis,i=h&&!!h.categories;c.xIncrement=null,c.pointRange=i?1:e.pointRange,c.colorCounter=0;var a=a||[],k=a.length;j=e.turboThreshold;var l=this.xData,m=this.yData,q=c.pointArrayMap,q=q&&q.length;if(p(this.parallelArrays,function(a){c[a+"Data"].length=0}),j&&k>j){for(j=0;null===g&&k>j;)g=a[j],j++;if(wa(g)){for(i=n(e.pointStart,0),e=n(e.pointInterval,1),j=0;k>j;j++)l[j]=i,m[j]=a[j],i+=e;c.xIncrement=i}else if(Ka(g))if(q)for(j=0;k>j;j++)e=a[j],l[j]=e[0],m[j]=e.slice(1,q+1);else for(j=0;k>j;j++)e=a[j],l[j]=e[0],m[j]=e[1];else ka(12)}else for(j=0;k>j;j++)a[j]!==u&&(e={series:c},c.pointClass.prototype.applyOptions.apply(e,[a[j]]),c.updateParallelArrays(e,j),i&&e.name)&&(h.names[e.x]=e.name);for(fa(m[0])&&ka(14,!0),c.data=[],c.options.data=a,j=d&&d.length||0;j--;)d[j]&&d[j].destroy&&d[j].destroy();h&&(h.minRange=h.userMinRange),c.isDirty=c.isDirtyData=f.isDirtyBox=!0,n(b,!0)&&f.redraw(!1)},processData:function(a){var e,b=this.xData,c=this.yData,d=b.length;e=0;var f,g,h=this.xAxis,i=this.options,j=i.cropThreshold,k=this.isCartesian;if(k&&!this.isDirty&&!h.isDirty&&!this.yAxis.isDirty&&!a)return!1;for(k&&this.sorted&&(!j||d>j||this.forceCrop)&&(a=h.min,h=h.max,b[d-1]<a||b[0]>h?(b=[],c=[]):(b[0]<a||b[d-1]>h)&&(e=this.cropData(this.xData,this.yData,a,h),b=e.xData,c=e.yData,e=e.start,f=!0)),h=b.length-1;h>=0;h--)d=b[h]-b[h-1],d>0&&(g===u||g>d)?g=d:0>d&&this.requireSorting&&ka(15);this.cropped=f,this.cropStart=e,this.processedXData=b,this.processedYData=c,null===i.pointRange&&(this.pointRange=g||1),this.closestPointRange=g},cropData:function(a,b,c,d){var i,e=a.length,f=0,g=e,h=n(this.cropShoulder,1);for(i=0;e>i;i++)if(a[i]>=c){f=s(0,i-h);break}for(;e>i;i++)if(a[i]>d){g=i+h;break}return{xData:a.slice(f,g),yData:b.slice(f,g),start:f,end:g}},generatePoints:function(){var c,i,k,m,a=this.options.data,b=this.data,d=this.processedXData,e=this.processedYData,f=this.pointClass,g=d.length,h=this.cropStart||0,j=this.hasGroupedData,l=[];for(b||j||(b=[],b.length=a.length,b=this.data=b),m=0;g>m;m++)i=h+m,j?l[m]=(new f).init(this,[d[m]].concat(ja(e[m]))):(b[i]?k=b[i]:a[i]!==u&&(b[i]=k=(new f).init(this,a[i],d[m])),l[m]=k);if(b&&(g!==(c=b.length)||j))for(m=0;c>m;m++)m===h&&!j&&(m+=g),b[m]&&(b[m].destroyElements(),b[m].plotX=u);this.data=b,this.points=l},setStackedPoints:function(){if(this.options.stacking&&(this.visible===!0||this.chart.options.chart.ignoreHiddenSeries===!1)){var q,o,n,p,r,a=this.processedXData,b=this.processedYData,c=[],d=b.length,e=this.options,f=e.threshold,g=e.stack,e=e.stacking,h=this.stackKey,i="-"+h,j=this.negStacks,k=this.yAxis,l=k.stacks,m=k.oldStacks;for(n=0;d>n;n++)p=a[n],r=b[n],o=(q=j&&f>r)?i:h,l[o]||(l[o]={}),l[o][p]||(m[o]&&m[o][p]?(l[o][p]=m[o][p],l[o][p].total=null):l[o][p]=new Gb(k,k.options.stackLabels,q,p,g,e)),o=l[o][p],o.points[this.index]=[o.cum||0],"percent"===e?(q=q?h:i,j&&l[q]&&l[q][p]?(q=l[q][p],o.total=q.total=s(q.total,o.total)+M(r)||0):o.total=aa(o.total+(M(r)||0))):o.total=aa(o.total+(r||0)),o.cum=(o.cum||0)+(r||0),o.points[this.index].push(o.cum),c[n]=o.cum;"percent"===e&&(k.usePercentage=!0),this.stackedYData=c,k.oldStacks={}}},setPercentStacks:function(){var a=this,b=a.stackKey,c=a.yAxis.stacks;p([b,"-"+b],function(b){for(var d,f,g,e=a.xData.length;e--;)f=a.xData[e],d=(g=c[b]&&c[b][f])&&g.points[a.index],(f=d)&&(g=g.total?100/g.total:0,f[0]=aa(f[0]*g),f[1]=aa(f[1]*g),a.stackedYData[e]=f[1])})},getExtremes:function(a){var d,b=this.yAxis,c=this.processedXData,e=[],f=0;d=this.xAxis.getExtremes();var i,j,k,l,g=d.min,h=d.max,a=a||this.stackedYData||this.processedYData;for(d=a.length,l=0;d>l;l++)if(j=c[l],k=a[l],i=null!==k&&k!==u&&(!b.isLog||k.length||k>0),j=this.getExtremesFromAll||this.cropped||(c[l+1]||j)>=g&&(c[l-1]||j)<=h,i&&j)if(i=k.length)for(;i--;)null!==k[i]&&(e[f++]=k[i]);else e[f++]=k;this.dataMin=n(void 0,La(e)),this.dataMax=n(void 0,za(e))},translate:function(){this.processedXData||this.processData(),this.generatePoints();for(var a=this.options,b=a.stacking,c=this.xAxis,d=c.categories,e=this.yAxis,f=this.points,g=f.length,h=!!this.modifyValue,i=a.pointPlacement,j="between"===i||wa(i),k=a.threshold,a=0;g>a;a++){var l=f[a],m=l.x,q=l.y,o=l.low,p=b&&e.stacks[(this.negStacks&&k>q?"-":"")+this.stackKey];e.isLog&&0>=q&&(l.y=q=null),l.plotX=c.translate(m,0,0,0,1,i,"flags"===this.type),b&&this.visible&&p&&p[m]&&(p=p[m],q=p.points[this.index],o=q[0],q=q[1],0===o&&(o=n(k,e.min)),e.isLog&&0>=o&&(o=null),l.total=l.stackTotal=p.total,l.percentage="percent"===b&&l.y/p.total*100,l.stackY=q,p.setOffset(this.pointXOffset||0,this.barW||0)),l.yBottom=t(o)?e.translate(o,0,1,0,1):null,h&&(q=this.modifyValue(q,l)),l.plotY="number"==typeof q&&1/0!==q?e.translate(q,0,1,0,1):u,l.clientX=j?c.translate(m,0,0,0,1):l.plotX,l.negative=l.y<(k||0),l.category=d&&d[l.x]!==u?d[l.x]:l.x}this.getSegments()},setTooltipPoints:function(a){var c,d,h,i,b=[],e=this.xAxis,f=e&&e.getExtremes(),g=e?e.tooltipLen||e.len:this.chart.plotSizeX,j=[];if(this.options.enableMouseTracking!==!1){for(a&&(this.tooltipPoints=null),p(this.segments||this.points,function(a){b=b.concat(a)}),e&&e.reversed&&(b=b.reverse()),this.orderTooltipPoints&&this.orderTooltipPoints(b),a=b.length,i=0;a>i;i++)if(e=b[i],c=e.x,c>=f.min&&c<=f.max)for(h=b[i+1],c=d===u?0:d+1,d=b[i+1]?I(s(0,N((e.clientX+(h?h.wrappedClientX||h.clientX:g))/2)),g):g;c>=0&&d>=c;)j[c++]=e;this.tooltipPoints=j}},tooltipHeaderFormatter:function(a){var g,b=this.tooltipOptions,c=b.dateTimeLabelFormats,d=b.xDateFormat,e=this.xAxis,f=e&&"datetime"===e.options.type,b=b.headerFormat,e=e&&e.closestPointRange;if(f&&!d){if(e){for(g in E)if(E[g]>=e){d=c[g];break}}else d=c.day;d=d||c.year}return f&&d&&wa(a.key)&&(b=b.replace("{point.key}","{point.key:"+d+"}")),Fa(b,{point:a,series:this})},onMouseOver:function(){var a=this.chart,b=a.hoverSeries;b&&b!==this&&b.onMouseOut(),this.options.events.mouseOver&&A(this,"mouseOver"),this.setState("hover"),a.hoverSeries=this},onMouseOut:function(){var a=this.options,b=this.chart,c=b.tooltip,d=b.hoverPoint;d&&d.onMouseOut(),this&&a.events.mouseOut&&A(this,"mouseOut"),c&&!a.stickyTracking&&(!c.shared||this.noSharedTooltip)&&c.hide(),this.setState(),b.hoverSeries=null},animate:function(a){var e,b=this,c=b.chart,d=c.renderer;e=b.options.animation;var h,f=c.clipBox,g=c.inverted;e&&!S(e)&&(e=Y[b.type].animation),h="_sharedClip"+e.duration+e.easing,a?(a=c[h],e=c[h+"m"],a||(c[h]=a=d.clipRect(r(f,{width:0})),c[h+"m"]=e=d.clipRect(-99,g?-c.plotLeft:-c.plotTop,99,g?c.chartWidth:c.chartHeight)),b.group.clip(a),b.markerGroup.clip(e),b.sharedClipKey=h):((a=c[h])&&(a.animate({width:c.plotSizeX},e),c[h+"m"].animate({width:c.plotSizeX+99},e)),b.animate=null,b.animationTimeout=setTimeout(function(){b.afterAnimate()},e.duration))},afterAnimate:function(){var a=this.chart,b=this.sharedClipKey,c=this.group;c&&this.options.clip!==!1&&(c.clip(a.clipRect),this.markerGroup.clip()),setTimeout(function(){b&&a[b]&&(a[b]=a[b].destroy(),a[b+"m"]=a[b+"m"].destroy())},100)},drawPoints:function(){var a,d,e,f,g,h,i,j,k,m,b=this.points,c=this.chart,l=this.options.marker,q=this.markerGroup;if(l.enabled||this._hasPointMarkers)for(f=b.length;f--;)g=b[f],d=N(g.plotX),e=g.plotY,k=g.graphic,i=g.marker||{},a=l.enabled&&i.enabled===u||i.enabled,m=c.isInsidePlot(w(d),e,c.inverted),a&&e!==u&&!isNaN(e)&&null!==g.y?(a=g.pointAttr[g.selected?"select":""],h=a.r,i=n(i.symbol,this.symbol),j=0===i.indexOf("url"),k?k.attr({visibility:m?V?"inherit":"visible":"hidden"}).animate(r({x:d-h,y:e-h},k.symbolName?{width:2*h,height:2*h}:{})):m&&(h>0||j)&&(g.graphic=c.renderer.symbol(i,d-h,e-h,2*h,2*h).attr(a).add(q))):k&&(g.graphic=k.destroy())},convertAttribs:function(a,b,c,d){var f,g,e=this.pointAttrToOptions,h={},a=a||{},b=b||{},c=c||{},d=d||{};for(f in e)g=e[f],h[f]=n(a[g],b[f],c[f],d[f]);return h},getAttribs:function(){var f,k,s,a=this,b=a.options,c=Y[a.type].marker?b.marker:b,d=c.states,e=d.hover,g=a.color,h={stroke:g,fill:g},i=a.points||[],j=[],l=a.pointAttrToOptions,m=b.negativeColor,n=c.lineColor,o=c.fillColor;for(b.marker?(e.radius=e.radius||c.radius+2,e.lineWidth=e.lineWidth||c.lineWidth+1):e.color=e.color||ta(e.color||g).brighten(e.brightness).get(),j[""]=a.convertAttribs(c,h),p(["hover","select"],function(b){j[b]=a.convertAttribs(d[b],j[""])}),a.pointAttr=j,g=i.length;g--;){if(h=i[g],(c=h.options&&h.options.marker||h.options)&&c.enabled===!1&&(c.radius=0),h.negative&&m&&(h.color=h.fillColor=m),k=b.colorByPoint||h.color,h.options)for(s in l)t(c[l[s]])&&(k=!0);k?(c=c||{},k=[],d=c.states||{},f=d.hover=d.hover||{},b.marker||(f.color=ta(f.color||h.color).brighten(f.brightness||e.brightness).get()),f={color:h.color},o||(f.fillColor=h.color),n||(f.lineColor=h.color),k[""]=a.convertAttribs(r(f,c),j[""]),k.hover=a.convertAttribs(d.hover,j.hover,k[""]),k.select=a.convertAttribs(d.select,j.select,k[""])):k=j,h.pointAttr=k}},destroy:function(){var d,e,g,h,i,a=this,b=a.chart,c=/AppleWebKit\/533/.test(ra),f=a.data||[];for(A(a,"destroy"),X(a),p(a.axisTypes||[],function(b){(i=a[b])&&(ha(i.series,a),i.isDirty=i.forceRedraw=!0)}),a.legendItem&&a.chart.legend.destroyItem(a),e=f.length;e--;)(g=f[e])&&g.destroy&&g.destroy();a.points=null,clearTimeout(a.animationTimeout),p("area,graph,dataLabelsGroup,group,markerGroup,tracker,graphNeg,areaNeg,posClip,negClip".split(","),function(b){a[b]&&(d=c&&"group"===b?"hide":"destroy",a[b][d]())}),b.hoverSeries===a&&(b.hoverSeries=null),ha(b.series,a);for(h in a)delete a[h]},getSegmentPath:function(a){var b=this,c=[],d=b.options.step;return p(a,function(e,f){var i,g=e.plotX,h=e.plotY;b.getPointSpline?c.push.apply(c,b.getPointSpline(a,e,f)):(c.push(f?"L":"M"),d&&f&&(i=a[f-1],"right"===d?c.push(i.plotX,h):"center"===d?c.push((i.plotX+g)/2,i.plotY,(i.plotX+g)/2,h):c.push(g,i.plotY)),c.push(e.plotX,e.plotY))}),c},getGraphPath:function(){var c,a=this,b=[],d=[];return p(a.segments,function(e){c=a.getSegmentPath(e),e.length>1?b=b.concat(c):d.push(e[0])}),a.singlePoints=d,a.graphPath=b},drawGraph:function(){var a=this,b=this.options,c=[["graph",b.lineColor||this.color]],d=b.lineWidth,e=b.dashStyle,f="square"!==b.linecap,g=this.getGraphPath(),h=b.negativeColor;h&&c.push(["graphNeg",h]),p(c,function(c,h){var k=c[0],l=a[k];l?(Za(l),l.animate({d:g})):d&&g.length&&(l={stroke:c[1],"stroke-width":d,zIndex:1},e?l.dashstyle=e:f&&(l["stroke-linecap"]=l["stroke-linejoin"]="round"),a[k]=a.chart.renderer.path(g).attr(l).add(a.group).shadow(!h&&b.shadow))})},clipNeg:function(){var e,a=this.options,b=this.chart,c=b.renderer,d=a.negativeColor||a.negativeFillColor,f=this.graph,g=this.area,h=this.posClip,i=this.negClip;e=b.chartWidth;var j=b.chartHeight,k=s(e,j),l=this.yAxis;d&&(f||g)&&(d=w(l.toPixels(a.threshold||0,!0)),0>d&&(k-=d),a={x:0,y:0,width:k,height:d},k={x:0,y:d,width:k,height:k},b.inverted&&(a.height=k.y=b.plotWidth-d,c.isVML&&(a={x:b.plotWidth-d-b.plotLeft,y:0,width:e,height:j},k={x:d+b.plotLeft-e,y:0,width:b.plotLeft+d,height:e})),l.reversed?(b=k,e=a):(b=a,e=k),h?(h.animate(b),i.animate(e)):(this.posClip=h=c.clipRect(b),this.negClip=i=c.clipRect(e),f&&this.graphNeg&&(f.clip(h),this.graphNeg.clip(i)),g&&(g.clip(h),this.areaNeg.clip(i))))},invertGroups:function(){function a(){var a={width:b.yAxis.len,height:b.xAxis.len};p(["group","markerGroup"],function(c){b[c]&&b[c].attr(a).invert()})}var b=this,c=b.chart;b.xAxis&&(F(c,"resize",a),F(b,"destroy",function(){X(c,"resize",a)}),a(),b.invertGroups=a)},plotGroup:function(a,b,c,d,e){var f=this[a],g=!f;return g&&(this[a]=f=this.chart.renderer.g(b).attr({visibility:c,zIndex:d||.1}).add(e)),f[g?"attr":"animate"](this.getPlotBox()),f},getPlotBox:function(){return{translateX:this.xAxis?this.xAxis.left:this.chart.plotLeft,translateY:this.yAxis?this.yAxis.top:this.chart.plotTop,scaleX:1,scaleY:1}},render:function(){var b,a=this.chart,c=this.options,d=c.animation&&!!this.animate&&a.renderer.isSVG,e=this.visible?"visible":"hidden",f=c.zIndex,g=this.hasRendered,h=a.seriesGroup;b=this.plotGroup("group","series",e,f,h),this.markerGroup=this.plotGroup("markerGroup","markers",e,f,h),d&&this.animate(!0),this.getAttribs(),b.inverted=this.isCartesian?a.inverted:!1,this.drawGraph&&(this.drawGraph(),this.clipNeg()),this.drawDataLabels&&this.drawDataLabels(),this.visible&&this.drawPoints(),this.options.enableMouseTracking!==!1&&this.drawTracker(),a.inverted&&this.invertGroups(),c.clip!==!1&&!this.sharedClipKey&&!g&&b.clip(a.clipRect),d?this.animate():g||this.afterAnimate(),this.isDirty=this.isDirtyData=!1,this.hasRendered=!0},redraw:function(){var a=this.chart,b=this.isDirtyData,c=this.group,d=this.xAxis,e=this.yAxis;c&&(a.inverted&&c.attr({width:a.plotWidth,height:a.plotHeight}),c.animate({translateX:n(d&&d.left,a.plotLeft),translateY:n(e&&e.top,a.plotTop)})),this.translate(),this.setTooltipPoints(!0),this.render(),b&&A(this,"updatedData")},setState:function(a){var b=this.options,c=this.graph,d=this.graphNeg,e=b.states,b=b.lineWidth,a=a||"";this.state!==a&&(this.state=a,e[a]&&e[a].enabled===!1||(a&&(b=e[a].lineWidth||b+1),c&&!c.dashstyle&&(a={"stroke-width":b},c.attr(a),d&&d.attr(a))))},setVisible:function(a,b){var f,c=this,d=c.chart,e=c.legendItem,g=d.options.chart.ignoreHiddenSeries,h=c.visible;f=(c.visible=a=c.userOptions.visible=a===u?!h:a)?"show":"hide",p(["group","dataLabelsGroup","markerGroup","tracker"],function(a){c[a]&&c[a][f]()}),d.hoverSeries===c&&c.onMouseOut(),e&&d.legend.colorizeItem(c,a),c.isDirty=!0,c.options.stacking&&p(d.series,function(a){a.options.stacking&&a.visible&&(a.isDirty=!0)}),p(c.linkedSeries,function(b){b.setVisible(a,!1)}),g&&(d.isDirtyBox=!0),b!==!1&&d.redraw(),A(c,f)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(a){this.selected=a=a===u?!this.selected:a,this.checkbox&&(this.checkbox.checked=a),A(this,a?"select":"unselect")},drawTracker:J.drawTrackerGraph},r(fb.prototype,{addSeries:function(a,b,c){var d,e=this;return a&&(b=n(b,!0),A(e,"addSeries",{options:a},function(){d=e.initSeries(a),e.isDirtyLegend=!0,e.linkSeries(),b&&e.redraw(c)})),d},addAxis:function(a,b,c,d){var e=b?"xAxis":"yAxis",f=this.options;new qa(this,x(a,{index:this[e].length,isX:b})),f[e]=ja(f[e]||{}),f[e].push(a),n(c,!0)&&this.redraw(d)},showLoading:function(a){var b=this.options,c=this.loadingDiv,d=b.loading;c||(this.loadingDiv=c=T(Ga,{className:"highcharts-loading"},r(d.style,{zIndex:10,display:Q}),this.container),this.loadingSpan=T("span",null,d.labelStyle,c)),this.loadingSpan.innerHTML=a||b.lang.loading,this.loadingShown||(D(c,{opacity:0,display:"",left:this.plotLeft+"px",top:this.plotTop+"px",width:this.plotWidth+"px",height:this.plotHeight+"px"}),kb(c,{opacity:d.style.opacity},{duration:d.showDuration||0}),this.loadingShown=!0)},hideLoading:function(){var a=this.options,b=this.loadingDiv;b&&kb(b,{opacity:0},{duration:a.loading.hideDuration||100,complete:function(){D(b,{display:Q})}}),this.loadingShown=!1}}),r(Ja.prototype,{update:function(a,b,c){var g,d=this,e=d.series,f=d.graphic,h=e.data,i=e.chart,j=e.options,b=n(b,!0);d.firePointEvent("update",{options:a},function(){d.applyOptions(a),S(a)&&(e.getAttribs(),f&&(a&&a.marker&&a.marker.symbol?d.graphic=f.destroy():f.attr(d.pointAttr[d.state||""])),a&&a.dataLabels&&d.dataLabel&&(d.dataLabel=d.dataLabel.destroy())),g=sa(d,h),e.updateParallelArrays(d,g),j.data[g]=d.options,e.isDirty=e.isDirtyData=!0,!e.fixedBox&&e.hasCartesianSeries&&(i.isDirtyBox=!0),"point"===j.legendType&&i.legend.destroyItem(d),b&&i.redraw(c)})},remove:function(a,b){var g,c=this,d=c.series,e=d.points,f=d.chart,h=d.data;Oa(b,f),a=n(a,!0),c.firePointEvent("remove",null,function(){g=sa(c,h),h.length===e.length&&e.splice(g,1),h.splice(g,1),d.options.data.splice(g,1),d.updateParallelArrays(c,"splice",g,1),c.destroy(),d.isDirty=!0,d.isDirtyData=!0,a&&f.redraw()})}}),r(O.prototype,{addPoint:function(a,b,c,d){var m,e=this.options,f=this.data,g=this.graph,h=this.area,i=this.chart,j=this.xAxis&&this.xAxis.names,k=g&&g.shift||0,l=e.data,q=this.xData;if(Oa(d,i),c&&p([g,h,this.graphNeg,this.areaNeg],function(a){a&&(a.shift=k+1)}),h&&(h.isArea=!0),b=n(b,!0),d={series:this},this.pointClass.prototype.applyOptions.apply(d,[a]),g=d.x,h=q.length,this.requireSorting&&g<q[h-1])for(m=!0;h&&q[h-1]>g;)h--;this.updateParallelArrays(d,"splice",h,0,0),this.updateParallelArrays(d,h),j&&(j[g]=d.name),l.splice(h,0,a),m&&(this.data.splice(h,0,null),this.processData()),"point"===e.legendType&&this.generatePoints(),c&&(f[0]&&f[0].remove?f[0].remove(!1):(f.shift(),this.updateParallelArrays(d,"shift"),l.shift())),this.isDirtyData=this.isDirty=!0,b&&(this.getAttribs(),i.redraw())},remove:function(a,b){var c=this,d=c.chart,a=n(a,!0);c.isRemoving||(c.isRemoving=!0,A(c,"remove",null,function(){c.destroy(),d.isDirtyLegend=d.isDirtyBox=!0,d.linkSeries(),a&&d.redraw(b)})),c.isRemoving=!1},update:function(a,b){var f,c=this.chart,d=this.type,e=L[d].prototype,a=x(this.userOptions,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},a);this.remove(!1);for(f in e)e.hasOwnProperty(f)&&(this[f]=u);r(this,L[a.type||d].prototype),this.init(c,a),n(b,!0)&&c.redraw(!1)}}),r(qa.prototype,{update:function(a,b){var c=this.chart,a=c.options[this.coll][this.options.index]=x(this.userOptions,a);this.destroy(!0),this._addedPlotLB=this.userMin=this.userMax=u,this.init(c,r(a,{events:u})),c.isDirtyBox=!0,n(b,!0)&&c.redraw()},remove:function(a){var b=this.chart,c=this.coll;p(this.series,function(a){a.remove(!1)}),ha(b.axes,this),ha(b[c],this),b.options[c].splice(this.options.index,1),p(b[c],function(a,b){a.options.index=b}),this.destroy(),b.isDirtyBox=!0,n(a,!0)&&b.redraw()},setTitle:function(a,b){this.update({title:a},b)},setCategories:function(a,b){this.update({categories:a},b)}});var ca=ia(O);L.line=ca,Y.area=x(W,{threshold:0});var Ua=ia(O,{type:"area",getSegments:function(){var h,i,l,m,n,a=[],b=[],c=[],d=this.xAxis,e=this.yAxis,f=e.stacks[this.stackKey],g={},j=this.points,k=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(m=0;m<j.length;m++)g[j[m].x]=j[m];for(n in f)null!==f[n].total&&c.push(+n);c.sort(function(a,b){return a-b}),p(c,function(a){(!k||g[a]&&null!==g[a].y)&&(g[a]?b.push(g[a]):(h=d.translate(a),l=f[a].percent?f[a].total?100*f[a].cum/f[a].total:0:f[a].cum,i=e.toPixels(l,!0),b.push({y:null,plotX:h,clientX:h,plotY:i,yBottom:i,onMouseOver:la})))}),b.length&&a.push(b)}else O.prototype.getSegments.call(this),a=this.segments;this.segments=a},getSegmentPath:function(a){var d,b=O.prototype.getSegmentPath.call(this,a),c=[].concat(b),e=this.options;d=b.length;var g,f=this.yAxis.getThreshold(e.threshold);if(3===d&&c.push("L",b[1],b[2]),e.stacking&&!this.closedStacks)for(d=a.length-1;d>=0;d--)g=n(a[d].yBottom,f),d<a.length-1&&e.step&&c.push(a[d+1].plotX,g),c.push(a[d].plotX,g);else this.closeSegment(c,a,f);return this.areaPath=this.areaPath.concat(c),b},closeSegment:function(a,b,c){a.push("L",b[b.length-1].plotX,c,"L",b[0].plotX,c)},drawGraph:function(){this.areaPath=[],O.prototype.drawGraph.apply(this);var a=this,b=this.areaPath,c=this.options,d=c.negativeColor,e=c.negativeFillColor,f=[["area",this.color,c.fillColor]];(d||e)&&f.push(["areaNeg",d,e]),p(f,function(d){var e=d[0],f=a[e];f?f.animate({d:b}):a[e]=a.chart.renderer.path(b).attr({fill:n(d[2],ta(d[1]).setOpacity(n(c.fillOpacity,.75)).get()),zIndex:0}).add(a.group)})},drawLegendSymbol:R.drawRectangle});L.area=Ua,Y.spline=x(W),ca=ia(O,{type:"spline",getPointSpline:function(a,b,c){var h,i,j,k,d=b.plotX,e=b.plotY,f=a[c-1],g=a[c+1];if(f&&g){a=f.plotY,j=g.plotX;var l,g=g.plotY;h=(1.5*d+f.plotX)/2.5,i=(1.5*e+a)/2.5,j=(1.5*d+j)/2.5,k=(1.5*e+g)/2.5,l=(k-i)*(j-d)/(j-h)+e-k,i+=l,k+=l,i>a&&i>e?(i=s(a,e),k=2*e-i):a>i&&e>i&&(i=I(a,e),k=2*e-i),k>g&&k>e?(k=s(g,e),i=2*e-k):g>k&&e>k&&(k=I(g,e),i=2*e-k),b.rightContX=j,b.rightContY=k}return c?(b=["C",f.rightContX||f.plotX,f.rightContY||f.plotY,h||d,i||e,d,e],f.rightContX=f.rightContY=null):b=["M",d,e],b}}),L.spline=ca,Y.areaspline=x(Y.area),Ua=Ua.prototype,ca=ia(ca,{type:"areaspline",closedStacks:!0,getSegmentPath:Ua.getSegmentPath,closeSegment:Ua.closeSegment,drawGraph:Ua.drawGraph,drawLegendSymbol:R.drawRectangle}),L.areaspline=ca,Y.column=x(W,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},stickyTracking:!1,threshold:0}),ca=ia(O,{type:"column",pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",r:"borderRadius"},cropShoulder:0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){O.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasRendered&&p(b.series,function(b){b.type===a.type&&(b.isDirty=!0)})},getColumnMetrics:function(){var f,h,a=this,b=a.options,c=a.xAxis,d=a.yAxis,e=c.reversed,g={},i=0;b.grouping===!1?i=1:p(a.chart.series,function(b){var c=b.options,e=b.yAxis;b.type===a.type&&b.visible&&d.len===e.len&&d.pos===e.pos&&(c.stacking?(f=b.stackKey,g[f]===u&&(g[f]=i++),h=g[f]):c.grouping!==!1&&(h=i++),b.columnIndex=h)});var c=I(M(c.transA)*(c.ordinalSlope||b.pointRange||c.closestPointRange||1),c.len),j=c*b.groupPadding,k=(c-2*j)/i,l=b.pointWidth,b=t(l)?(k-l)/2:k*b.pointPadding,l=n(l,k-2*b);return a.columnMetrics={width:l,offset:b+(j+((e?i-(a.columnIndex||0):a.columnIndex)||0)*k-c/2)*(e?-1:1)}},translate:function(){var a=this.chart,b=this.options,c=b.borderWidth,d=this.yAxis,e=this.translatedThreshold=d.getThreshold(b.threshold),f=n(b.minPointLength,5),b=this.getColumnMetrics(),g=b.width,h=this.barW=Ha(s(g,1+2*c)),i=this.pointXOffset=b.offset,j=-(c%2?.5:0),k=c%2?.5:1;a.renderer.isVML&&a.inverted&&(k+=1),O.prototype.translate.apply(this),p(this.points,function(a){var t,b=n(a.yBottom,e),c=I(s(-999-b,a.plotY),d.len+999+b),o=a.plotX+i,p=h,r=I(c,b),c=s(c,b)-r;M(c)<f&&f&&(c=f,r=w(M(r-e)>f?b-f:e-(d.translate(a.y,0,1,0,1)<=e?f:0))),a.barX=o,a.pointWidth=g,b=M(o)<.5,p=w(o+p)+j,o=w(o)+j,p-=o,t=M(r)<.5,c=w(r+c)+k,r=w(r)+k,c-=r,b&&(o+=1,p-=1),t&&(r-=1,c+=1),a.shapeType="rect",a.shapeArgs={x:o,y:r,width:p,height:c}})},getSymbol:la,drawLegendSymbol:R.drawRectangle,drawGraph:la,drawPoints:function(){var f,a=this,b=this.chart,c=a.options,d=b.renderer,e=b.options.animationLimit||250;p(a.points,function(g){var h=g.plotY,i=g.graphic;h===u||isNaN(h)||null===g.y?i&&(g.graphic=i.destroy()):(f=g.shapeArgs,i?(Za(i),i[b.pointCount<e?"animate":"attr"](x(f))):g.graphic=d[g.shapeType](f).attr(g.pointAttr[g.selected?"select":""]).add(a.group).shadow(c.shadow,null,c.stacking&&!c.borderRadius))})},drawTracker:J.drawTrackerPoint,animate:function(a){var b=this.yAxis,c=this.options,d=this.chart.inverted,e={};V&&(a?(e.scaleY=.001,a=I(b.pos+b.len,s(b.pos,b.toPixels(c.threshold))),d?e.translateX=a-b.len:e.translateY=a,this.group.attr(e)):(e.scaleY=1,e[d?"translateX":"translateY"]=b.pos,this.group.animate(e,this.options.animation),this.animate=null))},remove:function(){var a=this,b=a.chart;b.hasRendered&&p(b.series,function(b){b.type===a.type&&(b.isDirty=!0)}),O.prototype.remove.apply(a,arguments)}}),L.column=ca,Y.bar=x(Y.column),ca=ia(ca,{type:"bar",inverted:!0}),L.bar=ca,Y.scatter=x(W,{lineWidth:0,tooltip:{headerFormat:'<span style="font-size: 10px; color:{series.color}">{series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>",followPointer:!0},stickyTracking:!1}),ca=ia(O,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["markerGroup"],takeOrdinalPosition:!1,drawTracker:J.drawTrackerPoint,drawGraph:function(){this.options.lineWidth&&O.prototype.drawGraph.call(this)},setTooltipPoints:la}),L.scatter=ca,Y.pie=x(W,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return this.point.name}},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}}),W={type:"pie",isCartesian:!1,pointClass:ia(Ja,{init:function(){Ja.prototype.init.apply(this,arguments);var b,a=this;return a.y<0&&(a.y=null),r(a,{visible:a.visible!==!1,name:n(a.name,"Slice")}),b=function(b){a.slice("select"===b.type)},F(a,"select",b),F(a,"unselect",b),a},setVisible:function(a){var e,b=this,c=b.series,d=c.chart;b.visible=b.options.visible=a=a===u?!b.visible:a,c.options.data[sa(b,c.data)]=b.options,e=a?"show":"hide",p(["graphic","dataLabel","connector","shadowGroup"],function(a){b[a]&&b[a][e]()}),b.legendItem&&d.legend.colorizeItem(b,a),!c.isDirty&&c.options.ignoreHiddenPoint&&(c.isDirty=!0,d.redraw())},slice:function(a,b,c){var d=this.series;Oa(c,d.chart),n(b,!0),this.sliced=this.options.sliced=a=t(a)?a:!this.sliced,d.options.data[sa(this,d.data)]=this.options,a=a?this.slicedTranslation:{translateX:0,translateY:0},this.graphic.animate(a),this.shadowGroup&&this.shadowGroup.animate(a)}}),requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:la,animate:function(a){var b=this,c=b.points,d=b.startAngleRad;a||(p(c,function(a){var c=a.graphic,a=a.shapeArgs;c&&(c.attr({r:b.center[3]/2,start:d,end:d}),c.animate({r:a.r,start:a.start,end:a.end},b.options.animation))}),b.animate=null)},setData:function(a,b){O.prototype.setData.call(this,a,!1),this.processData(),this.generatePoints(),n(b,!0)&&this.chart.redraw()},generatePoints:function(){var a,c,d,e,b=0,f=this.options.ignoreHiddenPoint;for(O.prototype.generatePoints.call(this),c=this.points,d=c.length,a=0;d>a;a++)e=c[a],b+=f&&!e.visible?0:e.y;for(this.total=b,a=0;d>a;a++)e=c[a],e.percentage=b>0?e.y/b*100:0,e.total=b},translate:function(a){this.generatePoints();var f,g,h,m,o,b=0,c=this.options,d=c.slicedOffset,e=d+c.borderWidth,i=c.startAngle||0,j=this.startAngleRad=Aa/180*(i-90),i=(this.endAngleRad=Aa/180*((c.endAngle||i+360)-90))-j,k=this.points,l=c.dataLabels.distance,c=c.ignoreHiddenPoint,n=k.length;for(a||(this.center=a=this.getCenter()),this.getX=function(b,c){return h=P.asin((b-a[1])/(a[2]/2+l)),a[0]+(c?-1:1)*U(h)*(a[2]/2+l)},m=0;n>m;m++)o=k[m],f=j+b*i,(!c||o.visible)&&(b+=o.percentage/100),g=j+b*i,o.shapeType="arc",o.shapeArgs={x:a[0],y:a[1],r:a[2]/2,innerR:a[3]/2,start:w(1e3*f)/1e3,end:w(1e3*g)/1e3},h=(g+f)/2,h>.75*i&&(h-=2*Aa),o.slicedTranslation={translateX:w(U(h)*d),translateY:w(ba(h)*d)},f=U(h)*a[2]/2,g=ba(h)*a[2]/2,o.tooltipPos=[a[0]+.7*f,a[1]+.7*g],o.half=-Aa/2>h||h>Aa/2?1:0,o.angle=h,e=I(e,l/2),o.labelPos=[a[0]+f+U(h)*l,a[1]+g+ba(h)*l,a[0]+f+U(h)*e,a[1]+g+ba(h)*e,a[0]+f,a[1]+g,0>l?"center":o.half?"right":"left",h]},setTooltipPoints:la,drawGraph:null,drawPoints:function(){var c,d,f,g,a=this,b=a.chart.renderer,e=a.options.shadow;e&&!a.shadowGroup&&(a.shadowGroup=b.g("shadow").add(a.group)),p(a.points,function(h){d=h.graphic,g=h.shapeArgs,f=h.shadowGroup,e&&!f&&(f=h.shadowGroup=b.g("shadow").add(a.shadowGroup)),c=h.sliced?h.slicedTranslation:{translateX:0,translateY:0},f&&f.attr(c),d?d.animate(r(g,c)):h.graphic=d=b.arc(g).setRadialReference(a.center).attr(h.pointAttr[h.selected?"select":""]).attr({"stroke-linejoin":"round"}).attr(c).add(a.group).shadow(e,f),void 0!==h.visible&&h.setVisible(h.visible)})},sortByAngle:function(a,b){a.sort(function(a,d){return void 0!==a.angle&&(d.angle-a.angle)*b})},drawTracker:J.drawTrackerPoint,drawLegendSymbol:R.drawRectangle,getCenter:xb.getCenter,getSymbol:la},W=ia(O,W),L.pie=W,O.prototype.drawDataLabels=function(){var e,f,g,h,a=this,b=a.options,c=b.cursor,d=b.dataLabels,b=a.points;(d.enabled||a._hasPointLabels)&&(a.dlProcessOptions&&a.dlProcessOptions(d),h=a.plotGroup("dataLabelsGroup","data-labels",a.visible?"visible":"hidden",d.zIndex||6),f=d,p(b,function(b){var j,l,m,k=b.dataLabel,p=b.connector,o=!0;if(e=b.options&&b.options.dataLabels,j=n(e&&e.enabled,f.enabled),k&&!j)b.dataLabel=k.destroy();else if(j){if(d=x(f,e),j=d.rotation,l=b.getLabelConfig(),g=d.format?Fa(d.format,l):d.formatter.call(l,d),d.style.color=n(d.color,d.style.color,a.color,"black"),k)t(g)?(k.attr({text:g}),o=!1):(b.dataLabel=k=k.destroy(),p&&(b.connector=p.destroy()));else if(t(g)){k={fill:d.backgroundColor,stroke:d.borderColor,"stroke-width":d.borderWidth,r:d.borderRadius||0,rotation:j,padding:d.padding,zIndex:1};for(m in k)k[m]===u&&delete k[m];k=b.dataLabel=a.chart.renderer[j?"text":"label"](g,0,-999,null,null,null,d.useHTML).attr(k).css(r(d.style,c&&{cursor:c})).add(h).shadow(d.shadow)}k&&a.alignDataLabel(b,k,d,null,o)}}))},O.prototype.alignDataLabel=function(a,b,c,d,e){var f=this.chart,g=f.inverted,h=n(a.plotX,-999),i=n(a.plotY,-999),j=b.getBBox();(a=this.visible&&(a.series.forceDL||f.isInsidePlot(a.plotX,a.plotY,g)))&&(d=r({x:g?f.plotWidth-i:h,y:w(g?f.plotHeight-h:i),width:0,height:0},d),r(c,{width:j.width,height:j.height}),c.rotation?(g={align:c.align,x:d.x+c.x+d.width/2,y:d.y+c.y+d.height/2},b[e?"attr":"animate"](g)):(b.align(c,null,d),g=b.alignAttr,"justify"===n(c.overflow,"justify")?this.justifyDataLabel(b,c,g,j,d,e):n(c.crop,!0)&&(a=f.isInsidePlot(g.x,g.y)&&f.isInsidePlot(g.x+j.width,g.y+j.height)))),a||(b.attr({y:-999}),b.placed=!1)},O.prototype.justifyDataLabel=function(a,b,c,d,e,f){var j,k,g=this.chart,h=b.align,i=b.verticalAlign;j=c.x,0>j&&("right"===h?b.align="left":b.x=-j,k=!0),j=c.x+d.width,j>g.plotWidth&&("left"===h?b.align="right":b.x=g.plotWidth-j,k=!0),j=c.y,0>j&&("bottom"===i?b.verticalAlign="top":b.y=-j,k=!0),j=c.y+d.height,j>g.plotHeight&&("top"===i?b.verticalAlign="bottom":b.y=g.plotHeight-j,k=!0),k&&(a.placed=!f,a.align(b,null,e))},L.pie&&(L.pie.prototype.drawDataLabels=function(){var c,i,j,t,u,v,x,z,A,E,K,B,a=this,b=a.data,d=a.chart,e=a.options.dataLabels,f=n(e.connectorPadding,10),g=n(e.connectorWidth,1),h=d.plotWidth,d=d.plotHeight,k=n(e.softConnector,!0),l=e.distance,m=a.center,q=m[2]/2,o=m[1],r=l>0,y=[[],[]],D=[0,0,0,0],I=function(a,b){return b.y-a.y};if(a.visible&&(e.enabled||a._hasPointLabels)){for(O.prototype.drawDataLabels.apply(a),p(b,function(a){a.dataLabel&&a.visible&&y[a.half].push(a)}),K=0;!x&&b[K];)x=b[K]&&b[K].dataLabel&&(b[K].dataLabel.getBBox().height||21),K++;for(K=2;K--;){var C,b=[],J=[],F=y[K],G=F.length;if(a.sortByAngle(F,K-.5),l>0){for(B=o-q-l;o+q+l>=B;B+=x)b.push(B);if(u=b.length,G>u){for(c=[].concat(F),c.sort(I),B=G;B--;)c[B].rank=B;for(B=G;B--;)F[B].rank>=u&&F.splice(B,1);G=F.length}for(B=0;G>B;B++){c=F[B],v=c.labelPos,c=9999;var L,N;for(N=0;u>N;N++)L=M(b[N]-v[1]),c>L&&(c=L,C=N);if(B>C&&null!==b[B])C=B;else for(G-B+C>u&&null!==b[B]&&(C=u-G+B);null===b[C];)C++;J.push({i:C,y:b[C]}),b[C]=null}J.sort(I)}for(B=0;G>B;B++)c=F[B],v=c.labelPos,t=c.dataLabel,E=c.visible===!1?"hidden":"visible",c=v[1],l>0?(u=J.pop(),C=u.i,A=u.y,(c>A&&null!==b[C+1]||A>c&&null!==b[C-1])&&(A=c)):A=c,z=e.justify?m[0]+(K?-1:1)*(q+l):a.getX(0===C||C===b.length-1?c:A,K),t._attr={visibility:E,align:v[6]},t._pos={x:z+e.x+({left:f,right:-f}[v[6]]||0),y:A+e.y-10},t.connX=z,t.connY=A,null===this.options.size&&(u=t.width,f>z-u?D[3]=s(w(u-z+f),D[3]):z+u>h-f&&(D[1]=s(w(z+u-h+f),D[1])),0>A-x/2?D[0]=s(w(-A+x/2),D[0]):A+x/2>d&&(D[2]=s(w(A+x/2-d),D[2])))
}(0===za(D)||this.verifyDataLabelOverflow(D))&&(this.placeDataLabels(),r&&g&&p(this.points,function(b){i=b.connector,v=b.labelPos,(t=b.dataLabel)&&t._pos?(E=t._attr.visibility,z=t.connX,A=t.connY,j=k?["M",z+("left"===v[6]?5:-5),A,"C",z,A,2*v[2]-v[4],2*v[3]-v[5],v[2],v[3],"L",v[4],v[5]]:["M",z+("left"===v[6]?5:-5),A,"L",v[2],v[3],"L",v[4],v[5]],i?(i.animate({d:j}),i.attr("visibility",E)):b.connector=i=a.chart.renderer.path(j).attr({"stroke-width":g,stroke:e.connectorColor||b.color||"#606060",visibility:E}).add(a.group)):i&&(b.connector=i.destroy())}))}},L.pie.prototype.placeDataLabels=function(){p(this.points,function(a){var b,a=a.dataLabel;a&&((b=a._pos)?(a.attr(a._attr),a[a.moved?"animate":"attr"](b),a.moved=!0):a&&a.attr({y:-999}))})},L.pie.prototype.alignDataLabel=la,L.pie.prototype.verifyDataLabelOverflow=function(a){var f,b=this.center,c=this.options,d=c.center,e=c=c.minSize||80;return null!==d[0]?e=s(b[2]-s(a[1],a[3]),c):(e=s(b[2]-a[1]-a[3],c),b[0]+=(a[3]-a[1])/2),null!==d[1]?e=s(I(e,b[2]-s(a[0],a[2])),c):(e=s(I(e,b[2]-a[0]-a[2]),c),b[1]+=(a[0]-a[2])/2),e<b[2]?(b[2]=e,this.translate(b),p(this.points,function(a){a.dataLabel&&(a.dataLabel._pos=null)}),this.drawDataLabels&&this.drawDataLabels()):f=!0,f}),L.column&&(L.column.prototype.alignDataLabel=function(a,b,c,d,e){var f=this.chart,g=f.inverted,h=a.dlBox||a.shapeArgs,i=a.below||a.plotY>n(this.translatedThreshold,f.plotSizeY),j=n(c.inside,!!this.options.stacking);h&&(d=x(h),g&&(d={x:f.plotWidth-d.y-d.height,y:f.plotHeight-d.x-d.width,width:d.height,height:d.width}),!j)&&(g?(d.x+=i?0:d.width,d.width=0):(d.y+=i?d.height:0,d.height=0)),c.align=n(c.align,!g||j?"center":i?"right":"left"),c.verticalAlign=n(c.verticalAlign,g||j?"middle":i?"top":"bottom"),O.prototype.alignDataLabel.call(this,a,b,c,d,e)}),r(Highcharts,{Axis:qa,Chart:fb,Color:ta,Point:Ja,Tick:Qa,Tooltip:tb,Renderer:Ya,Series:O,SVGElement:pa,SVGRenderer:ua,arrayMin:La,arrayMax:za,charts:Ia,dateFormat:ab,format:Fa,pathAnim:vb,getOptions:function(){return G},hasBidiBug:Nb,isTouchDevice:Ib,numberFormat:Da,seriesTypes:L,setOptions:function(a){return G=x(!0,G,a),Bb(),G},addEvent:F,removeEvent:X,createElement:T,discardElement:Na,css:D,each:p,extend:r,map:Ra,merge:x,pick:n,splat:ja,extendClass:ia,pInt:z,wrap:Va,svg:V,canvas:da,vml:!V&&!da,product:"Highcharts",version:"3.0.9"})}();var uploadNow=function(){var auth_token="qdy6RGh_-HzH4DmD6aY6",company_id=1,event_id=void 0,url=void 0,urlOnUpdate=void 0,bind=!0,readIt=function(e){var uri=e.target.result;triggerEvent("createPhoto",{render:!0,src:uri})},randomSegment=function(cant){for(var cant=cant||1,segments="",i=0;cant>i;i++)segments+=Math.floor(65536*(1+Math.random())).toString(16).substring(1);return segments},GUID=function(){return[randomSegment(2),randomSegment(),randomSegment(),randomSegment(),randomSegment(3)].join("-")},endUploading=function(e){var parser=new DOMParser,response=parser.parseFromString(e.target.response,"text/xml"),uri=response.querySelector("Location").textContent;triggerEvent("createPhoto",{direct_upload_url:uri})},callback=function(file){return function(e){var response=JSON.parse(e.target.response),formData=new FormData,xhr=new XMLHttpRequest;response.fields.key=["uploads/",GUID(),"/","${filename}"].join("");for(key in response.fields)formData.append(key,response.fields[key]);formData.append("file",file),xhr.open("POST",response.url),xhr.onload=endUploading,xhr.send(formData)}},ApiParameters=function(file){var request=new XMLHttpRequest,params=["auth_token="+auth_token,"company_id="+company_id].join("&");request.open("GET",url+params),request.onload=callback(file),request.send()},handleFileSelect=function(evt){_trigger(evt.target)},_trigger=function(target){var target=target||document.querySelector(input),file=target.files[0],reader=new FileReader;file&&(ApiParameters(file),reader.onload=readIt,reader.readAsDataURL(file))},triggerEvent=function(evt,payload){angular.element("[ng-controller]:first").scope().trigger(evt,payload)},_bind=function(options){var options=options||{};auth_token=options.auth_token||auth_token,company_id=options.company_id||company_id,event_id=options.event_id||event_id,url=options.url||url,urlOnUpdate=options.urlOnUpdate||urlOnUpdate,input=options.input||"input[type=file][data-aws]",bind=!options.nobind,bind&&document.querySelector(input).addEventListener("change",handleFileSelect)};return{bind:_bind,trigger:_trigger}}(),module=angular.module("brandscopicApp.controllers"),controller=function($q,$scope,$rootScope,$state,$timeout,snapRemote,$sce,UserService,UserInterface,CompanyService,Event,$location,$http,Notification,LoginManager){if(!LoginManager.isLogged())return void $state.go("login");LoginManager.initializeSystem(),$rootScope.showSearchField=!1,$scope.snapOptions={disable:"right"};var authToken=UserService.currentUser.auth_token,credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,"status[]":"Active"},pendingNotifications=0,notificationsQueryingPromise=null;$scope.currentCompany=CompanyService.currentCompany,$scope.UserInterface=UserInterface,$scope.UserInterface.title="Home",$scope.isEventCompleted=!0,$scope.place_reference="",$scope.logout=function(){return LoginManager.logout(authToken,function(){$state.go("login")}),!1},$scope.photoForm={key:"",AWSAccessKeyId:"",policy:"",signature:""},$scope.showSearchEvent=function(isShowing){$("#searchEvent").val(""),$rootScope.showSearchField=isShowing,isShowing||$scope.$broadcast("CLOSE_SEARCH",!0),$scope.$broadcast("ALL_EVENT",isShowing)},$scope.navigationItems=[{"class":"eventIcon",label:"EVENTS",link:"#home/events",id:"eventsNavBar"},{"class":"tasksIcon",label:"TASKS",link:"#home/tasks",id:"tasksNavBar"},{"class":"venuesIcon",label:"VENUES",link:"#home/venues",id:"venuesNavBar"},{"class":"notificationIcon",label:"NOTIFICATIONS",link:"#home/notifications",showNotifications:!0,id:"notificationNavBar"},{"class":"dashboardIcon",label:"DASHBOARD",link:"#home/dashboard",id:"dashboardNavBar"}],$scope.actionItems=[{"class":"profileIcon",label:"EDIT PROFILE",link:"#home/profile",click:""},{"class":"logoutIcon",label:"LOGOUT",link:"",click:"logout()"}],$scope.$on("ADD_PHOTO",function(eventT,authForm){$scope.photoForm.AWSAccessKeyId=authForm.fields.AWSAccessKeyId,$scope.photoForm.policy=authForm.fields.policy,$scope.photoForm.signature=authForm.fields.signature,$scope.photoForm.url=authForm.url}),$scope.$on("CompanyChosen",function(event,companyId,companyName,permissions){credentials.company_id=companyId;var data=LoginManager.getCurrentSession();data.currentCompanyId=companyId,data.currentCompanyName=companyName,data.currentPermissions=permissions,LoginManager.saveSession(data),$timeout.cancel(notificationsQueryingPromise),Notification.all(credentials,notificationsActions,!0)}),$scope.$on("SEARCH_DIRECTIVE",function(event,source){$scope.source=source});var notificationsActions={success:function(notifications){pendingNotifications=notifications.length,$timeout(function(){Notification.all(credentials,notificationsActions,!0)},3e4)}};$scope.getPendingNotifications=function(){return pendingNotifications},Notification.all(credentials,notificationsActions,!0)};module.controller("homeCtrl",controller).$inject=["$q","$scope","$rootScope","$state","$timeout","snapRemote","$sce","UserService","UserInterface","CompanyService","Event","$location","$http","Notification","LoginManager"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event,PermissionsHandler){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.UserInterface=UserInterface,$scope.showEvents=!1,$scope.loading=!0;var ui={title:"Events",hasMenuIcon:!0,hasDeleteIcon:!1,hasBackIcon:!1,hasMagnifierIcon:!0,hasAddIcon:UserService.permissionIsValid("events_create"),hasSaveIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,AddIconState:"home.events.add",hasAddPhoto:!1},today=(new Date).getMonth()+1+"/"+(new Date).getDate()+"/"+(new Date).getFullYear(),future="12/31/"+((new Date).getFullYear()+10),credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,start_date:today,end_date:future,"status[]":"Active",page:1},options={force:!0},isLoadingEvents=!0,actions={success:function(events,filters,page){var evt=[];isLoadingEvents=!1,$scope.loading=!1;for(var i=0,len=events.length;len>i;i++)"Active"==events[i].status&&evt.push(events[i]);if($scope.eventsItems=evt,$scope.filters=filters,$scope.eventsItems.length&&($scope.showEvents=!0),$scope.page=null!=page?page:0,angular.extend(UserInterface,ui),$stateParams.filter){var filter=$stateParams.filter,capitalizedFilterName=filter.charAt(0).toUpperCase()+filter.slice(1);$scope.filterStatus(capitalizedFilterName)}},error:function(){isLoadingEvents=!1}};$scope.filter="",$scope.event_status=!1,isLoadingEvents=!0,$scope.$on("ALL_EVENT",function(event,param){if(!param)try{isLoadingEvents=!0,Event.all(credentials,actions,options)}catch(error){throw isLoadingEvents=!1,error}}),$scope.filterStatus=function(status,shouldCleanList){$stateParams.filter=status,$scope.event_status=status,shouldCleanList&&($scope.page=1);var credentials=((new Date).getMonth()+1+"/"+(new Date).getDate()+"/"+(new Date).getFullYear(),"12/31/"+((new Date).getFullYear()+10),$scope.event_status?{company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,page:$scope.page,"status[]":"Active","event_status[]":status}:{company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,page:$scope.page,"status[]":"Active"}),options={force:!0},actions={success:function(events,filters,page){isLoadingEvents=!1,shouldCleanList&&($scope.eventsItems=[]),angular.forEach(events,function(value){$scope.eventsItems.push(value)}),$scope.filters=filters,$scope.page=null!=page?page:1,angular.extend(UserInterface,ui)},error:function(){isLoadingEvents=!1}};isLoadingEvents=!0;try{Event.all(credentials,actions,options)}catch(error){throw isLoadingEvents=!1,error}},$scope.nextPage=function(){console.log("Loading next page"),$scope.page=Number($scope.page)+1,$scope.filterStatus($scope.event_status)},$scope.deleteEvent=function(deletedEvent){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:deletedEvent.id},actions={success:function(event){$scope.event=event;for(var evt=[],i=0,len=$scope.eventsItems.length;len>i;i++)"Active"==$scope.eventsItems[i].status&&$scope.eventsItems[i].id!=event.id&&evt.push($scope.eventsItems[i]);$scope.eventsItems=evt,$state.go("home.events")},error:function(event_error){$scope.event_error=event_error,console.log(event_error)}};deletedEvent.active=!1,Event.update(credentials,actions,deletedEvent)},$scope.isLoadingEvents=function(){return console.log("Loading events: "+isLoadingEvents),isLoadingEvents},$scope.getObservableProperties=function(){return["eventsItems"]},$scope.$emit("SEARCH_DIRECTIVE","events"),$scope.$on("RESULT_SEARCH",function(event,filter){$scope.filter=filter,$scope.$apply()}),PermissionsHandler.handlePermissions(["events"]),Event.all(credentials,actions,options)};module.controller("eventsCtrl",controller).$inject=["$scope","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event","PermissionsHandler","$location"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,$location,snapRemote,UserService,CompanyService,UserInterface,Event,Campaign,Venue,debounce){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.event={},$scope.campaigns={},$scope.campaingsDrop=[];var ui={title:"Event",hasMenuIcon:!1,hasDeleteIcon:!0,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!0,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,actionSave:"createEvent("+$scope.event+")"},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token},actions={success:function(campaigns){angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,angular.forEach(campaigns,function(value){$scope.campaingsDrop.push({id:value.id,name:value.name})})}};Campaign.all(credentials,actions),$scope.createEvent=function(){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token},actions={success:function(event){$scope.event=event,$location.path("/home/events/"+event.id+"/about")},error:function(event_error){$scope.event_error=event_error,console.log(event_error)}},sm1=$scope.event.start_date?$scope.event.start_date.indexOf("-"):0,sm2=$scope.event.start_date?$scope.event.start_date.indexOf("/"):0,em1=$scope.event.end_date?$scope.event.end_date.indexOf("-"):0,em2=$scope.event.end_date?$scope.event.end_date.indexOf("/"):0;4==sm1&&($scope.event.start_date=$scope.event.start_date.replace(/^(\d{4})\-(\d{2})\-(\d{2}).*$/,"$2/$3/$1")),4==sm2&&($scope.event.start_date=$scope.event.start_date.replace(/^(\d{4})\/(\d{2})\/(\d{2}).*$/,"$2/$3/$1")),4==em1&&($scope.event.end_date=$scope.event.end_date.replace(/^(\d{4})\-(\d{2})\-(\d{2}).*$/,"$2/$3/$1")),4==em2&&($scope.event.end_date=$scope.event.end_date.replace(/^(\d{4})\/(\d{2})\/(\d{2}).*$/,"$2/$3/$1")),Event.create(credentials,actions,$scope.event)};var _getSearch=function(value){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,term:value},actions={success:function(items){$scope.itemsToShowPlaces=[],angular.forEach(items,function(item){$scope.itemsToShowPlaces.push({label:item.label,id:item.id})})},error:function(event_error){$scope.event_error=event_error}};Venue.search(credentials,actions)};$scope.$watch("place_reference",function(value){value&&($scope.event.place_reference=value.id),getDebouncedPlaces(value)});var getDebouncedPlaces=debounce(function(value){_getSearch(value)})};module.controller("eventsAddCtrl",controller).$inject=["$scope","$state","$stateParams","$location","snapRemote","UserService","CompanyService","UserInterface","Event","Campaign","Venue","debounce"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event,Photos,photosService,UploadedPhotosTracker){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var totalRetrievedPhotos;$scope.loading=!0,$scope.photosBeingProcessedCount=0,$scope.photosList={},$scope.photoForm={key:"",AWSAccessKeyId:"",policy:"",signature:""};var ui={hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,eventSubNav:"photos"},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,ui.title=event.campaign?event.campaign.name:"Photos",ui.hasAddPhoto=Event.can("upload photos"),angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId}};$scope.customPermissionsHandler=function(){var hasAddIcon=UserService.permissionIsValid("events_create_photos");ui.hasAddPhoto=hasAddIcon,angular.extend(UserInterface,ui)},Event.find(credentials,actions),$scope.$on("createPhoto",function(e,data){data.render?($scope.loading=!1,$scope.hasPhotos=!0,$scope.photos.unshift({file_medium:data.src}),$scope.uploading=!0):(Photos.create(credentials,actions,data),$scope.uploading=!1,UploadedPhotosTracker.addUploadedPhotos($stateParams.eventId,1)),$scope.$apply()}),photosService.getPhotosList().then(function(response){$scope.photos=response.results,$scope.photosCount=response.results.length,totalRetrievedPhotos=response.total;try{null==UploadedPhotosTracker.getExpectedPhotosAmount($stateParams.eventId)&&UploadedPhotosTracker.addUploadedPhotos($stateParams.eventId,response.total),$scope.photosBeingProcessedCount=UploadedPhotosTracker.getExpectedPhotosAmount($stateParams.eventId)-totalRetrievedPhotos,console.log("Expected amount: "+exepectedAmount)}catch(error){}$scope.hasPhotos=response.results.length&&response.results.length>0?!0:!1,$scope.loading=!1}),$scope.uploading=!1,$scope.isUploading=function(){return uploading},window.uploadNow.bind({auth_token:UserService.currentUser.auth_token,company_id:CompanyService.getCompanyId(),event_id:$stateParams.eventId,url:"http://stage.brandscopic.com/api/v1/events/"+$stateParams.eventId+"/photos/form.json?"})};module.controller("eventsPhotosCtrl",controller).$inject=["$scope","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event","Photos","photosService","UploadedPhotosTracker"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event,Photos,photosService){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={title:"",hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!0,showEventSubNav:!1,hasCustomHomeClass:!0,CloseState:"home.events.details.photos",searching:!1,eventSubNav:"photos",hasAddPhoto:!1},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId,$scope.direction="left",$scope.currentIndex=$stateParams.index||0,$scope.setCurrentSlideIndex=function(index){$scope.direction=index>$scope.currentIndex?"left":"right",$scope.currentIndex=index},$scope.isCurrentSlideIndex=function(index){return Number($scope.currentIndex)===index},$scope.prevSlide=function(){$scope.direction="left",$scope.currentIndex=$scope.currentIndex<$scope.photos.length-1?++$scope.currentIndex:0},$scope.nextSlide=function(){$scope.direction="right",$scope.currentIndex=$scope.currentIndex>0?--$scope.currentIndex:$scope.photos.length-1}}};photosService.getPhotosList().then(function(response){$scope.photos=response.results,$scope.photosCount=response.results.length}),Event.find(credentials,actions)};module.controller("EventsPhotoSliderController",controller).$inject=["$scope","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event","Photos","photosService"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$window,$state,$stateParams,$sce,snapRemote,UserService,CompanyService,UserInterface,Event){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var makeAlert=function(event){var today=(new Date).getMonth()+1+"/"+(new Date).getDate()+"/"+(new Date).getFullYear(),alert={message:"",style:"",show:!1};if(event.start_date>today&&(alert={message:$sce.trustAsHtml("Your event is scheduled. You can manage the event team, complete tasks, upload event documents."),style:"box-container scheduled",show:!0}),event.tasks_late_count>0&&(alert={message:$sce.trustAsHtml("Your event has "+event.tasks_late_count+" late tasks. Click here to complete."),style:"box-container late",show:!0}),event.tasks_due_today_count>0&&(alert={message:$sce.trustAsHtml("Your event has "+event.tasks_due_today_count+" tasks that are due today. Click here to complete."),style:"box-container scheduled",show:!0}),"Due"==event.event_status){for(var item,links=" Please ",i=0;item=event.actions[i++];)"enter post event data"==item&&(links=links+"<a href='#/home/events/"+event.id+"/data'>enter post event data</a>, "),"upload photos"==item&&(links=links+"<a href='#/home/events/"+event.id+"/photos'>upload photos</a>, "),"conduct surveys"==item&&(links=links+"<a href='#/home/events/"+event.id+"/surveys'>conduct surveys</a>, "),"enter expenses"==item&&(links=links+"<a href='#/home/events/"+event.id+"/expenses'>enter expenses</a>, "),"gather comments"==item&&(links=links+" and <a href='#/home/events/"+event.id+"/comments'>gather comments</a>");links+=" from your audience during or shortly after the event. Once complete please submit your post event form.",alert={message:$sce.trustAsHtml("Your post event report is due."+links),style:"box-container due",show:!0}}if("Late"==event.event_status){for(var item,links=" Please ",i=0;item=event.actions[i++];)"enter post event data"==item&&(links=links+"<a href='#/home/events/"+event.id+"/data'>enter post event data</a>, "),"upload photos"==item&&(links=links+"<a href='#/home/events/"+event.id+"/photos'>upload photos</a>, "),"conduct surveys"==item&&(links=links+"<a href='#/home/events/"+event.id+"/surveys'>conduct surveys</a>, "),"enter expenses"==item&&(links=links+"<a href='#/home/events/"+event.id+"/expenses'>enter expenses</a>, "),"gather comments"==item&&(links=links+" and <a href='#/home/events/"+event.id+"/comments'>gather comments now</a>");links+=" from your audience during or shortly after the event. Once complete please submit your post event form.",alert={message:$sce.trustAsHtml("Your post event report is late."+links),style:"box-container late",show:!0}}return"Approved"==event.event_status&&(alert={message:$sce.trustAsHtml("Your post event report has been approved."),style:"box-container approved",show:!0}),"Rejected"==event.event_status&&(alert={message:$sce.trustAsHtml("Your post event report form has been rejected for the following reasons: Rejection reason here. Please make the necessary changes and resubmit."),style:"box-container rejected",show:!0}),"Submitted"==event.event_status&&(alert={message:$sce.trustAsHtml("Your post event report has been submitted for approval. Please review and either approve or reject."),style:"box-container submitted",show:!0}),alert},ui={hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,eventSubNav:"about"},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,$scope.alert=makeAlert(event),ui.title=event.campaign?event.campaign.name:"Event",$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId,$scope.editUrl="#home/events/"+$stateParams.eventId+"/edit",angular.extend(UserInterface,ui)}};Event.find(credentials,actions),$scope.map_styles=[{stylers:[{hue:"#00ffe6"},{saturation:-100},{gamma:.8}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#BABABA"}]}],$scope.deleteEvent=function(){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,$state.go("home.events")},error:function(event_error){$scope.event_error=event_error,console.log(event_error)}};$scope.event.active=!1,$scope.goBack=function(){$state.go("home.events")},Event.update(credentials,actions,$scope.event)},$scope.openMap=function(){$state.go("home.events.details.map")},$scope.editEvent=function(){$state.go("home.events.details.edit")}};module.controller("EventsAboutController",controller).$inject=["$scope","$window","$state","$stateParams","$sce","snapRemote","UserService","CompanyService","UserInterface","Event"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$window,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={hasMenuIcon:!1,hasDeleteIcon:!0,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!1,hasCustomHomeClass:!1,searching:!1,eventSubNav:"about"},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,ui.title=event.campaign.name,$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId,$scope.editUrl="#home/events/"+$stateParams.eventId+"/edit",angular.extend(UserInterface,ui)}};Event.find(credentials,actions),$scope.map_styles=[{stylers:[{hue:"#00ffe6"},{saturation:-100},{gamma:.8}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#BABABA"}]}]};module.controller("EventsAboutMapController",controller).$inject=["$scope","$window","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasAddPhoto:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,ui.title=event.campaign?event.campaign.name:"Event",angular.extend(UserInterface,ui),angular.extend(UserInterface,Event.getAllowedActions()),$scope.eventId=$stateParams.eventId,$scope.UserInterface=UserInterface}};$scope.handleBarClick=function(destinationState){var destination="home.events.details."+destinationState;$state.go(destination)},Event.find(credentials,actions)};module.controller("EventsDetailsController",controller).$inject=["$scope","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event","PermissionsHandler"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,$location,snapRemote,UserService,CompanyService,UserInterface,Event,Campaign,PermissionsHandler){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.event={};var ui={hasMenuIcon:!1,hasDeleteIcon:!0,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasAddPhoto:!1,hasSaveIcon:!0,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,actionSave:"updateEvent("+$scope.event+")"},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event;var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token},actions={success:function(campaigns){$scope.campaigns=campaigns,ui.title=event.campaign?event.campaign.name:"Event",angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId,$scope.editUrl="#/home/events/"+$stateParams.eventId+"/edit"}};Campaign.all(credentials,actions)}};$scope.updateEvent=function(){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,$state.go("home.events")},error:function(event_error){$scope.event_error=event_error,console.log(event_error)}},sm1=$scope.event.start_date.indexOf("-"),sm2=$scope.event.start_date.indexOf("/"),em1=$scope.event.end_date.indexOf("-"),em2=$scope.event.end_date.indexOf("/");4==sm1&&($scope.event.start_date=$scope.event.start_date.replace(/^(\d{4})\-(\d{2})\-(\d{2}).*$/,"$2/$3/$1")),4==sm2&&($scope.event.start_date=$scope.event.start_date.replace(/^(\d{4})\/(\d{2})\/(\d{2}).*$/,"$2/$3/$1")),4==em1&&($scope.event.end_date=$scope.event.end_date.replace(/^(\d{4})\-(\d{2})\-(\d{2}).*$/,"$2/$3/$1")),4==em2&&($scope.event.end_date=$scope.event.end_date.replace(/^(\d{4})\/(\d{2})\/(\d{2}).*$/,"$2/$3/$1")),$scope.event.campaign_id=$scope.event.campaign.id?$scope.event.campaign.id:0,Event.update(credentials,actions,$scope.event)},PermissionsHandler.handlePermissions(["events_edit"]),Event.find(credentials,actions)};module.controller("EventsEditController",controller).$inject=["$scope","$state","$stateParams","$location","snapRemote","UserService","CompanyService","UserInterface","Event","Campaign","PermissionsHandler"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event,EventContact,EventTeam){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.gotToState=function(newState){$state.go(newState)},$scope.deleteTeam=function(teamId,teamType){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId,memberable_id:teamId,memberable_type:teamType},actions={success:function(){for(var item,i=0;item=$scope.eventTeamItems[i++];)item.id==teamId&&$scope.eventTeamItems.splice(i-1,1)},error:function(team_error){$scope.team_error=team_error,console.log(team_error)}};EventTeam.delete(credentials,actions,$scope.event)},$scope.deleteContact=function(contactId,contactType){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId,contactable_id:contactId,contactable_type:contactType},actions={success:function(){for(var item,i=0;item=$scope.eventContactItems[i++];)item.id==contactId&&$scope.eventContactItems.splice(i-1,1)},error:function(event_error){$scope.event_error=event_error,console.log(event_error)}};EventContact.delete(credentials,actions,$scope.event)};var ui={hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!0,hasEditIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,eventSubNav:"people",hasAddPhoto:!1},credentials=(UserService.currentUser.auth_token,CompanyService.getCompanyId(),$stateParams.eventId,{company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId}),actions={success:function(event){$scope.event=event,ui.title=event.campaign?event.campaign.name:"People",angular.extend(UserInterface,ui),$scope.eventId=$stateParams.eventId,$scope.UserInterface=UserInterface,$scope.showPeople="contacts",$scope.UserInterface.AddIconState="home.events.details.people.contacts.add",$scope.showPeopleType=function(type){$scope.showPeople=type,"team"==$scope.showPeople&&($scope.UserInterface.AddIconState="home.events.details.people.team.add"),"contacts"==$scope.showPeople&&($scope.UserInterface.AddIconState="home.events.details.people.contacts.add")};var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actionsTeam={success:function(eventTeam){$scope.eventTeamItems=eventTeam}},actionsContact={success:function(eventContact){$scope.eventContactItems=eventContact}},options={force:!0};EventTeam.all(credentials,actionsTeam,options),EventContact.all(credentials,actionsContact,options)}};$scope.customPermissionsHandler=function(){ui.hasAddIcon=UserService.permissionIsValid("events_add_contacts"),angular.extend(UserInterface,ui),$scope.showPeople=UserService.permissionIsValid("events_contacts")?"contacts":"team"},$scope.getObservableProperties=function(){return["eventTeamItems","eventContactItems"]
},Event.find(credentials,actions)};module.controller("EventsPeopleController",controller).$inject=["$scope","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event","EventContact","EventTeam"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event,EventContact){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.goBack=function(){$state.go("home.events")};var ui={title:"Contact info",hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasAddPhoto:!1,hasEditIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,eventSubNav:"people"},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,angular.extend(UserInterface,ui),$scope.eventId=$stateParams.eventId,$scope.contactId=$stateParams.contactId,$scope.UserInterface=UserInterface,$scope.contact=[];var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},options={force:!0},actions={success:function(contacts){for(var item,i=0;item=contacts[i++];)if(item.id==$stateParams.contactId){$scope.contact=item,ui.hasEditIcon="contact"==item.type?!0:!1,angular.extend(UserInterface,ui),angular.extend($scope.UserInterface,ui);break}if(0==$scope.contact.length){var assignableCredentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},options={force:!0},assignableActions={success:function(assignableContacts){for(var item,i=0;item=assignableContacts[i++];)if(item.id==$stateParams.contactId){$scope.contact=item,ui.hasEditIcon=!1,angular.extend(UserInterface,ui),angular.extend($scope.UserInterface,ui);break}}};EventContact.contacts(assignableCredentials,assignableActions,options)}}};EventContact.all(credentials,actions,options),$scope.UserInterface.EditIconUrl="#/home/events/"+$scope.event.id+"/people/contacts/"+$stateParams.contactId+"/edit"}};Event.find(credentials,actions)};module.controller("EventsPeopleContactsController",controller).$inject=["$scope","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event","EventContact"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$location,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event,EventContact,Contact){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={title:"Contacts",hasMenuIcon:!1,hasDeleteIcon:!0,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!0,hasEditIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!1,hasCustomHomeClass:!1,searching:!1,eventSubNav:"people",AddIconState:"home.events.details.people.contacts.new"},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,$scope.eventId=$stateParams.eventId,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface;var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},options={force:!0},actions={success:function(contacts){for(var item,contactList=[],i=0;item=contacts[i++];)if("contact"==item.type){var credentialsContact={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,contact_id:item.id},actionsContact={success:function(contactFound){contactFound&&contactFound.last_name&&""!=contactFound.last_name&&contactFound.country&&""!=contactFound.country&&contactFound.state&&""!=contactFound.state&&contactFound.city&&""!=contactFound.city&&contactList.push({id:contactFound.id,full_name:contactFound.full_name,title:contactFound.title,type:"contact"})}};Contact.find(credentialsContact,actionsContact)}else contactList.push(item);$scope.contacts=contactList,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId,$scope.assignContact=function(contactId,contactType){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId,contactable_id:contactId,contactable_type:contactType},actions={success:function(){for(var item,i=0;item=$scope.contacts[i++];)item.id==contactId&&$scope.contacts.splice(i-1,1);$location.path("/home/events/"+$scope.event.id+"/people/contacts/add")},error:function(event_error){$scope.event_error=event_error,console.log(event_error)}};EventContact.create(credentials,actions,$scope.event)}}};EventContact.contacts(credentials,actions,options)}};Event.find(credentials,actions)};module.controller("EventsPeopleContactsAddController",controller).$inject=["$scope","$state","$location","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event","EventContact","Contact"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$location,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event,EventContact,Contact,Country){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.getCountries=function(actions){var credentials={auth_token:UserService.currentUser.auth_token};null===actions&&(actions={success:function(countries){$scope.countries=countries}}),Country.all(credentials,actions)},$scope.countryHasChanged=function(){$scope.contact.country=$scope.selectedCountry.name,$scope.getStatesForCountry($scope.selectedCountry.id)},$scope.getStates=function(countryId){var credentials={auth_token:UserService.currentUser.auth_token,country_id:countryId},actions={success:function(states){$scope.states=states}};Country.states(credentials,actions)},$scope.getStatesForCountry=function(){$scope.getStates($scope.selectedCountry.id)};var ui={title:"Edit contact",hasMenuIcon:!1,hasDeleteIcon:!0,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!0,hasEditSurveyIcon:!1,hasEditIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,$scope.eventId=$stateParams.eventId,$scope.contactId=$stateParams.contactId,$scope.contact=[],$scope.countries=[],$scope.states=[],$scope.selectedCountry={id:"",name:""},angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface;var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(contacts){for(var item,i=0;item=contacts[i++];)if(item.id==$stateParams.contactId){$scope.contact=item;break}if(!$scope.contact.id){var assignableActions={success:function(assignableContacts){for(var item,i=0;item=assignableContacts[i++];)if(item.id==$stateParams.contactId){$scope.contact=item;break}}};EventContact.contacts(credentials,assignableActions)}$scope.contact.id&&$scope.getCountries({success:function(countries){$scope.countries=countries;for(var item,i=0;item=countries[i++];)if(item.name==$scope.contact.country){$scope.selectedCountry=item;break}$scope.getStates($scope.selectedCountry.id)}})}};EventContact.all(credentials,actions)}};Event.find(credentials,actions),$scope.updateContact=function(){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,contact_id:$stateParams.contactId},actions={success:function(contact){$scope.contact=contact,$location.path("/home/events/"+$scope.event.id+"/people")},error:function(contact_error){$scope.contact_error=contact_error}};$scope.contact.country=$scope.selectedCountry.id,Contact.update(credentials,actions,$scope.contact)}};module.controller("EventsPeopleContactsEditController",controller).$inject=["$scope","$state","$location","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event","EventContact","Contact","Country"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$location,$stateParams,$timeout,snapRemote,UserService,CompanyService,UserInterface,Event,Contact,Country,EventContact){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.contact={},$scope.contact_error=void 0,$scope.countries=[],$scope.states=[],$scope.countryCode="US",$scope.getCountries=function(){var credentials={auth_token:UserService.currentUser.auth_token},actions={success:function(countries){$scope.countries=countries}};Country.all(credentials,actions)},$scope.getStates=function(countryId){var credentials={auth_token:UserService.currentUser.auth_token,country_id:countryId},actions={success:function(states){$scope.states=states}};Country.states(credentials,actions)},$scope.getStatesForCountry=function(){var countryCode=$scope.contact.country;$scope.getStates(countryCode)},$scope.getCountries();{var ui={title:"Contact",hasMenuIcon:!1,hasDeleteIcon:!0,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!0,hasEditSurveyIcon:!1,hasEditIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!1,hasCustomHomeClass:!1,searching:!1};({company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId})}angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.createContact=function(){var foundContact={},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token},actions={success:function(contact){$scope.contact=contact;var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId,term:contact.full_name},options={force:!0},actions={success:function(assignableContacts){foundContact=contact,foundContact.type="contact";for(var item,i=0;item=assignableContacts[i++];)if(contact.id==item.id){foundContact=item;break}var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId,contactable_id:foundContact.id,contactable_type:foundContact.type},actions={success:function(){$location.path("/home/events/"+$scope.event.id+"/people")},error:function(event_error){$scope.event_error=event_error,console.log(event_error)}};EventContact.create(credentials,actions,$scope.event)}};$timeout(EventContact.contacts(credentials,actions,options),3e3)},error:function(contact_error){$scope.contact_error=contact_error}};Contact.create(credentials,actions,$scope.contact)}};module.controller("EventsPeopleContactsNewController",controller).$inject=["$scope","$state","$location","$stateParams","$timeout","snapRemote","UserService","CompanyService","UserInterface","Event","Contact","Country","EventContact"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$location,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event,EventTeam){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={title:"Event team",hasMenuIcon:!1,hasDeleteIcon:!0,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasEditIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!1,hasCustomHomeClass:!1,searching:!1,eventSubNav:"people"},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,$scope.eventId=$stateParams.eventId,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface;var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(teams){$scope.teams=teams,$scope.assignTeam=function(teamId,teamType){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId,memberable_id:teamId,memberable_type:teamType},actions={success:function(){for(var item,i=0;item=$scope.teams[i++];)item.id==teamId&&$scope.teams.splice(i-1,1);$location.path("/home/events/"+$scope.event.id+"/people/team/add")},error:function(team_error){$scope.team_error=team_error,console.log(team_error)}};EventTeam.create(credentials,actions,$scope.event)}}};EventTeam.members(credentials,actions)}};Event.find(credentials,actions)};module.controller("EventsPeopleTeamAddController",controller).$inject=["$scope","$state","$location","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event","EventTeam"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,$location,snapRemote,UserService,CompanyService,UserInterface,Event){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!0,hasEditSurveyIcon:!1,hasEditIcon:!1,hasCancelIcon:!1,hasCustomHomeClass:!1,searching:!1,hasCloseIcon:!1,showEventSubNav:!0,eventSubNav:"data",hasAddPhoto:!1},credentials=(UserService.currentUser.auth_token,CompanyService.getCompanyId(),$stateParams.eventId,{company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId}),actions={success:function(event){$scope.event=event;var edit=$stateParams.edit?$stateParams.edit:!1;1!=$scope.event.have_data||edit||$location.path("/home/events/"+event.id+"/data/view"),ui.title=event.campaign?event.campaign.name:"Data",angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface;var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(results){$scope.eventResultsItems=results}};Event.results(credentials,actions)}};Event.find(credentials,actions),$scope.updateEventData=function(results){for(var result,credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,$location.path("/home/events/"+event.id+"/data/view")},error:function(event_error){$scope.event_error=event_error,console.log(event_error)}},results_attributes=[],i=0;result=results[i++];)for(var field,j=0;field=result.fields[j++];){if("percentage"==field.field_type)for(var segment,k=0;segment=field.segments[k++];)null!==segment.value&&results_attributes.push({id:segment.id,value:segment.value});if("number"==field.field_type&&null!==field.value&&results_attributes.push({id:field.id,value:field.value}),"text"==field.field_type&&null!==field.value&&results_attributes.push({id:field.id,value:field.value}),"count"==field.field_type)if("checkbox"==field.options.capture_mechanism){for(var segment,segmentIds=[],k=0;segment=field.segments[k++];)segment.value&&segmentIds.push(segment.id);segmentIds.length>0&&results_attributes.push({id:field.id,value:segmentIds})}else results_attributes.push({id:field.id,value:field.value})}var data={event:{summary:$scope.event.summary,results_attributes:results_attributes}};Event.updateResults(credentials,actions,data)},$scope.isActive=!1,$scope.isMore=!1,$("#showMore").html("Show more text &#9660;"),$scope.showMoreText=function(){$scope.isActive=!$scope.isActive,$scope.isActive?($scope.isMore=!0,$("#showMore").html("Show less text &#9650;")):($("#showMore").html("Show more text &#9660;"),$scope.isMore=!1)}};module.controller("EventsDataController",controller).$inject=["$scope","$state","$stateParams","$location","snapRemote","UserService","CompanyService","UserInterface","Event"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,$location,snapRemote,UserService,CompanyService,UserInterface,Event){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasEditIcon:!0,hasCancelIcon:!1,hasCustomHomeClass:!1,searching:!1,hasCloseIcon:!1,showEventSubNav:!0,eventSubNav:"data"},showLessText=(UserService.currentUser.auth_token,CompanyService.getCompanyId(),$stateParams.eventId,"Show less text &#9650;"),showMoreText="Show more text &#9660;",summaryIsCollapsed=!0,credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){event.summary="null"==event.summary?null:event.summary,event.data=event.data?event.data:{spent_by_impression:null,spent_by_interaction:null,spent_by_sample:null},event.data.spent_by_impression="NaN"==event.data.spent_by_impression?null:event.data.spent_by_impression,event.data.spent_by_interaction="NaN"==event.data.spent_by_interaction?null:event.data.spent_by_interaction,event.data.spent_by_sample="NaN"==event.data.spent_by_sample?null:event.data.spent_by_sample,$scope.event=event,$scope.UserInterface.EditIconUrl="#/home/events/"+$scope.event.id+"/data?edit",ui.title=event.campaign?event.campaign.name:"Data",angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface;var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(results){for(var result,dataAgeCategories=[],dataAgeSource=[],gapAgeValue=[],progressBarData=[],ethnicData=[],male=0,female=0,customData=[],hasProgressBarData=!1,i=0;result=results[i++];){if("consumer_reach"==result.module)for(var field,j=0;field=result.fields[j++];)field.goal&&null!==field.goal&&(progressBarData.push({value:field.value,name:field.name,percentage:100*field.value/parseInt(field.goal)}),hasProgressBarData=field.value?!0:!1);if("demographics"==result.module)for(var field,j=0;field=result.fields[j++];){if("Gender"==field.name)for(var segment,k=0;segment=field.segments[k++];)"Male"==segment.text&&(male=segment.value),"Female"==segment.text&&(female=segment.value);if("Age"==field.name)for(var segment,showAge=!1,k=0;segment=field.segments[k++];)dataAgeCategories.push(segment.text),dataAgeSource.push(segment.value?segment.value:0),gapAgeValue.push(100-(segment.value?segment.value:0)),showAge=segment.value?!0:showAge;if("Ethnicity/Race"==field.name)for(var segment,item,showEthnicity=!1,k=0;segment=field.segments[k++];)item=[],item.push(segment.text),item.push(segment.value?segment.value:0),ethnicData.push(item),showEthnicity=segment.value?!0:showEthnicity}if("custom"==result.module)for(var field,j=0;field=result.fields[j++];)if("percentage"==field.field_type&&customData.push({value:field.options.predefined_value,name:field.name,ordering:field.ordering}),"number"==field.field_type&&customData.push({value:field.value,name:field.name,ordering:field.ordering}),"text"==field.field_type&&customData.push({value:field.value,name:field.name,ordering:field.ordering}),"count"==field.field_type)if("checkbox"==field.options.capture_mechanism){var segmentValues="";if(field.value)for(var value,k=0;value=field.value[k++];)for(var segment,l=0;segment=field.segments[l++];)segment.id==value&&(segmentValues=segmentValues+segment.text+", ");""!=segmentValues&&(segmentValues=segmentValues.substring(0,segmentValues.lastIndexOf(", "))),customData.push({value:segmentValues,name:field.name,ordering:field.ordering})}else for(var segment,k=0;segment=field.segments[k++];)if(segment.id==field.value){customData.push({value:segment.text,name:field.name,ordering:field.ordering});break}}$scope.progressBarData=progressBarData,$scope.Male=male,$scope.Female=female,$scope.customData=customData,$scope.ageChart={plotOptions:{bar:{dataLabels:{enabled:!1}},series:{stacking:"percent",enableMouseTracking:!1,pointPadding:0,groupPadding:0,borderWidth:0,pointWidth:15,dataLabels:{color:"#3E9CCF",style:{fontSize:"11px"}}}},options:{chart:{type:"bar"},legend:{enabled:!1},plotOptions:{series:{stacking:"percent"}},tooltip:{enabled:!1}},series:[{data:gapAgeValue,id:"Serie1",name:"Fill in",color:"#DFDFDF"},{data:dataAgeSource,id:"Serie2",name:"Values",color:"#3E9CCF",dataLabels:{enabled:!0,format:"{y}%",color:"#3E9CCF",align:"right",x:30,y:-2,style:{color:"#3E9CCF"}}}],title:{text:""},xAxis:{currentMin:null,currentMax:null,categories:dataAgeCategories,title:{enabled:!1},labels:{style:{color:"#3E9CCF",fontSize:"13px"}},tickLength:0,lineWidth:0},yAxis:{max:100,labels:{enabled:!1},title:{text:!1},gridLineColor:"transparent",enabled:!1},credits:{enabled:!1},loading:!1},$scope.ethnicityChart={plotOptions:{pie:{shadow:!1},series:{enableMouseTracking:!1,dataLabels:{connectorColor:"#C0C0C0",softConnector:!1}}},options:{chart:{type:"pie"},colors:["#347a99","#218ebf","#41AAD8","#6ebde7","#94d6ed"],title:{text:null},credits:{enabled:!1},yAxis:{title:{text:null}},tooltip:{enabled:!1}},series:[{name:"Ethnicity",data:ethnicData,size:"60%",innerSize:"30%",distance:-10,dataLabels:{crop:!1,formatter:function(){return'<span style="font-size:16px;">'+this.y+'%</span><br /><div style="width: 50px;font-size:11px;">'+this.point.name+"</div>"},color:"#3E9CCF"}}]},$scope.showSummary=event.summary.length>0||event.data.spent_by_impression||event.data.spent_by_interaction||event.data.spent_by_sample||customData.length>0||hasProgressBarData,$scope.showEthnicity=showEthnicity,$scope.showAge=showAge}};Event.results(credentials,actions)}};$scope.shouldShowMoreTextButton=function(text){return text?text.split(" ").length>100:!1},$scope.showMoreText=function(){summaryIsCollapsed?($("#showMore").html(showLessText),$scope.wordsLimit=null):($("#showMore").html(showMoreText),$scope.wordsLimit=100),summaryIsCollapsed=!summaryIsCollapsed},$scope.wordsLimit=100,$("#showMore").html(showMoreText),Event.find(credentials,actions)};module.controller("EventsDataViewController",controller).$inject=["$scope","$state","$stateParams","$location","snapRemote","UserService","CompanyService","UserInterface","Event","$sce"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event,Comment){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.showComments=!1,$scope.loading=!0;var ui={hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!0,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,eventSubNav:"comments",AddIconState:"home.events.details.comments.add",hasAddPhoto:!1},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.loading=!1,$scope.event=event,$scope.eventId=$stateParams.eventId,ui.title=event.campaign?event.campaign.name:"Comments",ui.hasAddIcon=Event.can("gather comments"),angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface;var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},action={success:function(comments){$scope.showComments=!0,$scope.comments=comments}};Comment.all(credentials,action)}};Event.find(credentials,actions)};module.controller("EventsCommentsController",controller).$inject=["$scope","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event","Comment"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,$location,snapRemote,UserService,CompanyService,UserInterface,Event,Comment){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={title:"Comment",hasMenuIcon:!1,hasDeleteIcon:!0,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!0,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,eventSubNav:"comments",AddIconState:""},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,$scope.eventId=$stateParams.eventId,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.createComment=function(){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(comment){$scope.comment=comment,$location.path("/home/events/"+event.id+"/comments")},error:function(comment_error){$scope.comment_error=comment_error,console.log(comment_error)}};Comment.create(credentials,actions,$scope.comment)}}};Event.find(credentials,actions)};module.controller("EventsCommentsAddController",controller).$inject=["$scope","$state","$stateParams","$location","snapRemote","UserService","CompanyService","UserInterface","Event","Comment"];var module=angular.module("brandscopicApp.controllers"),controller1=function($scope,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasAddPhoto:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,eventSubNav:"tasks"},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,ui.title=event.campaign?event.campaign.name:"Tasks",angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId,$scope.eventTaskItems=[{id:1,assigned:"Chris Jaskot",Task:"Pickup t-shirts from storage unit",date:"2013-12-13",task_status:"Late"},{id:2,assigned:"George Tan",Task:"Confirm time and location of event",date:"2013-12-13",task_status:"Incomplete"},{id:3,assigned:"",Task:"Hire models for event",date:"2013-12-13",task_status:"Unassigned"},{id:4,assigned:"George Tan",Task:"Identify drink recipes for promotion",date:"2013-12-13",task_status:"Late"},{id:5,assigned:"Chris Jaskot",Task:"Order ballons for the event",date:"2013-12-13",task_status:"Late"},{id:6,assigned:"Chris Jaskot",Task:"Order ballons for the event",date:"2013-12-13",task_status:"Incomplete"},{id:7,assigned:"",Task:"Identify catering provider",date:"2013-12-13",task_status:"Unassigned"},{id:8,assigned:"Chris Jaskot",Task:"Select event presenter",date:"2013-12-13",task_status:"Incomplete"}],$scope.eventTaskFilters=[{label:"Late",id:"Late",name:"task_status",count:3,selected:!1},{label:"Unassigned",id:"Unassigned",name:"task_status",count:2,selected:!1},{label:"Assigned",id:"Assigned",name:"task_status",count:2,selected:!1},{label:"Incomplete",id:"Incomplete",name:"task_status",count:2,selected:!1},{label:"Complete",id:"Complete",name:"task_status",count:3,selected:!1}],$scope.task_status=!1,$scope.filterTask=function(status){$scope.task_status=$scope.task_status==status?!1:status}}};Event.find(credentials,actions)},controller2=function($scope,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={title:"Task details",hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,eventSubNav:"tasks"},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId,$scope.taskId=$stateParams.taskId}};Event.find(credentials,actions)},controller3=function($scope,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={title:"Edit task",hasMenuIcon:!1,hasDeleteIcon:!0,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!0,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,eventSubNav:"tasks"},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId,$scope.taskId=$stateParams.taskId}};Event.find(credentials,actions)};module.controller("EventsTasksController",controller1).$inject=["$scope","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event"],module.controller("EventsTasksDetailsController",controller2).$inject=["$scope","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event"],module.controller("EventsTasksEditController",controller3).$inject=["$scope","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event,Expense){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.gotToState=function(newState){$state.go(newState)},$scope.showExpenses=!1,$scope.loading=!0;var ui={hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!0,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,eventSubNav:"expenses",AddIconState:"home.events.details.expenses.add"},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.loading=!1,$scope.event=event,$scope.expenses={},angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId;var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(expenses){for(var item,i=0;item=expenses[i++];)item.receipt?item.receipt.file_small||(item.receipt.file_small="assets/images/test.jpeg"):item.receipt={file_small:"assets/images/test.jpeg"};$scope.expenses=expenses,$scope.expenses.length&&($scope.showExpenses=!0),ui.title=event.campaign?event.campaign.name:"Expenses",angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId,$scope.total=function(){for(var item,total=0,i=0;item=$scope.expenses[i++];)total+=Number(item.amount);return total}},error:function(){$scope.loading=!1}};Expense.all(credentials,actions)}};$scope.customPermissionsHandler=function(){ui.hasAddIcon=UserService.permissionIsValid("events_create_expenses"),angular.extend(UserInterface,ui)},Event.find(credentials,actions)};module.controller("EventsExpensesController",controller).$inject=["$scope","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event","Expense"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,$location,snapRemote,UserService,CompanyService,UserInterface,Event,Expense){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.event_expense=$scope.event_expense||{};var ui={title:"Expense",hasMenuIcon:!1,hasDeleteIcon:!0,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!0,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,eventSubNav:"expenses",AddIconState:"",hasAddPhoto:!1},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId,$scope.createExpense=function(){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(expense){$scope.event_expense=expense,$location.path("/home/events/"+event.id+"/expenses")
},error:function(expense_error){$scope.expense_error=expense_error,console.log(expense_error)}};Expense.create(credentials,actions,$scope.event_expense)},$scope.triggerExpense=function(){$scope.image?window.uploadNow.trigger(document.querySelector("[ng-model=image]")):$scope.createExpense()}}};Event.find(credentials,actions),window.uploadNow.bind({auth_token:UserService.currentUser.auth_token,company_id:CompanyService.getCompanyId(),event_id:$stateParams.eventId,url:"http://stage.brandscopic.com/api/v1/events/"+$stateParams.eventId+"/photos/form.json?",noBind:!0}),$scope.$on("createPhoto",function(e,data){data.render||($scope.event_expense.receipt_attributes={direct_upload_url:data.direct_upload_url},$scope.createExpense())})};module.controller("EventsExpensesAddController",controller).$inject=["$scope","$state","$stateParams","$location","snapRemote","UserService","CompanyService","UserInterface","Event","Expense"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Event,Expense){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={title:"",hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!0,showEventSubNav:!1,hasCustomHomeClass:!0,CloseState:"home.events.details.expenses",searching:!1,eventSubNav:"expenses",hasAddPhoto:!1},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId,$scope.expenseId=$stateParams.expenseId;var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(expenses){for(var item,i=0;item=expenses[i++];)item.id==$stateParams.expenseId&&(item.receipt?item.receipt.file_original||(item.receipt.file_original="assets/images/test.jpeg"):item.receipt={file_original:"assets/images/test.jpeg"},$scope.showExpenses=!0,$scope.expense=item)}};Expense.all(credentials,actions)}};Event.find(credentials,actions)};module.controller("EventsExpensesPhotoController",controller).$inject=["$scope","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Event","Expense"],eventsSurveysParentController.$inject=["$scope","surveysService"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,$location,snapRemote,UserService,CompanyService,UserInterface,surveysService,Event){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var canCreateSurvey,ui={hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!0,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,eventSubNav:"surveys",AddIconState:"home.events.details.surveys.add",hasAddPhoto:!1},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,ui.title=event.campaign?event.campaign.name:"Surveys",$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId,angular.extend(UserInterface,ui),angular.forEach($scope.event.actions,function(item){canCreateSurvey=item.indexOf("conduct surveys"),-1!=canCreateSurvey&&(UserInterface.hasAddIcon=!0)})}};$scope.customPermissionsHandler=function(){ui.hasAddIcon=UserService.permissionIsValid("events_create_surveys"),angular.extend(UserInterface,ui)},$scope.getObservableProperties=function(){return["suveySumaryList"]},Event.find(credentials,actions),$scope.showSurveys=!1,surveysService.getSurveysList().then(function(response){response.length>0&&($scope.showSurveys=!0),$scope.suveySumaryList=[],angular.forEach(response,function(items){var _age="",_race="",_gender="";angular.forEach(items.surveys_answers,function(item){if(null!=item.kpi_id)switch(item.kpi_id){case 6:_gender="10"==item.answer?"Male":"Female";break;case 7:switch(item.answer){case"1":_age="Less 12";break;case"2":_age="12 - 17";break;case"387":_age="18 - 20";break;case"3":_age="21 - 24";break;case"4":_age="25 - 34";break;case"5":_age="35 - 44";break;case"6":_age="45 - 54";break;case"7":_age="55 - 64";break;case"8":_age="More than 65"}case 8:switch(item.answer){case"11":_race="Asian";break;case"12":_racee="Black / African American";break;case"13":_race="Hispanic / Latino";break;case"14":_race="Native American";break;case"15":_race="White"}}}),$scope.suveySumaryList.push({id:items.id,age:_age,race:_race,gender:_gender,create:items.created_at,update:items.updated_at})})}),$scope.editSurvey=function(survey_id){$location.path("/home/events/"+$scope.eventId+"/surveys/"+survey_id+"/edit")}};module.controller("eventsSurveysController",controller).$inject=["$scope","$state","$stateParams","$location","snapRemote","UserService","CompanyService","UserInterface","surveysService","Event"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,$location,snapRemote,UserService,CompanyService,surveysService,UserInterface,Event){if(!UserService.isLogged())return void $state.go("login");angular.extend(this,new eventsSurveysParentController($scope,surveysService)),snapRemote.close(),$scope.permissionsProvider="eventSurveysAddPermissionsService";var ui={title:"Survey",hasMenuIcon:!1,hasDeleteIcon:!0,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!0,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,searching:!1,eventSubNav:"surveys",AddIconState:"",hasAddPhoto:!1},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,event_id:$stateParams.eventId},actions={success:function(event){$scope.event=event,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId,$scope.createSurvey=function(){var surveyModel={survey:{surveys_answers_attributes:[]}};surveyModel.survey.surveys_answers_attributes.push({kpi_id:6,answer:$scope.genderModel.genderSelected}),surveyModel.survey.surveys_answers_attributes.push({kpi_id:7,answer:$scope.ageModel.ageSelected}),surveyModel.survey.surveys_answers_attributes.push({kpi_id:8,answer:$scope.raceModel.raceSelected}),angular.forEach($scope.questions,function(questions){angular.forEach(questions,function(question){surveyModel.survey.surveys_answers_attributes.push({brand_id:question.brand_id,question_id:question.question_id,answer:question.model})})}),surveysService.createSurvey(surveyModel).then(function(response){$scope.surveyError=!1,$scope.survey=response,$location.path("/home/events/"+event.id+"/surveys")},function(response){angular.forEach(response,function(){$scope.surveyError=!0})})}}};Event.find(credentials,actions)};module.controller("eventsSurveysAddController",controller).$inject=["$scope","$state","$stateParams","$location","snapRemote","UserService","CompanyService","surveysService","UserInterface","Event","Surveys"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,$location,snapRemote,UserService,CompanyService,surveysService,UserInterface){function buildSurveyForEdit(surveys_answers){angular.forEach(surveys_answers,function(answer){switch(answer.kpi_id){case 6:$scope.genderModel.genderSelected=parseInt(answer.answer);break;case 7:$scope.ageModel.ageSelected=parseInt(answer.answer);break;case 8:$scope.raceModel.raceSelected=parseInt(answer.answer)}1==answer.question_id&&angular.forEach($scope.questions.brandsQuestion1,function(question1){question1.brand_id==answer.brand_id&&(question1.model=answer.answer,question1.id=answer.id)}),2==answer.question_id&&angular.forEach($scope.questions.brandsQuestion2,function(question2){question2.brand_id==answer.brand_id&&($("#question2"+answer.brand_id).val(answer.answer),question2.model=answer.answer,question2.id=answer.id)}),3==answer.question_id&&angular.forEach($scope.questions.brandsQuestion3,function(question3){question3.brand_id==answer.brand_id&&(question3.model=parseInt(answer.answer),question3.id=answer.id)}),4==answer.question_id&&angular.forEach($scope.questions.brandsQuestion4,function(question4){question4.brand_id==answer.brand_id&&(question4.model=parseInt(answer.answer),question4.id=answer.id)})})}if(!UserService.isLogged())return void $state.go("login");angular.extend(this,new eventsSurveysParentController($scope,surveysService)),snapRemote.close();{var ui={hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!0,hasCancelIcon:!1,hasCloseIcon:!1,showEventSubNav:!0,hasCustomHomeClass:!1,searching:!1,eventSubNav:"surveys",AddIconState:"home.events.details.surveys.edit",hasAddPhoto:!1};$stateParams.survey_id}angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.permissionsProvider="eventSurveysEditPermissionsService",surveysService.getSurveyDetail($stateParams.surveyId).then(function(response){buildSurveyForEdit(response.surveys_answers)}),$scope.editSurvey=function(){var surveyModel={survey:{surveys_answers_attributes:[]}},arrayAnswers=[];arrayAnswers.push({kpi_id:6,answer:$scope.genderModel.genderSelected}),arrayAnswers.push({kpi_id:7,answer:$scope.ageModel.ageSelected}),arrayAnswers.push({kpi_id:8,answer:$scope.raceModel.raceSelected}),angular.forEach($scope.questions,function(questions){angular.forEach(questions,function(question){arrayAnswers.push({id:question.id,answer:question.model.toString()})})}),surveyModel.survey.surveys_answers_attributes=arrayAnswers,surveysService.editSurvey(surveyModel,$stateParams.surveyId).then(function(response){$scope.survey=response,$location.path("/home/events/"+$stateParams.eventId+"/surveys")},function(response){console.log(response)})}};module.controller("eventsSurveysEditController",controller).$inject=["$scope","$state","$stateParams","$location","snapRemote","UserService","CompanyService","surveysService","UserInterface","Event","Surveys"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,snapRemote,UserService,CompanyService,venueService,UserInterface,Venue){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.showVenues=!1,$scope.loading=!0;var ui={title:"Venues",hasMenuIcon:!0,hasDeleteIcon:!1,hasBackIcon:!1,hasMagnifierIcon:!0,hasAddIcon:!0,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showVenueSubNav:!0,hasCustomHomeClass:!1,searching:!1,AddIconState:"home.venues.add"},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token},options={force:!0},actions={success:function(venues){$scope.loading=!1,$scope.venuesItems=venues,$scope.venuesItems.length&&($scope.showVenues=!0),$scope.page=venues.page,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface}};Venue.all(credentials,actions,options),$scope.$emit("SEARCH_DIRECTIVE","venues"),$scope.$on("RESULT_SEARCH",function(event,data){console.log(data);var area=[],brand=[],brand_portfolio=[],campaign=[],company_user=[],team=[];switch(data.type){case"campaign":campaign.push(data.id);break;case"brand":brand.push(data.id);break;case"brand_portfolio":brand_portfolio.push(data.id);break;case"area":area.push(data.id);break;case"company_user":company_user.push(data.id);break;case"team":team.push(data.id)}venueService.getVenuesByFilters(area,brand,brand_portfolio,campaign,company_user,team).then(function(response){$scope.venuesItems=response.results})}),$scope.$on("CLOSE_SEARCH",function(value){value&&venueService.getVenuesByFilters().then(function(response){$scope.venuesItems=response.results})}),$scope.customPermissionsHandler=function(){ui.hasAddIcon=UserService.permissionIsValid("venues_create"),angular.extend(UserInterface,ui)}};module.controller("VenuesController",controller).$inject=["$scope","$state","snapRemote","UserService","CompanyService","venueService","UserInterface","Venue"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$location,snapRemote,CompanyService,UserService,UserInterface,Venue,Country){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={title:"Venue",hasMenuIcon:!1,hasDeleteIcon:!0,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!0,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,hasCustomHomeClass:!1,searching:!1};angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.countries=[],$scope.states=[],$scope.countryCode="US",$scope.venue={},$scope.venue_error=void 0,$scope.getCountries=function(){var credentials={auth_token:UserService.currentUser.auth_token},actions={success:function(countries){$scope.countries=countries}};Country.all(credentials,actions)},$scope.getStates=function(countryId){var credentials={auth_token:UserService.currentUser.auth_token,country_id:countryId},actions={success:function(states){$scope.states=states}};Country.states(credentials,actions)},$scope.getStatesForCountry=function(){var countryCode=$scope.venue.country;$scope.getStates(countryCode)},$scope.getVenueTypes=function(){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token},actions={success:function(venueTypes){$scope.venueTypes=venueTypes}};Venue.types(credentials,actions)},$scope.createVenue=function(){var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token},actions={success:function(venue){$scope.venue=venue,$location.path("/home/venues/"+venue.id+"/about")},error:function(venue_error){$scope.venue_error=venue_error}};Venue.create(credentials,actions,$scope.venue)},$scope.getCountries(),$scope.getVenueTypes()};module.controller("VenuesAddController",controller).$inject=["$scope","$state","$location","snapRemote","CompanyService","UserService","UserInterface","Venue","Country"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,snapRemote,CompanyService,UserService,UserInterface,Venue){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={title:"Venues",hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showVenueSubNav:!0,hasCustomHomeClass:!1,searching:!1},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,venue_id:$stateParams.venueId},actions={success:function(venue){ui.title=venue.name,$scope.venue=venue,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface}};Venue.find(credentials,actions)};module.controller("VenuesDetailsController",controller).$inject=["$scope","$state","$stateParams","snapRemote","CompanyService","UserService","UserInterface","Venue"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$rootScope,$state,$stateParams,snapRemote,CompanyService,UserService,UserInterface,Venue){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$rootScope.showSearchField=!1;var ui={},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,venue_id:$stateParams.venueId},actions={success:function(venue){if(ui={title:venue.name,hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showVenueSubNav:!0,hasCustomHomeClass:!1,searching:!1,AddIconState:"home.venues.add",venueSubNav:"about"},$scope.venue=venue,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.opening=[],null!=venue.opening_hours)for(var item,i=0;item=venue.opening_hours[i++];)$scope.opening.push({day:item.substring(0,item.indexOf(" ")),hours:item.substring(item.indexOf(" ")+1,item.length)})}};Venue.find(credentials,actions),$scope.map_styles=[{stylers:[{hue:"#00ffe6"},{saturation:-100},{gamma:.8}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#BABABA"}]}]};module.controller("VenuesAboutController",controller).$inject=["$scope","$rootScope","$state","$stateParams","snapRemote","CompanyService","UserService","UserInterface","Venue"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$window,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Venue){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={hasMenuIcon:!1,hasDeleteIcon:!0,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showVenueSubNav:!1,hasCustomHomeClass:!1,searching:!1,venueSubNav:"about"},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,venue_id:$stateParams.venueId},actions={success:function(venue){$scope.venue=venue,ui.title=venue.name,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface}};Venue.find(credentials,actions),$scope.map_styles=[{stylers:[{hue:"#00ffe6"},{saturation:-100},{gamma:.8}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#BABABA"}]}]};module.controller("VenuesAboutMapController",controller).$inject=["$scope","$window","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Venue"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,snapRemote,CompanyService,UserService,UserInterface,Venue){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,venue_id:$stateParams.venueId},actions={success:function(venue){ui={title:venue.name,hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showVenueSubNav:!0,hasCustomHomeClass:!1,searching:!1,venueSubNav:"analysis"},$scope.venue=venue,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface;var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,venue_id:venue.id},actions={success:function(analysis){$scope.analysis=analysis;var dataAgeCategories=[],dataAgeSource=[],gapAgeValue=[],ethnicData=[],impressionsPromo=[],impressionsCost=[],ageValue=0;for(var key in analysis.age)dataAgeCategories.push(key),ageValue=parseInt(parseFloat(analysis.age[key]).toFixed(0)),dataAgeSource.push(analysis.age[key]?ageValue:0),gapAgeValue.push(100-(analysis.age[key]?ageValue:0));var ethnicValue=0;for(var key in analysis.ethnicity)item=[],item.push(key),ethnicValue=parseInt(parseFloat(analysis.ethnicity[key]).toFixed(0)),item.push(analysis.ethnicity[key]?ethnicValue:0),ethnicData.push(item);for(var key in analysis.trends_by_week.impressions_promo)impressionsPromo.push(analysis.trends_by_week.impressions_promo[key]?analysis.trends_by_week.impressions_promo[key]:0);for(var key in analysis.trends_by_week.cost_impression)impressionsCost.push(analysis.trends_by_week.cost_impression[key]?analysis.trends_by_week.cost_impression[key]:0);$scope.ageChart={plotOptions:{bar:{dataLabels:{enabled:!1}},series:{stacking:"percent",enableMouseTracking:!1,pointPadding:0,groupPadding:0,borderWidth:0,pointWidth:15,dataLabels:{color:"#3E9CCF",style:{fontSize:"11px"}}}},options:{chart:{type:"bar"},legend:{enabled:!1},plotOptions:{series:{stacking:"percent"}},tooltip:{enabled:!1}},series:[{data:gapAgeValue,id:"Serie1",name:"Fill in",color:"#DFDFDF"},{data:dataAgeSource,id:"Serie2",name:"Values",color:"#3E9CCF",dataLabels:{enabled:!0,format:"{y}%",color:"#3E9CCF",align:"right",x:30,y:-2,style:{color:"#3E9CCF"}}}],title:{text:""},xAxis:{currentMin:null,currentMax:null,categories:dataAgeCategories,title:{enabled:!1},labels:{style:{color:"#3E9CCF",fontSize:"13px"}},tickLength:0,lineWidth:0},yAxis:{max:100,labels:{enabled:!1},title:{text:!1},gridLineColor:"transparent",enabled:!1},credits:{enabled:!1},loading:!1},$scope.ethnicityChart={plotOptions:{pie:{shadow:!1},series:{enableMouseTracking:!1,dataLabels:{connectorColor:"#C0C0C0",softConnector:!1}}},options:{chart:{type:"pie"},colors:["#347a99","#218ebf","#41AAD8","#6ebde7","#94d6ed"],title:{text:null},credits:{enabled:!1},yAxis:{title:{text:null}},tooltip:{enabled:!1}},series:[{name:"Ethnicity",data:ethnicData,size:"60%",innerSize:"30%",distance:-10,dataLabels:{crop:!1,formatter:function(){return'<span style="font-size:16px;">'+this.y+'%</span><br /><div style="width: 50px;font-size:11px;">'+this.point.name+"</div>"},color:"#3E9CCF"}}]},$scope.trendsChart={options:{legend:{enabled:!1},tooltip:{enabled:!1}},title:{text:""},subtitle:{text:""},xAxis:{categories:["MON","TUE","WED","THU","FRI","SAT","SUN"]},yAxis:[{id:"primary-y",title:{enabled:!1}},{id:"secondary-y",title:{enabled:!1},opposite:!0}],legend:{enabled:!0},series:[{name:"Impressions/promo hour",type:"line",yAxis:"primary-y",data:impressionsPromo,labels:{enabled:!1}},{name:"Cost/Impression",type:"line",yAxis:"secondary-y",data:impressionsCost,labels:{enabled:!1}}],credits:{enabled:!1},loading:!1}}};Venue.analysis(credentials,actions)}};Venue.find(credentials,actions)};module.controller("VenuesAnalysisController",controller).$inject=["$scope","$state","$stateParams","snapRemote","CompanyService","UserService","UserInterface","Venue"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,snapRemote,CompanyService,UserService,UserInterface,Venue){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.hasPhotos=!1,$scope.loading=!0;var ui={},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,venue_id:$stateParams.venueId},actions={success:function(venue){ui={title:venue.name,hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showVenueSubNav:!0,hasCustomHomeClass:!1,searching:!1,venueSubNav:"photos"},$scope.venue=venue,angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface;var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,venue_id:venue.id},actions={success:function(photos){$scope.loading=!1,photos.length&&($scope.hasPhotos=!0),$scope.photos=photos}};Venue.photos(credentials,actions)}};Venue.find(credentials,actions)};module.controller("VenuesPhotosController",controller).$inject=["$scope","$state","$stateParams","snapRemote","CompanyService","UserService","UserInterface","Venue"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,snapRemote,UserService,CompanyService,UserInterface,Venue){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={title:"",hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!0,showEventSubNav:!1,hasCustomHomeClass:!0,CloseState:"home.venues.details.photos",searching:!1,venueSubNav:"photos",hasAddPhoto:!1},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,venue_id:$stateParams.venueId},actions={success:function(venue){$scope.venue=venue;var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,venue_id:$stateParams.venueId},actions={success:function(photos){photos.length&&($scope.hasPhotos=!0),$scope.photos=photos}};Venue.photos(credentials,actions),angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface,$scope.eventId=$stateParams.eventId,$scope.direction="left",$scope.currentIndex=$stateParams.index||0,$scope.setCurrentSlideIndex=function(index){$scope.direction=index>$scope.currentIndex?"left":"right",$scope.currentIndex=index},$scope.isCurrentSlideIndex=function(index){return Number($scope.currentIndex)===index},$scope.prevSlide=function(){$scope.direction="left",$scope.currentIndex=$scope.currentIndex<$scope.photos.length-1?++$scope.currentIndex:0},$scope.nextSlide=function(){$scope.direction="right",$scope.currentIndex=$scope.currentIndex>0?--$scope.currentIndex:$scope.photos.length-1}}};Venue.find(credentials,actions)};module.controller("VenuesPhotoSliderController",controller).$inject=["$scope","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Venue"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,$stateParams,snapRemote,CompanyService,UserService,UserInterface,Venue){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.showComments=!1,$scope.loading=!0;var ui={},credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,venue_id:$stateParams.venueId},actions={success:function(venue){ui={title:venue.name,hasMenuIcon:!1,hasDeleteIcon:!1,hasBackIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,showVenueSubNav:!0,hasCustomHomeClass:!1,searching:!1,venueSubNav:"comments"},angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface;var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,venue_id:$stateParams.venueId},actions={success:function(comments){comments.length&&($scope.showComments=!0),$scope.loading=!1,$scope.comments=[];for(var item,i=0;item=comments[i++];)$scope.comments.push("brandscopic"==item.type?{id:item.id,content:item.content,time:item.created_at,author:void 0,rating:void 0,type:"brandscopic"}:{id:void 0,content:item.text,time:item.time,author:item.author_name,rating:item.rating,type:"google"})}};Venue.comments(credentials,actions)}};Venue.find(credentials,actions)};module.controller("VenuesCommentsController",controller).$inject=["$scope","$state","$stateParams","snapRemote","CompanyService","UserService","UserInterface","Venue"],DashboardController.$inject=["$scope","$state","snapRemote","UserService","CompanyService","UserInterface","Campaign"],DashboardDetailsController.$inject=["$scope","$state","$stateParams","snapRemote","UserService","CompanyService","UserInterface","Campaign"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,snapRemote,UserService,CompanyService,UserInterface,User,Company){if(!UserService.isLogged())return void $state.go("login");snapRemote.close(),$scope.currentCompany=CompanyService.currentCompany,$scope.companies={};var credentials={auth_token:UserService.currentUser.auth_token},action={success:function(companies){$scope.UserInterface=UserInterface;var ui={title:"Companies",hasMenuIcon:!0,hasDeleteIcon:!1,hasBackIcon:!1,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCloseIcon:!1,hasCustomHomeClass:!1,searching:!1};angular.extend(UserInterface,ui),$scope.companies=companies}};Company.all(credentials,action),$scope.chooseCompany=function(companyId,companyName){var credentials={company_id:companyId,auth_token:UserService.currentUser.auth_token},actions={success:function(permissions){UserService.currentUser.permissions=permissions,CompanyService.currentCompany.id=companyId,CompanyService.currentCompany.name=companyName,$scope.$emit("CompanyChosen",companyId,companyName,permissions),$state.go("home.dashboard")}};User.permissions(credentials,actions)}};module.controller("CompaniesController",controller).$inject=["$scope","$state","snapRemote","UserService","CompanyService","UserInterface","User","Company"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,Notification,snapRemote,UserService,CompanyService,$state,UserInterface,allowedNotificationsFilter){function actionCreator(destinationState,parameters){return function(){destinationState&&$state.go(destinationState,parameters)}}snapRemote.close();var ui={title:"Notifications",hasMenuIcon:!0,hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCustomHomeClass:!1,searching:!1,hasBackIcon:!1};angular.extend(UserInterface,ui);var credentials={company_id:CompanyService.getCompanyId(),auth_token:UserService.currentUser.auth_token,"status[]":"Active"},actions={success:function(notifications){var viewModel=[];notifications=allowedNotificationsFilter(notifications);for(var i=0;i<notifications.length;i++){var notification=notifications[i],destinationState=null,parameters={};notification.event_id?(parameters={eventId:notification.event_id},destinationState="home.events.details.about"):"event_recaps_due"===notification.type?(parameters={filter:"due"},destinationState="home.events"):"event_recaps_late"===notification.type?(parameters={filter:"late"},destinationState="home.events"):"event_recaps_pending"===notification.type?(parameters={filter:"pending"},destinationState="home.events"):"event_recaps_rejected"===notification.type&&(parameters={filter:"rejected"},destinationState="home.events");var colorClass=Notification.getNotificationClass(notification);viewModel.push({message:notification.message,level:notification.level,type:-1!=notification.type.indexOf("task")?"tasks":-1!=notification.type.indexOf("event")?"event":"",action:actionCreator(destinationState,parameters),colorClass:colorClass})}$scope.notifications=viewModel}};Notification.all(credentials,actions)};module.controller("NotificationsController",controller).$inject=["$scope","Notification","snapRemote","UserService","CompanyService","$state","UserInterface","allowedNotificationsFilter"];var module=angular.module("brandscopicApp.controllers"),controller=function($scope,$state,snapRemote,UserService,UserInterface){if(!UserService.isLogged())return void $state.go("login");snapRemote.close();var ui={title:"Tasks",hasMagnifierIcon:!1,hasAddIcon:!1,hasSaveIcon:!1,hasEditSurveyIcon:!1,hasCancelIcon:!1,hasCustomHomeClass:!1,searching:!1};angular.extend(UserInterface,ui),$scope.UserInterface=UserInterface};module.controller("TasksController",controller).$inject=["$scope","$state","snapRemote","UserService","UserInterface"];