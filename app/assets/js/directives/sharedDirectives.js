angular.module('brandscopicApp.sharedDirectives', [])
    .directive('scopicTypeahead', ['$q', 'CompanyService', 'debounce', 'UserService', 'Venue', 'Event', 'eventService', function ($q, CompanyService, debounce, UserService, Venue, Event, eventService) {
        "use strict";

        var link = function (scope, element, attrs) {

              var obj = {"page":1,"total":11459,"facets":[{"label":"Campaigns","items":[{"label":"ABSOLUT BA FY14","id":14,"name":"campaign","selected":false},{"label":"ABSOLUT Bloody FY14","id":57,"name":"campaign","selected":false},{"label":"ABSOLUT Bloody Incremental FY14","id":22,"name":"campaign","selected":false},{"label":"ABSOLUT Large Shaker FY14","id":21,"name":"campaign","selected":false},{"label":"Absolut MC Large Shaker FY14","id":52,"name":"campaign","selected":false},{"label":"ABSOLUT MC Mini Shaker TEXAS FY14","id":54,"name":"campaign","selected":false},{"label":"ABSOLUT Texas Incremental Mini Shaker","id":55,"name":"campaign","selected":false},{"label":"Chivas BA Program FY14","id":23,"name":"campaign","selected":false},{"label":"Chivas Launch Events","id":62,"name":"campaign","selected":false},{"label":"Chivas Night Bottle BA Influencer FY14","id":64,"name":"campaign","selected":false},{"label":"Chivas Night Bottle MC FY14","id":20,"name":"campaign","selected":false},{"label":"Chivas Tribe Events FY14","id":24,"name":"campaign","selected":false},{"label":"English Gins Connoisseurs FY14","id":48,"name":"campaign","selected":false},{"label":"FY14 Prestige Events","id":42,"name":"campaign","selected":false},{"label":"Gin BA Account Visit FY14","id":6,"name":"campaign","selected":false},{"label":"Gin BA Events FY14","id":7,"name":"campaign","selected":false},{"label":"Gin BA Existing Program Support FY14","id":8,"name":"campaign","selected":false},{"label":"Gin BA Networking Meeting FY14","id":9,"name":"campaign","selected":false},{"label":"Incremental Activity FY14","id":67,"name":"campaign","selected":false},{"label":"Jameson Evolved MBN Program FY14","id":32,"name":"campaign","selected":false},{"label":"Jameson Locals FY14","id":5,"name":"campaign","selected":false},{"label":"Jameson MC FY14","id":16,"name":"campaign","selected":false},{"label":"Kahlua BA Program FY14","id":66,"name":"campaign","selected":false},{"label":"Kahlua MC FY14","id":56,"name":"campaign","selected":false},{"label":"Kahlua Midnight FY14","id":33,"name":"campaign","selected":false},{"label":"Kahlua Midnight FY14 Lab Visit","id":34,"name":"campaign","selected":false},{"label":"Kahlua Midnight FY14 Late Night Snack","id":26,"name":"campaign","selected":false},{"label":"Kahlua Midnight Off Premise FY13","id":27,"name":"campaign","selected":false},{"label":"Malibu BA Program FY14","id":31,"name":"campaign","selected":false},{"label":"Malibu Black FY14- Minneapolis Incremental","id":35,"name":"campaign","selected":false},{"label":"Malibu Combo BEP FY14","id":36,"name":"campaign","selected":false},{"label":"Malibu Combo MBN FY14","id":37,"name":"campaign","selected":false},{"label":"Malibu Island Spiced MBN FY14","id":38,"name":"campaign","selected":false},{"label":"Malibu Island Spiced SMBN FY14","id":39,"name":"campaign","selected":false},{"label":"Malibu MC BEP","id":61,"name":"campaign","selected":false},{"label":"Malibu MC FY14","id":49,"name":"campaign","selected":false},{"label":"Mama Walker's MBN FY14","id":2,"name":"campaign","selected":false},{"label":"Martell BA FY14","id":3,"name":"campaign","selected":false},{"label":"Martell Caract√©re MBN FY14","id":15,"name":"campaign","selected":false},{"label":"MOS Beacon Account FY14","id":10,"name":"campaign","selected":false},{"label":"MOS Distributor Training FY14","id":4,"name":"campaign","selected":false},{"label":"MOS One-Off FY14","id":11,"name":"campaign","selected":false},{"label":"MOS Ride-With FY14","id":13,"name":"campaign","selected":false},{"label":"MOS Staff Training FY14","id":12,"name":"campaign","selected":false},{"label":"Olmeca Altos BA FY14","id":47,"name":"campaign","selected":false},{"label":"Paddy MBN FY14","id":40,"name":"campaign","selected":false},{"label":"Pernod Absinthe BA FY14","id":41,"name":"campaign","selected":false},{"label":"Ricard BA FY14","id":43,"name":"campaign","selected":false},{"label":"TGL Whisky Shows FY14","id":50,"name":"campaign","selected":false},{"label":"The Glenlivet On-Premise Sampling FY14","id":25,"name":"campaign","selected":false},{"label":"TR Absolut Originality ","id":58,"name":"campaign","selected":false}]},{"label":"Brands","items":[{"label":"Aberlour","id":6,"name":"brand","selected":false},{"label":"Absolut","id":11,"name":"brand","selected":false},{"label":"Absolut","id":11,"name":"brand","selected":false},{"label":"Absolut","id":11,"name":"brand","selected":false},{"label":"Absolut","id":11,"name":"brand","selected":false},{"label":"Absolut","id":11,"name":"brand","selected":false},{"label":"Absolut","id":11,"name":"brand","selected":false},{"label":"Absolut","id":11,"name":"brand","selected":false},{"label":"Absolut","id":11,"name":"brand","selected":false},{"label":"Absolut Elyx","id":12,"name":"brand","selected":false},{"label":"ABSOLUT Vodka","id":25,"name":"brand","selected":false},{"label":"Beefeater","id":10,"name":"brand","selected":false},{"label":"Beefeater","id":10,"name":"brand","selected":false},{"label":"Chivas Regal","id":4,"name":"brand","selected":false},{"label":"Chivas Regal","id":4,"name":"brand","selected":false},{"label":"Chivas Regal","id":4,"name":"brand","selected":false},{"label":"Chivas Regal","id":4,"name":"brand","selected":false},{"label":"Chivas Regal","id":4,"name":"brand","selected":false},{"label":"Chivas Regal","id":4,"name":"brand","selected":false},{"label":"English Gins Connoisseurs","id":23,"name":"brand","selected":false},{"label":"Jameson LOCALS","id":13,"name":"brand","selected":false},{"label":"Jameson Whiskey","id":8,"name":"brand","selected":false},{"label":"Jameson Whiskey","id":8,"name":"brand","selected":false},{"label":"Jameson Whiskey","id":8,"name":"brand","selected":false},{"label":"Jameson Whiskey","id":8,"name":"brand","selected":false},{"label":"Jameson Whiskey","id":8,"name":"brand","selected":false},{"label":"Kahlua","id":15,"name":"brand","selected":false},{"label":"Kahlua Rum","id":26,"name":"brand","selected":false},{"label":"Kahlua Rum","id":26,"name":"brand","selected":false},{"label":"Kahlua Rum","id":26,"name":"brand","selected":false},{"label":"Kahlua Rum","id":26,"name":"brand","selected":false},{"label":"Kahlua Rum","id":26,"name":"brand","selected":false},{"label":"Kahlua Rum","id":26,"name":"brand","selected":false},{"label":"Kahlua Rum","id":26,"name":"brand","selected":false},{"label":"Malibu","id":14,"name":"brand","selected":false},{"label":"Malibu Rum","id":22,"name":"brand","selected":false},{"label":"Malibu Rum","id":22,"name":"brand","selected":false},{"label":"Malibu Rum","id":22,"name":"brand","selected":false},{"label":"Malibu Rum","id":22,"name":"brand","selected":false},{"label":"Malibu Rum","id":22,"name":"brand","selected":false},{"label":"Malibu Rum","id":22,"name":"brand","selected":false},{"label":"Malibu Rum","id":22,"name":"brand","selected":false},{"label":"Malibu Rum","id":22,"name":"brand","selected":false},{"label":"Malibu Rum","id":22,"name":"brand","selected":false},{"label":"Mama Walker's","id":2,"name":"brand","selected":false},{"label":"Mama Walker's","id":2,"name":"brand","selected":false},{"label":"Martell","id":3,"name":"brand","selected":false},{"label":"Martell","id":3,"name":"brand","selected":false},{"label":"Martell","id":3,"name":"brand","selected":false},{"label":"Olmeca Altos Tequila","id":21,"name":"brand","selected":false},{"label":"Olmeca Altos Tequila","id":21,"name":"brand","selected":false},{"label":"Paddy","id":16,"name":"brand","selected":false},{"label":"Paddy Irish Whiskey","id":27,"name":"brand","selected":false},{"label":"Paddy Irish Whiskey","id":27,"name":"brand","selected":false},{"label":"Pernod Absinthe","id":17,"name":"brand","selected":false},{"label":"Pernod Absinthe","id":17,"name":"brand","selected":false},{"label":"Plymouth","id":9,"name":"brand","selected":false},{"label":"Plymouth","id":9,"name":"brand","selected":false},{"label":"Prestige","id":18,"name":"brand","selected":false},{"label":"Prestige","id":18,"name":"brand","selected":false},{"label":"Ricard","id":19,"name":"brand","selected":false},{"label":"Ricard","id":19,"name":"brand","selected":false},{"label":"Royal Salute","id":7,"name":"brand","selected":false},{"label":"The Glenlivet","id":5,"name":"brand","selected":false},{"label":"The Glenlivet","id":5,"name":"brand","selected":false},{"label":"The Glenlivet","id":5,"name":"brand","selected":false},{"label":"The Glenlivet Whisky","id":24,"name":"brand","selected":false},{"label":"Travel Retail","id":20,"name":"brand","selected":false},{"label":"Travel Retail","id":20,"name":"brand","selected":false},{"label":"Travel Retail","id":20,"name":"brand","selected":false},{"label":"Travel Retail","id":20,"name":"brand","selected":false},{"label":"Travel Retail","id":20,"name":"brand","selected":false},{"label":"Travel Retail","id":20,"name":"brand","selected":false}]},{"label":"Areas","items":[{"label":"Ann Arbor","id":19,"count":null,"name":"area","selected":false},{"label":"Arizona","id":67,"count":null,"name":"area","selected":false},{"label":"Asbury Park","id":20,"count":null,"name":"area","selected":false},{"label":"Atlanta","id":21,"count":null,"name":"area","selected":false},{"label":"Austin","id":12,"count":null,"name":"area","selected":false},{"label":"Baltimore","id":22,"count":null,"name":"area","selected":false},{"label":"Baton Rouge","id":57,"count":null,"name":"area","selected":false},{"label":"Bloomington","id":23,"count":null,"name":"area","selected":false},{"label":"Boston","id":5,"count":null,"name":"area","selected":false},{"label":"Boulder","id":24,"count":null,"name":"area","selected":false},{"label":"Buffalo","id":25,"count":null,"name":"area","selected":false},{"label":"Chicago","id":7,"count":null,"name":"area","selected":false},{"label":"Choice","id":66,"count":null,"name":"area","selected":false},{"label":"Cincinnati","id":26,"count":null,"name":"area","selected":false},{"label":"Cleveland","id":27,"count":null,"name":"area","selected":false},{"label":"College Station","id":1,"count":null,"name":"area","selected":false},{"label":"Colorado","id":68,"count":null,"name":"area","selected":false},{"label":"Columbia","id":65,"count":null,"name":"area","selected":false},{"label":"Columbus","id":28,"count":null,"name":"area","selected":false},{"label":"Dallas","id":30,"count":null,"name":"area","selected":false},{"label":"D.C.","id":29,"count":null,"name":"area","selected":false},{"label":"Denver","id":9,"count":null,"name":"area","selected":false},{"label":"Detroit","id":31,"count":null,"name":"area","selected":false},{"label":"East Lansing","id":18,"count":null,"name":"area","selected":false},{"label":"Fairfield","id":32,"count":null,"name":"area","selected":false},{"label":"Fire Island","id":33,"count":null,"name":"area","selected":false},{"label":"Ft. Lauderdale","id":34,"count":null,"name":"area","selected":false},{"label":"Gainesville","id":35,"count":null,"name":"area","selected":false},{"label":"Grand Rapids","id":36,"count":null,"name":"area","selected":false},{"label":"Houston","id":37,"count":null,"name":"area","selected":false},{"label":"Indianapolis","id":38,"count":null,"name":"area","selected":false},{"label":"Kansas City","id":39,"count":null,"name":"area","selected":false},{"label":"Las Vegas","id":40,"count":null,"name":"area","selected":false},{"label":"Long Island/Hamptons","id":41,"count":null,"name":"area","selected":false},{"label":"Los Angeles","id":17,"count":null,"name":"area","selected":false},{"label":"Madison","id":2,"count":null,"name":"area","selected":false},{"label":"Metro New York","id":14,"count":null,"name":"area","selected":false},{"label":"Miami","id":42,"count":null,"name":"area","selected":false},{"label":"Milwaukee","id":43,"count":null,"name":"area","selected":false},{"label":"Minneapolis","id":3,"count":null,"name":"area","selected":false},{"label":"Nevada","id":69,"count":null,"name":"area","selected":false},{"label":"New Jersey (North)","id":60,"count":null,"name":"area","selected":false},{"label":"New Jersey (South)","id":61,"count":null,"name":"area","selected":false},{"label":"New Orleans","id":4,"count":null,"name":"area","selected":false},{"label":"Ocean City","id":44,"count":null,"name":"area","selected":false},{"label":"Orange County","id":15,"count":null,"name":"area","selected":false},{"label":"Orlando","id":45,"count":null,"name":"area","selected":false},{"label":"Philadelphia","id":6,"count":null,"name":"area","selected":false},{"label":"Phoenix","id":46,"count":null,"name":"area","selected":false},{"label":"Pittsburgh","id":47,"count":null,"name":"area","selected":false},{"label":"Portland","id":48,"count":null,"name":"area","selected":false},{"label":"Provincetown","id":62,"count":null,"name":"area","selected":false},{"label":"Raleigh","id":63,"count":null,"name":"area","selected":false},{"label":"Rehoboth Beach","id":64,"count":null,"name":"area","selected":false},{"label":"Rio Grande Valley","id":49,"count":null,"name":"area","selected":false},{"label":"Rochester","id":50,"count":null,"name":"area","selected":false},{"label":"Sacramento","id":10,"count":null,"name":"area","selected":false},{"label":"San Antonio","id":51,"count":null,"name":"area","selected":false},{"label":"San Diego","id":11,"count":null,"name":"area","selected":false},{"label":"San Francisco","id":16,"count":null,"name":"area","selected":false},{"label":"San Jose","id":52,"count":null,"name":"area","selected":false},{"label":"Santa Barbara","id":58,"count":null,"name":"area","selected":false},{"label":"Seattle","id":13,"count":null,"name":"area","selected":false},{"label":"State College","id":54,"count":null,"name":"area","selected":false},{"label":"St. Louis","id":53,"count":null,"name":"area","selected":false},{"label":"Syracuse","id":8,"count":null,"name":"area","selected":false},{"label":"Tampa","id":55,"count":null,"name":"area","selected":false},{"label":"Virginia Beach","id":56,"count":null,"name":"area","selected":false}]},{"label":"People","items":[{"label":"Aaron Sinfield","id":58,"name":"user","selected":false},{"label":"Abbie Buchan","id":175,"name":"user","selected":false},{"label":"Alex MacKinnon","id":67,"name":"user","selected":false},{"label":"Alicia Gillum","id":204,"name":"user","selected":false},{"label":"Alison Miller","id":248,"name":"user","selected":false},{"label":"Alyssa  Naumann","id":251,"name":"user","selected":false},{"label":"Amena White","id":27,"name":"user","selected":false},{"label":"Andrea Garza","id":202,"name":"user","selected":false},{"label":"Andrew Friedman","id":66,"name":"user","selected":false},{"label":"Anne Louise Marquis","id":124,"name":"user","selected":false},{"label":"Ashley Delorey","id":99,"name":"user","selected":false},{"label":"Becca Kromer","id":10,"name":"user","selected":false},{"label":"Brett Buckelew","id":176,"name":"user","selected":false},{"label":"Briana White","id":298,"name":"user","selected":false},{"label":"Brook Brooks","id":172,"name":"user","selected":false},{"label":"Cacia Phillips","id":95,"name":"user","selected":false},{"label":"Caitlin McCauley","id":246,"name":"user","selected":false},{"label":"Caitlin Stadler","id":284,"name":"user","selected":false},{"label":"Catherine  Reuter","id":84,"name":"user","selected":false},{"label":"Chastity Reed","id":258,"name":"user","selected":false},{"label":"Chris Decker","id":187,"name":"user","selected":false},{"label":"Chris Greenland","id":57,"name":"user","selected":false},{"label":"Christina Tracy","id":64,"name":"user","selected":false},{"label":"Corina Matias","id":244,"name":"user","selected":false},{"label":"Dale Smith","id":283,"name":"user","selected":false},{"label":"Dan Robitaille","id":102,"name":"user","selected":false},{"label":"Daniel DeOliveira","id":115,"name":"user","selected":false},{"label":"Daniel Warrilow","id":305,"name":"user","selected":false},{"label":"David Iannone","id":63,"name":"user","selected":false},{"label":"Dillon Lockwood","id":56,"name":"user","selected":false},{"label":"Fred Sarkis","id":127,"name":"user","selected":false},{"label":"George Huss","id":69,"name":"user","selected":false},{"label":"Gina Mondi","id":249,"name":"user","selected":false},{"label":"Heather Johnson","id":225,"name":"user","selected":false},{"label":"Irina Romanyuk","id":266,"name":"user","selected":false},{"label":"Isabel Brown","id":14,"name":"user","selected":false},{"label":"JC Rubiralta","id":126,"name":"user","selected":false},{"label":"Janiece Sarduy","id":272,"name":"user","selected":false},{"label":"Jason Garza","id":203,"name":"user","selected":false},{"label":"Jennifer Amaral","id":113,"name":"user","selected":false},{"label":"Jessica Doris","id":189,"name":"user","selected":false},{"label":"Jill Zachmann","id":301,"name":"user","selected":false},{"label":"Joana Gomez","id":208,"name":"user","selected":false},{"label":"Joey Maloney","id":55,"name":"user","selected":false},{"label":"Josh Pearson","id":108,"name":"user","selected":false},{"label":"Joy Wolf","id":62,"name":"user","selected":false},{"label":"Julia Rivera","id":265,"name":"user","selected":false},{"label":"Kandeel Iqbal","id":223,"name":"user","selected":false},{"label":"Katie Small","id":282,"name":"user","selected":false},{"label":"Kayla Schaefer","id":110,"name":"user","selected":false},{"label":"Keith Raimondi","id":125,"name":"user","selected":false},{"label":"Kelli Hagen","id":11,"name":"user","selected":false},{"label":"Kelly Walker","id":295,"name":"user","selected":false},{"label":"Kristen Schaefer","id":109,"name":"user","selected":false},{"label":"Laura Kelly","id":8,"name":"user","selected":false},{"label":"Laura Leathers","id":54,"name":"user","selected":false},{"label":"Laurie Hess","id":19,"name":"user","selected":false},{"label":"Lindsay Nader","id":107,"name":"user","selected":false},{"label":"Lisa Conry","id":37,"name":"user","selected":false},{"label":"Liz Harper","id":98,"name":"user","selected":false},{"label":"Lorena Serrano","id":278,"name":"user","selected":false},{"label":"Maria Palazzo","id":252,"name":"user","selected":false},{"label":"Maria Wojtowicz","id":24,"name":"user","selected":false},{"label":"Martina Chan","id":180,"name":"user","selected":false},{"label":"Mary Ferrara","id":197,"name":"user","selected":false},{"label":"Melissa Thomas","id":289,"name":"user","selected":false},{"label":"Miguel Galan","id":199,"name":"user","selected":false},{"label":"Multicultural","id":4,"name":"team","selected":false},{"label":"Natalie George","id":93,"name":"user","selected":false},{"label":"Natalie Gleaves","id":205,"name":"user","selected":false},{"label":"Nick van Tiel","id":130,"name":"user","selected":false},{"label":"Nicole  Gannon","id":200,"name":"user","selected":false},{"label":"Oonagh Buckley","id":60,"name":"user","selected":false},{"label":"Paul O'Callaghan","id":59,"name":"user","selected":false},{"label":"Paula Zuniga","id":302,"name":"user","selected":false},{"label":"Rainier Negri","id":76,"name":"user","selected":false},{"label":"Raquel Bernal","id":167,"name":"user","selected":false},{"label":"Rashida Still","id":285,"name":"user","selected":false},{"label":"Rebecca Brancato","id":170,"name":"user","selected":false},{"label":"Renee Edwards","id":191,"name":"user","selected":false},{"label":"Risa Sepkowski","id":65,"name":"user","selected":false},{"label":"Robert Cuthbert","id":185,"name":"user","selected":false},{"label":"Robert Ferrara","id":118,"name":"user","selected":false},{"label":"Rocio Gomez","id":209,"name":"user","selected":false},{"label":"Santos Ruiz","id":68,"name":"user","selected":false},{"label":"Sean Frederick","id":119,"name":"user","selected":false},{"label":"Shawn Richardz","id":263,"name":"user","selected":false},{"label":"Shelby Sampson","id":270,"name":"user","selected":false},{"label":"Stephanie DiLanzo","id":25,"name":"user","selected":false},{"label":"Tana Perry","id":255,"name":"user","selected":false},{"label":"Taylor Travaglione","id":52,"name":"user","selected":false},{"label":"Tiffiny Milian","id":247,"name":"user","selected":false},{"label":"Tonya May","id":245,"name":"user","selected":false},{"label":"Tosha Bryant","id":174,"name":"user","selected":false},{"label":"Trevor Easter","id":116,"name":"user","selected":false},{"label":"Trinity Ruiz","id":268,"name":"user","selected":false},{"label":"Victoria George","id":120,"name":"user","selected":false},{"label":"Vincent Wagliardo","id":294,"name":"user","selected":false},{"label":"Yann Cosmao","id":104,"name":"user","selected":false},{"label":"Yelitza Reveles","id":262,"name":"user","selected":false},{"label":"Yuridia Acosta","id":158,"name":"user","selected":false}]},{"label":"Event Status","items":[{"label":"Approved","id":"Approved","name":"event_status","count":5872,"selected":false},{"label":"Due","id":"Due","name":"event_status","count":0,"selected":false},{"label":"Late","id":"Late","name":"event_status","count":2293,"selected":false},{"label":"Rejected","id":"Rejected","name":"event_status","count":473,"selected":false},{"label":"Submitted","id":"Submitted","name":"event_status","count":2776,"selected":false}]},{"label":"Active State","items":[{"label":"Active","id":"Active","name":"status","count":10477,"selected":false},{"label":"Inactive","id":"Inactive","name":"status","count":982,"selected":false}]}],"results":[{"id":3332,"start_date":"05/09/2013","start_time":"2:45 PM","end_date":"05/09/2013","end_time":"3:45 PM","status":"Inactive","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1168,"name":"Celtic Gardens","latitude":29.748804,"longitude":-95.37537399999999,"formatted_address":"2300 Louisiana Street, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77006"}},{"id":3314,"start_date":"05/09/2013","start_time":"4:00 PM","end_date":"05/09/2013","end_time":"5:00 PM","status":"Inactive","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1163,"name":"J. BLACK'S Feel Good Kitchen & Lounge","latitude":29.769084,"longitude":-95.397637,"formatted_address":"110 South Heights Boulevard, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77007"}},{"id":3341,"start_date":"05/11/2013","start_time":"8:15 PM","end_date":"05/11/2013","end_time":"9:15 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":949,"name":"Lumen Lounge","latitude":29.727291,"longitude":-95.419061,"formatted_address":"5020 Kirby Drive, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77098"}},{"id":3349,"start_date":"05/11/2013","start_time":"9:30 PM","end_date":"05/11/2013","end_time":"10:30 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1202,"name":"Eighteenth Cocktail Bar","latitude":29.725215,"longitude":-95.417334,"formatted_address":"2511 Bissonnet Street, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77005"}},{"id":3365,"start_date":"05/23/2013","start_time":"4:00 PM","end_date":"05/23/2013","end_time":"5:00 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1163,"name":"J. BLACK'S Feel Good Kitchen & Lounge","latitude":29.769084,"longitude":-95.397637,"formatted_address":"110 South Heights Boulevard, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77007"}},{"id":3372,"start_date":"05/23/2013","start_time":"5:15 PM","end_date":"05/23/2013","end_time":"6:15 PM","status":"Active","event_status":"Approved","campaign":{"id":0,"name":null},"place":{"id":1168,"name":"Celtic Gardens","latitude":29.748804,"longitude":-95.37537399999999,"formatted_address":"2300 Louisiana Street, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77006"}},{"id":3396,"start_date":"05/25/2013","start_time":"10:45 AM","end_date":"05/25/2013","end_time":"11:45 AM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1178,"name":"Roak on Kirby","latitude":29.7333171,"longitude":-95.417519,"formatted_address":"3320 Kirby Drive, Houston, TX 77098","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77098"}},{"id":3382,"start_date":"05/25/2013","start_time":"8:15 PM","end_date":"05/25/2013","end_time":"9:15 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":949,"name":"Lumen Lounge","latitude":29.727291,"longitude":-95.419061,"formatted_address":"5020 Kirby Drive, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77098"}},{"id":3388,"start_date":"05/25/2013","start_time":"9:30 PM","end_date":"05/25/2013","end_time":"10:30 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1202,"name":"Eighteenth Cocktail Bar","latitude":29.725215,"longitude":-95.417334,"formatted_address":"2511 Bissonnet Street, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77005"}},{"id":3380,"start_date":"05/30/2013","start_time":"8:00 PM","end_date":"05/30/2013","end_time":"9:00 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":436,"name":"Speakeasy","latitude":30.266751,"longitude":-97.743484,"formatted_address":"412 Congress Avenue, Austin, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Austin","zipcode":"78701"}},{"id":3389,"start_date":"05/30/2013","start_time":"9:30 PM","end_date":"05/30/2013","end_time":"10:30 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1438,"name":"Lanai","latitude":30.266949,"longitude":-97.74341,"formatted_address":"422 Congress Avenue, Austin, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Austin","zipcode":"78701"}},{"id":3393,"start_date":"05/30/2013","start_time":"11:00 PM","end_date":"05/31/2013","end_time":"12:00 AM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":340,"name":"Hangar Lounge","latitude":30.266318,"longitude":-97.745035,"formatted_address":"318 Colorado Street, Austin, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Austin","zipcode":"78701"}},{"id":3353,"start_date":"05/31/2013","start_time":"8:00 PM","end_date":"05/31/2013","end_time":"9:00 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":441,"name":"Cedar Street Courtyard","latitude":30.266844,"longitude":-97.74539,"formatted_address":"208 West 4th Street, Austin, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Austin","zipcode":"78701"}},{"id":3363,"start_date":"05/31/2013","start_time":"9:30 PM","end_date":"05/31/2013","end_time":"10:30 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1434,"name":"Geisha Room","latitude":30.267022,"longitude":-97.74338299999999,"formatted_address":"422 Congress Avenue, Austin, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Austin","zipcode":"78701"}},{"id":3408,"start_date":"05/31/2013","start_time":"10:45 PM","end_date":"05/31/2013","end_time":"11:45 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1178,"name":"Roak on Kirby","latitude":29.7333171,"longitude":-95.417519,"formatted_address":"3320 Kirby Drive, Houston, TX 77098","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77098"}},{"id":3373,"start_date":"05/31/2013","start_time":"11:00 PM","end_date":"06/01/2013","end_time":"12:00 AM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":344,"name":"Rowdy Saloon","latitude":30.267833,"longitude":-97.74607,"formatted_address":"305 West 5th Street, Austin, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Austin","zipcode":"78701"}},{"id":3402,"start_date":"06/01/2013","start_time":"8:15 PM","end_date":"06/01/2013","end_time":"9:15 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":949,"name":"Lumen Lounge","latitude":29.727291,"longitude":-95.419061,"formatted_address":"5020 Kirby Drive, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77098"}},{"id":3405,"start_date":"06/01/2013","start_time":"9:30 PM","end_date":"06/01/2013","end_time":"10:30 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1202,"name":"Eighteenth Cocktail Bar","latitude":29.725215,"longitude":-95.417334,"formatted_address":"2511 Bissonnet Street, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77005"}},{"id":3414,"start_date":"06/06/2013","start_time":"4:00 PM","end_date":"06/06/2013","end_time":"5:00 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1163,"name":"J. BLACK'S Feel Good Kitchen & Lounge","latitude":29.769084,"longitude":-95.397637,"formatted_address":"110 South Heights Boulevard, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77007"}},{"id":3420,"start_date":"06/06/2013","start_time":"5:15 PM","end_date":"06/06/2013","end_time":"6:15 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1168,"name":"Celtic Gardens","latitude":29.748804,"longitude":-95.37537399999999,"formatted_address":"2300 Louisiana Street, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77006"}},{"id":3400,"start_date":"06/07/2013","start_time":"8:00 PM","end_date":"06/07/2013","end_time":"9:00 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":191,"name":"The Goodnight","latitude":30.358748,"longitude":-97.73399999999999,"formatted_address":"2700 West Anderson Lane #101, Austin, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Austin","zipcode":"78757"}},{"id":3406,"start_date":"06/07/2013","start_time":"9:30 PM","end_date":"06/07/2013","end_time":"10:30 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":104,"name":"117 W 4th St","latitude":30.266246,"longitude":-97.744544,"formatted_address":"117 W 4th St, Austin, TX 78701, USA","country":"US","state":"Texas","state_name":"Texas","city":"Austin","zipcode":"78701"}},{"id":3409,"start_date":"06/08/2013","start_time":"9:00 PM","end_date":"06/08/2013","end_time":"10:00 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":120,"name":"Maggie Mae's","latitude":30.267084,"longitude":-97.739673,"formatted_address":"323 East 6th Street, Austin, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Austin","zipcode":"78701"}},{"id":3415,"start_date":"06/08/2013","start_time":"10:30 PM","end_date":"06/08/2013","end_time":"11:30 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":133,"name":"The Dizzy Rooster","latitude":30.267563,"longitude":-97.739931,"formatted_address":"306 East 6th Street, Austin, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Austin","zipcode":"78701"}},{"id":3424,"start_date":"06/13/2013","start_time":"4:00 PM","end_date":"06/13/2013","end_time":"5:00 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1163,"name":"J. BLACK'S Feel Good Kitchen & Lounge","latitude":29.769084,"longitude":-95.397637,"formatted_address":"110 South Heights Boulevard, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77007"}},{"id":3432,"start_date":"06/13/2013","start_time":"5:15 PM","end_date":"06/13/2013","end_time":"6:15 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1168,"name":"Celtic Gardens","latitude":29.748804,"longitude":-95.37537399999999,"formatted_address":"2300 Louisiana Street, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77006"}},{"id":3452,"start_date":"06/15/2013","start_time":"10:45 AM","end_date":"06/15/2013","end_time":"11:45 AM","status":"Active","event_status":"Approved","campaign":{"id":0,"name":null},"place":{"id":1178,"name":"Roak on Kirby","latitude":29.7333171,"longitude":-95.417519,"formatted_address":"3320 Kirby Drive, Houston, TX 77098","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77098"}},{"id":3439,"start_date":"06/15/2013","start_time":"8:15 PM","end_date":"06/15/2013","end_time":"9:15 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":949,"name":"Lumen Lounge","latitude":29.727291,"longitude":-95.419061,"formatted_address":"5020 Kirby Drive, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77098"}},{"id":3448,"start_date":"06/15/2013","start_time":"9:30 PM","end_date":"06/15/2013","end_time":"10:30 PM","status":"Active","event_status":"Approved","campaign":{"id":55,"name":"ABSOLUT Texas Incremental Mini Shaker"},"place":{"id":1202,"name":"Eighteenth Cocktail Bar","latitude":29.725215,"longitude":-95.417334,"formatted_address":"2511 Bissonnet Street, Houston, TX, United States","country":"US","state":"Texas","state_name":"Texas","city":"Houston","zipcode":"77005"}},{"id":9537,"start_date":"06/26/2013","start_time":"2:00 PM","end_date":"06/26/2013","end_time":"3:00 PM","status":"Inactive","event_status":"Late","campaign":{"id":41,"name":"Pernod Absinthe BA FY14"},"place":{"id":2774,"name":"Booker & Dax","latitude":40.731742,"longitude":-73.98591399999999,"formatted_address":"207 2nd Avenue, New York, NY, United States","country":"US","state":"New York","state_name":"New York","city":"New York","zipcode":"10003"}}]}
              scope.searchResult = [];
              angular.forEach(obj.facets, function (item) {
                  angular.forEach(item.items, function (subItem) {
                      scope.searchResult.push({ category: subItem.name, label: subItem.label, id: subItem.id });
                  });
              });

            scope.searchModel = "";
            var searchResult = []
            $.widget( "custom.catcomplete", $.ui.autocomplete, {
                  _renderMenu: function( ul, items ) {
                      var that = this,
                      currentCategory = "";
                      $.each( items, function( index, item ) {
                          if ( item.category != currentCategory ) {
                            ul.append( "<li class='ui-autocomplete-category'>" + "<a class='category'><strong>" + item.category + "</strong></a>" + "</li>" );
                            currentCategory = item.category;
                          }
                          that._renderItemData( ul, item );
                      });
                  }
            });

            eventService.getEventSearch("").then( function (data) {
                searchResult = data;
            })

            $( "#searchEvent" ).catcomplete({
              delay: 0,
              source: scope.searchResult/*function (request, response) {
                      eventService.getEventSearch(request.term).then( function (data) {
                          response(data);
                      })
                  }*/
                });
    		};

        return {
            link: link,
            restrict: 'E',
            templateUrl: 'views/directives/templates/typeahead.html'
        };
    }]);